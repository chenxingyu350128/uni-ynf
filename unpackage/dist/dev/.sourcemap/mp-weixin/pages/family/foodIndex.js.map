{"version":3,"sources":["uni-app:///main.js","webpack:///E:/learn/xxx/pages/family/foodIndex.vue?e741","webpack:///E:/learn/xxx/pages/family/foodIndex.vue?145b","webpack:///E:/learn/xxx/pages/family/foodIndex.vue?de92","webpack:///E:/learn/xxx/pages/family/foodIndex.vue?6e1b","uni-app:///pages/family/foodIndex.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,sG;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACyO;AACzO,gBAAgB,8OAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,mNAEN;AACL,GAAG;AACH;AACA,WAAW,mNAEN;AACL,GAAG;AACH;AACA,WAAW,uMAEN;AACL,GAAG;AACH;AACA,WAAW,uMAEN;AACL,GAAG;AACH;AACA,WAAW,6MAEN;AACL,GAAG;AACH;AACA,WAAW,6MAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAAA;AAAu7B,CAAgB,w7BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6I38B;AACA,MADA,kBACA;AACA;AACA,cADA;AAEA,uBAFA;AAGA,iBAHA;AAIA,cAJA;AAKA,aALA;AAMA,sBANA;AAOA,cAPA;AAQA,gCARA;AASA,sBATA;AAUA;AACA,gBAXA;AAYA,iBAZA;AAaA,kBAbA;AAcA,kBAdA;AAeA,kBAfA;AAgBA,qBAhBA;AAiBA;AACA,oBAlBA;AAmBA,oBAnBA;AAoBA,kBApBA;AAqBA,kBArBA;AAsBA,yBAtBA;AAuBA,uBAvBA;;AAyBA,GA3BA;AA4BA;AACA,aADA,uBACA;AACA;AACA,KAHA;AAIA,YAJA,sBAIA;AACA;AACA,KANA,EA5BA;;AAoCA,QApCA,kBAoCA,CApCA,EAoCA;AACA;AACA;AACA;AACA;AACA,GAzCA;AA0CA,QA1CA,oBA0CA;AACA;AACA,GA5CA;AA6CA,QA7CA,oBA6CA;AACA;AACA;AACA,GAhDA;AAiDA,UAjDA,sBAiDA;AACA;AACA;AACA,GApDA;AAqDA,eArDA,2BAqDA;AACA;AACA;AACA;AACA;AACA;AACA,KALA,MAKA;AACA;AACA;AACA,GA9DA;AA+DA;AACA,cADA,wBACA;AACA;AACA,iCADA;;AAGA;AACA,UADA,CACA;AACA;AACA;AACA;AACA,OALA;AAMA,KAXA;AAYA,UAZA,kBAYA,CAZA,EAYA;AACA;AACA;AACA;AACA,KAhBA;AAiBA,cAjBA,sBAiBA,IAjBA,EAiBA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,iCAFA;AAGA,uBAHA;AAIA,uBAJA;;AAMA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA,WARA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA;AACA;AACA;AACA;AACA;AACA,OA5BA;AA6BA,KAzDA;AA0DA,cA1DA,wBA0DA;AACA;AACA,0BADA;AAEA,iCAFA;;AAIA;AACA,UADA,CACA;AACA;AACA;AACA;AACA,OALA;AAMA,KArEA;AAsEA,YAtEA,oBAsEA,CAtEA,EAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gJADA;;AAGA,KA/EA;AAgFA,WAhFA,mBAgFA,CAhFA,EAgFA;AACA;AACA;AACA;AACA;AACA;AACA,KAtFA;AAuFA,cAvFA,sBAuFA,CAvFA,EAuFA;AACA;AACA;AACA;AACA;AACA,gCALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,EAKA,EALA;AAMA;AACA,OAnBA,EAmBA,GAnBA;AAoBA,KAlHA;AAmHA,YAnHA,oBAmHA,CAnHA,EAmHA;AACA;AACA;AACA;AACA;AACA,8BALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,EAKA,EALA;AAMA;AACA,OAlBA,EAkBA,GAlBA;AAmBA,KA7IA;AA8IA,YA9IA,oBA8IA,CA9IA,EA8IA;AACA;AACA;AACA;AACA,KAlJA;AAmJA,UAnJA,kBAmJA,CAnJA,EAmJA;AACA;AACA;AACA;AACA,KAvJA;AAwJA,aAxJA,qBAwJA,CAxJA,EAwJA;AACA;AACA;AACA;AACA,KA5JA;AA6JA,cA7JA,wBA6JA;AACA;AACA,iCADA;AAEA,+BAFA;AAGA,2BAHA;AAIA,2BAJA;AAKA,+BALA;AAMA,6BANA;AAOA,6BAPA;AAQA,+BARA;AASA,2BATA;AAUA,uCAVA;;AAYA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA,KAjLA,EA/DA,E","file":"pages/family/foodIndex.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/family/foodIndex.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./foodIndex.vue?vue&type=template&id=0e01abbc&\"\nvar renderjs\nimport script from \"./foodIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./foodIndex.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/family/foodIndex.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodIndex.vue?vue&type=template&id=0e01abbc&\"","var components = {\n  uSearch: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-search/u-search\" */ \"@/uview-ui/components/u-search/u-search.vue\"\n    )\n  },\n  uAvatar: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-avatar/u-avatar\" */ \"@/uview-ui/components/u-avatar/u-avatar.vue\"\n    )\n  },\n  uIcon: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n    )\n  },\n  uLine: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-line/u-line\" */ \"@/uview-ui/components/u-line/u-line.vue\"\n    )\n  },\n  uEmpty: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n    )\n  },\n  uPopup: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = Math.round((_vm.heatQuantity / 100) * _vm.foodNum)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.keyword = \"\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.showPopup = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\long\\\\Downloads\\\\Compressed\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./foodIndex.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\r\n    <view class=\"px-4 py-2 posSticky t0 white zIndexHigh u-border-bottom\">\r\n      <u-search \r\n      @search=\"searchFood\" \r\n      @custom=\"searchFood\"\r\n      @clear=\"keyword=''\"\r\n      placeholder=\"请输入食物名称\" \r\n      v-model=\"keyword\" />\n      <view v-if=\"searchHistory.length\">\r\n        <view class=\"d-flex primary--text flex-wrap\">\r\n          <text class=\"pa-2\" @click=\"search(x.foodName)\" v-for=\"(x, i) in searchHistory\" :key=\"i\">\r\n            {{x.foodName}}\r\n          </text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-if=\"list.length\">\r\n      <view\n        v-for=\"(item, i) in list\"\n        :key=\"i\"\n      >\n        <view\n          class=\"px-4 py-2 d-flex justify-space-between align-center\"\n          @click=\"toDetail(item)\"\n        >\r\n          <u-avatar :src=\"item.foodImg\" size=\"70\"></u-avatar>\n          <view class=\"d-flex flex-column ml-4\">\n            <text class=\"subtitle-2\">{{ item.foodName }}</text>\n            <text class=\"caption text-lowercase\">{{ item.heatQuantity }}千卡/100{{ item.foodUnit }}</text>\n          </view>\r\n          <view class=\"flex-fill\"></view>\n          <view @click.stop=\"addBite(item)\" class=\"d-inline-flex text-right\">\n            <u-icon  size=\"60\" color=\"#ec9b33\" name=\"plus-circle-fill\"></u-icon>\n          </view>\n        </view>\n        <u-line color=\"grey\" />\n      </view>      \r\n    </view>\r\n    <view v-else class=\"pa-6\">\r\n      <!-- car   购物车为空 page   页面不存在 search   没有搜索结果 address   没有收货地址 wifi   没有WiFi order   订单为空 coupon   没有优惠券 favor   无收藏 permission   无权限 history   无历史记录 news   无新闻列表 message   消息列表为空 list   列表为空(通用) data   数据为空(默认，通用) -->\r\n      <u-empty text=\"暂无结果\" mode=\"car\"></u-empty>\r\n    </view>\r\n    <u-popup v-model=\"showPopup\" mode=\"bottom\">\r\n      \r\n      <view class=\"white\">\r\n        <view\r\n          class=\"pa-0 ma-0 py-2 subtitle-2 d-flex\"\r\n        >\r\n          <view\r\n            class=\"col-3 d-flex justify-center align-center\"\r\n            @click=\"showPopup=false\"\r\n          >\r\n            取消\r\n          </view>\r\n          <view\r\n            class=\"col-6 subtitle-1 d-flex justify-center align-center\"\r\n          >\r\n            添加今日饮食\r\n          </view>\r\n          <view\r\n            class=\"d-flex col-3 justify-center align-center\"\r\n            style=\"color: #EC9B33\"\r\n            @click=\"addCertain\"\r\n          >\r\n            确认\r\n          </view>\r\n        </view>\r\n        <u-line color=\"grey\" />\r\n        <view class=\"px-4 py-2 d-flex align-center\">\r\n          <u-avatar :src=\"foodImg\" size=\"70\"></u-avatar>\r\n          <view class=\"d-flex flex-column ml-4\">\r\n            <text class=\"subtitle-2\">{{ foodName }}</text>\r\n            <text class=\"caption text-lowercase\">{{ heatQuantity }}千卡/100{{ foodUnit }}</text>\r\n          </view>\r\n        </view>\t\r\n        <u-line color=\"grey\" />\r\n        <view\r\n          class=\"pa-2 ma-0 py-2 subtitle-2 d-flex\"\r\n        >\r\n          <view\r\n            class=\"col-4 d-flex align-end\"\r\n            style=\"color: #EC9B33\"\r\n          >\r\n            估算数量\r\n          </view>\r\n          <view\r\n            style=\"color: #EC9B33\"\r\n            class=\"col-8 text-right\"\r\n          >\r\n            {{ Math.round(heatQuantity/100*foodNum) }}千卡/{{ foodNum }}{{ foodUnit }}\r\n          </view>\r\n        </view>\t\t\t\t\r\n        <view\r\n          class=\"pa-0 ma-0 py-2 subtitle-2 d-flex align-center\"\r\n        >\r\n          <view\r\n            class=\"col-3 text-center\"\r\n          >\r\n            <view \r\n              class=\"d-inline-flex\"\r\n              @touchmove=\"touchMove\"\n              @touchstart=\"minusStart\"\n              @touchend=\"minusEnd\"\r\n            >\r\n              <u-icon \r\n                color=\"#ec9b33\" \r\n                size=\"60\" \r\n                name=\"minus-circle\"\r\n              />\r\n            </view>\r\n          </view>\r\n          <view\r\n            class=\"col-6 title font-weight-bold text-center\"\r\n          >\r\n            {{ foodNum }}\r\n            <text class=\"caption ml-2\">{{ theFoodUnit }}</text>\r\n          </view>\r\n          <view\r\n            class=\"col-3 text-center\"\r\n          >\r\n            <view \r\n              class=\"d-inline-flex\"\r\n              @touchmove=\"touchMove\"\n              @touchstart=\"addStart\"\n              @touchend=\"addEnd\"\r\n            >\r\n              <u-icon \r\n                color=\"#ec9b33\" \r\n                size=\"60\" \r\n                name=\"plus-circle\"\r\n              />\r\n            </view>            \r\n          </view>\r\n        </view>\r\n      </view>\r\n    </u-popup>\n  </view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttype: '',\r\n        searchHistory: [],\r\n        keyword: '',\r\n        rows: 20,\r\n        page: 1,\r\n        allLoaded: false,\r\n        list: [],\r\n        loadMoreStatus: 'loadmore',\r\n        showPopup: false,\r\n        // 选中的菜品\r\n        caipId: '',\r\n        foodImg: '',\r\n        foodName: '',\r\n        foodUnit: '',\r\n        foodNum: 100,\r\n        heatQuantity: 0,\r\n        // 增减按钮\r\n        startTime1: '',\r\n        startTime2: '',\r\n        endTime1: '',\r\n        endTime2: '',\r\n        minusInterval: null,\r\n        addInterval: null\r\n\t\t\t};\n\t\t},\r\n    computed: {\r\n      sessionId(){\r\n        return this.$store.state.app.sessionId\r\n      },\r\n      memberId(){\r\n        return this.$store.state.member.memberId\r\n      }\r\n    },\r\n    onLoad(e) {\r\n      if (e) {\r\n        this.type = e.type\r\n        this.date = e.date\r\n      }\r\n    },\r\n    onShow() {\r\n      this.getHistory()\r\n    },\r\n    onHide() {\r\n      clearInterval(this.minusInterval)\r\n      clearInterval(this.addInterval)\r\n    },\r\n    onUnload() {\r\n      clearInterval(this.minusInterval)\r\n      clearInterval(this.addInterval)\r\n    },\r\n    onReachBottom() {\r\n      if (!this.allLoaded) {\r\n        console.log('allLoaded值为：'+this.allLoaded)\r\n        this.loadMoreStatus = 'loading'\r\n        this.page++\r\n        this.searchFood('@cxx@')\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    methods: {\r\n      getHistory () {\r\n        const data = {\r\n          sessionId: this.sessionId\r\n        }\r\n        this.$http.get('/mobile/bite/getFoodHistory', data)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              this.searchHistory = res.data.obj\r\n            }\r\n          })\r\n      },\r\n      search (e) {\r\n        this.keyword = e\r\n        this.page = 1\r\n        this.searchFood()\r\n      },\r\n      searchFood (name) {\r\n        console.log(name)\r\n        if (name !== '@cxx@') { //由搜索来的\r\n          this.page = 1\r\n        }\r\n        const data = {\r\n          name: this.keyword,\r\n          sessionId: this.sessionId,\r\n          page: this.page,\r\n          rows: this.rows\r\n        }\r\n        this.$http.get('/mobile/bite/getFoodName', data)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              const rows = res.data.rows\r\n              rows.forEach(r => {\r\n\t\t\t\t\t\t\t\t// const per1g = Math.round(res.heatQuantity/100)\n\t\t\t\t\t\t\t\t// this.$set(r,'per',per1g)\n\t\t\t\t\t\t\t\tif ([3, 6, 7].includes(r.foodUnitType)) {\n\t\t\t\t\t\t\t\t\tthis.$set(r,'foodUnit','ml')\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.$set(r,'foodUnit','g')\n\t\t\t\t\t\t\t\t}                \r\n              })\r\n              const pager = res.data.pager\r\n              this.allLoaded = pager.currentPage === pager.totalPages\r\n              this.loadMoreStatus = this.allLoaded?'nomore':'loading'  \r\n              this.list = name === '@cxx@' ? this.list.concat(rows) : rows\r\n              let valid = true \r\n              this.searchHistory.forEach(rs => {\r\n                if (rs.foodName === this.keyword) {\r\n                  valid = false\r\n                }\r\n              })\r\n              // 仅第一页加载 且 不与历史重复时\r\n              if (this.page === 1 && valid) {\r\n                this.addHistory()\r\n              }\r\n            }\r\n          })\r\n      },\r\n      addHistory () {\r\n        const data = {\r\n          name: this.keyword,\r\n          sessionId: this.sessionId\r\n        }\r\n        this.$http.post('/mobile/bite/addFoodHistory', data)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              this.getHistory()\r\n            }\r\n          })\r\n      },\r\n      toDetail (e) {\r\n        const caipId = e.caipId\r\n        const foodNum = e.foodNum\r\n        const foodUnit = e.foodUnit\r\n        const biteTime = this.date\r\n        const foodType = this.type\r\n        uni.navigateTo({\r\n          url: `./foodDetails?caipId=${caipId}&foodUnit=${foodUnit}&biteTime=${biteTime}&foodType=${foodType}`\r\n        })\r\n      },\r\n      addBite (e) {\r\n        console.log(e)\r\n        for (const x in e) {\r\n          this[x] = e[x]\r\n        }\r\n        this.showPopup = true\r\n      },\r\n\t\t\tminusStart(e){\n\t\t\t\tconsole.log(e)\n\t\t\t\tthis.endTime1 = ''\n\t\t\t\tthis.startTime1 = e.timeStamp\n\t\t\t\tclearInterval(this.minusInterval)\n\t\t\t\tthis.minusInterval = null//重置定时器\n\t\t\t\t// e.preventDefault()\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tconsole.log(this.startTime1)\n\t\t\t\t\tif(this.endTime1){\n\t\t\t\t\t\tclearInterval(this.minusInterval)\n\t\t\t\t\t\tconsole.log('short')\n\t\t\t\t\t\tconsole.log(this.foodNum)\n\t\t\t\t\t\tif(this.foodNum>1){\n\t\t\t\t\t\t\tconsole.log('fit')\n\t\t\t\t\t\t\tthis.foodNum--\n\t\t\t\t\t\t}                    \n\t\t\t\t\t}else{\n\t\t\t\t\t\tclearInterval(this.minusInterval)\n\t\t\t\t\t\tthis.minusInterval = setInterval(()=>{\n\t\t\t\t\t\t\tif(this.foodNum>1){\n\t\t\t\t\t\t\t\tconsole.log('fit')\n\t\t\t\t\t\t\t\tthis.foodNum--\n\t\t\t\t\t\t\t}                        \n\t\t\t\t\t\t},50)\n\t\t\t\t\t}\n\t\t\t\t},300)\n\t\t\t},\n\t\t\taddStart(e){\n\t\t\t\tconsole.log(e)\n\t\t\t\tthis.endTime2 = ''\n\t\t\t\tthis.startTime2 = e.timeStamp\n\t\t\t\tclearInterval(this.addInterval)\n\t\t\t\tthis.addInterval = null//重置定时器\n\t\t\t\t// e.preventDefault()\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tif(this.endTime2){\n\t\t\t\t\t\tclearInterval(this.addInterval)\n\t\t\t\t\t\tconsole.log('short')\n\t\t\t\t\t\tconsole.log(this.foodNum)\n\t\t\t\t\t\tif(this.foodNum<999){\n\t\t\t\t\t\t\tconsole.log('fit')\n\t\t\t\t\t\t\tthis.foodNum++\n\t\t\t\t\t\t}                    \n\t\t\t\t\t}else{\n\t\t\t\t\t\tclearInterval(this.addInterval)\n\t\t\t\t\t\tthis.addInterval = setInterval(()=>{\n\t\t\t\t\t\t\tif(this.foodNum<999){\n\t\t\t\t\t\t\t\tconsole.log('fit')\n\t\t\t\t\t\t\t\tthis.foodNum++\n\t\t\t\t\t\t\t}                        \n\t\t\t\t\t\t},50)\n\t\t\t\t\t}\n\t\t\t\t},300)\n\t\t\t},\n\t\t\tminusEnd(e){\r\n        console.log('minusEnd')\n\t\t\t\tclearInterval(this.minusInterval)\n\t\t\t\tthis.endTime1 = e.timeStamp\n\t\t\t},\n\t\t\taddEnd(e){\r\n        console.log('addEnd')\n\t\t\t\tclearInterval(this.addInterval)\n\t\t\t\tthis.endTime2 = e.timeStamp\n\t\t\t},\n\t\t\ttouchMove(e){\r\n        console.log('moved')\n\t\t\t\tclearInterval(this.minusInterval)\n\t\t\t\tclearInterval(this.addInterval)\t\t\t\t\n\t\t\t},\r\n      addCertain () {\r\n        const data = {\r\n          sessionId: this.sessionId,\r\n          memberId: this.memberId,\r\n          biteTime: this.date,\r\n          foodType: this.type,\r\n          foodName: this.foodName,\r\n          foodImg: this.foodImg,\r\n          foodNum: this.foodNum,\r\n          foodUnit: this.foodUnit,\r\n          caipId: this.caipId,\r\n          heatQuantity: this.heatQuantity\r\n        }\r\n        this.$http.post('/mobile/bite/addNewBite', data)\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              this.$u.toast(res.data.msg)\r\n              uni.navigateBack()\r\n            }\r\n          })\r\n      }\r\n    }\n\t}\n</script>\n\n<style lang=\"scss\">\n\n</style>\n"],"sourceRoot":""}