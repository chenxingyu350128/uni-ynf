{"version":3,"sources":["uni-app:///js_sdk/Sansnn-uQRCode/uqrcode.js","uni-app:///js_sdk/u-charts/u-charts/u-charts.js"],"names":["uQRCode","QR8bitByte","data","mode","QRMode","MODE_8BIT_BYTE","prototype","getLength","buffer","length","write","i","put","charCodeAt","QRCode","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","Array","addData","newData","push","isDark","row","col","Error","getModuleCount","make","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","totalDataCount","dataCount","QRUtil","getLengthInBits","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","cs","y","x","dark","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","j","bits","getBCHTypeNumber","mod","Math","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","mask","getMask","PAD0","PAD1","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","modPoly","modIndex","get","totalCodeCount","index","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","a","multiply","QRMath","gexp","type","qrCode","sameCount","count","darkCount","ratio","abs","glog","n","LOG_TABLE","EXP_TABLE","num","shift","undefined","e","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","utf16To8","text","result","charAt","String","fromCharCode","defaults","size","margin","backgroundColor","foregroundColor","fileType","correctLevel","options","defaultOptions","canvasId","componentInstance","console","error","createCanvas","qrcode","ctx","uni","createCanvasContext","setFillStyle","fillRect","tileW","tileH","style","round","w","ceil","h","setTimeout","draw","canvasToTempFilePath","width","height","destWidth","destHeight","success","res","tempFilePath","fail","complete","config","yAxisWidth","yAxisSplit","xAxisHeight","xAxisLineHeight","legendHeight","yAxisTitleWidth","padding","pixelRatio","rotate","columePadding","fontSize","dataPointShape","colors","pieChartLinePadding","pieChartTextPadding","xAxisTextPadding","titleColor","titleFontSize","subtitleColor","subtitleFontSize","toolTipPadding","toolTipBackground","toolTipOpacity","toolTipLineHeight","radarLabelTextMargin","gaugeLabelTextMargin","assign","target","varArgs","TypeError","deepAssign","obj1","obj2","key","toString","forEach","val","util","toFixed","limit","isFloat","approximatelyEqual","num1","num2","isSameSign","isSameXCoordinateArea","p1","p2","isCollision","end","start","flag","getH5Offset","mp","changedTouches","offsetX","offsetY","hexToRgb","hexValue","opc","rgx","hex","replace","m","g","b","rgb","exec","parseInt","findRange","isNaN","multiple","calCandleMA","dayArr","nameArr","colorArr","kdata","seriesTemp","k","seriesItem","name","color","len","sum","calValidDistance","self","distance","chartData","opts","dataChartAreaWidth","area","dataChartWidth","eachSpacing","xAxisData","xAxisPoints","validDistance","event","trigger","isInAngleRange","angle","startAngle","endAngle","adjust","PI","calRotateTranslate","xv","yv","transX","sqrt","transY","createCurveControlPoints","points","isNotMiddlePoint","min","isNotMiddlePointX","pAx","pAy","pBx","pBy","last","ctrA","ctrB","convertCoordinateOrigin","center","avoidCollision","obj","fillSeries","series","map","item","show","pointShape","legendShape","getDataRange","minData","maxData","range","minRange","maxRange","measureText","arguments","split","dataCombine","reduce","concat","dataCombineStack","getTouches","touches","clientX","pageY","currentTarget","offsetTop","getSeriesDataItem","disableLegend","format","getMaxTextListLength","lengthList","apply","getRadarCoordinateSeries","eachAngle","CoordinateSeries","getToolTipData","seriesData","calPoints","categories","option","textList","titleText","validCalPoints","getMixToolTipData","filter","getCandleToolTipData","extra","upColor","upFill","downColor","downFill","text0","text1","text2","text3","text4","filterSeries","tempSeries","findCurrentIndex","currentPoints","currentIndex","spacing","xAxis","boundaryGap","isInExactChartArea","findLegendIndex","legendData","isInExactLegendArea","findRadarChartCurrentIndex","radarData","eachAngleArea","isInExactPieChartArea","radius","fixAngle","atan2","angleList","rangeStart","rangeEnd","findFunnelChartCurrentIndex","funnelData","funnelArea","findWordChartCurrentIndex","wordData","findMapChartCurrentIndex","cData","tmp","pointToCoordinate","bounds","scale","xoffset","yoffset","poi","geometry","coordinates","isPoiWithinPoly","findPieChartCurrentIndex","pieData","_start_","_proportion_","pow","splitPoints","newPoints","items","calLegendData","wholeWidth","wholeHeight","widthArr","heightArr","legend","shapeWidth","shapeRight","lineHeight","position","legendList","widthCount","widthCountArr","currentRow","itemWidth","itemGap","legendWidth","float","maxHeight","maxLength","lineNum","temp","slice","maxWidth","calCategoriesData","categoriesTextLenth","maxTextLength","rotateLabel","sin","getXAxisTextList","sorted","constructor","indexOf","value","subitem","rangeSpan","eachRange","splitNumber","calXAxisData","ranges","rangesFormat","xAxisScaleValues","Number","Object","getXAxisPoints","textLength","disabled","getRadarDataPoints","process","radarOption","radar","each","listItem","proportion","cos","getPieDataPoints","_radius_","getFunnelDataPoints","sort","reverse","getRoseDataPoints","minRadius","dataArr","radiusLength","_rose_proportion_","getArcbarDataPoints","arcbarOption","totalAngle","getGaugeAxisPoints","tempStartAngle","_startAngle_","_endAngle_","getGaugeDataPoints","gaugeOption","pointer","_oldAngle_","oldAngle","oldData","getPieTextMaxLength","fixColumeData","columnLen","column","fixColumeMeterData","border","fixColumeStackData","indexn","spacingValid","enableScroll","itemCount","startX","endX","getCandleDataPoints","validHeight","cPoints","indexs","point","getDataPoints","validWidth","xranges","xminRange","xmaxRange","pop","getStackDataPoints","seriesIndex","stackSeries","value0","height0","heightc","y0","getYAxisTextList","stack","yAxis","dataRange","calYAxisData","columnstyle","YLength","newSeries","rangesArr","rangesFormatArr","yAxisWidthArr","yData","yAxisFontSizes","calibration","yAxisFontSize","calTooltipYAxisData","yAxisData","minAxis","maxVal","minVal","calMarkLineData","yAxisIndex","contextRotate","context","rotateLock","translate","_rotate_","drawPointShape","shape","beginPath","dataPointShapeType","setStrokeStyle","background","setLineWidth","arc","rect","closePath","fill","stroke","drawRingTitle","titlefontSize","title","subtitlefontSize","subtitle","titleFontColor","subtitleFontColor","titleHeight","subtitleHeight","textWidth","startY","setFontSize","fillText","_textWidth","_startX","_startY","drawPointText","textSize","textColor","formatVal","drawGaugeLabel","centerPosition","splitAngle","splitLine","totalNumber","endNumber","startNumber","nowAngle","nowNumber","labelText","labelFormat","labelColor","drawRadarLabel","posRelativeCanvas","drawPieText","lineRadius","textObjectCollection","lastTextObject","seriesConvert","orginX1","orginY1","orginX2","orginY2","orginX3","orginY3","textObject","lineStart","lineEnd","lineStartPoistion","lineEndPoistion","textPosition","curveStartX","textStartX","quadraticCurveTo","drawToolTipSplitLine","toolTipOption","tooltip","gridType","dashLength","endY","setLineDash","gridColor","xAxisLabel","textX","textY","labelBgColor","labelBgOpacity","labelFontColor","fontColor","drawMarkLine","markLineOption","markLine","lineColor","showLabel","bgStartX","bgEndX","bgWidth","drawToolTipHorizentalLine","yAxisLabel","tStartLeft","tStartRight","drawToolTipSplitArea","activeBgColor","activeBgOpacity","drawToolTip","showBox","bgColor","bgOpacity","legendMarginRight","arrowWidth","isOverRightBorder","toolTipWidth","toolTipHeight","_scrollDistance_","drawYAxisTitle","save","restore","drawColumnDataPoints","columnOption","meter","fillColor","leftNum","rightNum","eachSeries","tooltipPoints","dataLabel","drawCandleDataPoints","seriesMA","candleOption","average","candle","upLine","downLine","day","leftSpace","rightSpace","splitPointList","startPoint","ctrlPoint","bezierCurveTo","drawAreaDataPoints","areaOption","opacity","addLine","gradient","createLinearGradient","addColorStop","firstPoint","lastPoint","lineType","drawLineDataPoints","lineOption","line","drawMixDataPoints","columnIndex","columnLength","addPoint","drawToolTipBridge","horizentalLine","drawXAxis","scrollShow","scrollY","scrollScreenWidth","scrollTotalWidth","scrollWidth","scrollLeft","setLineCap","scrollBackgroundColor","scrollColor","disableGrid","gridEval","maxXAxisListLength","labelCount","newCategories","cgLength","xAxisFontSize","_xAxisTextAngle_","scrollHeight","_calRotateTranslate","axisLine","axisLineColor","drawYAxisGrid","xAxiseachSpacing","TotalWidth","drawYAxis","fillEndY","showTitle","drawLegend","legendArea","borderWidth","borderColor","itemList","listIndex","hiddenColor","fontTrans","drawPieDataPoints","pieOption","activeOpacity","activeRadius","offsetAngle","labelWidth","ringWidth","pie","_pieTextMaxLength_","lineJoin","innerPieWidth","valid","drawRoseDataPoints","roseOption","rose","drawArcbarDataPoints","gap","arcbar","drawGaugeDataPoints","fixRadius","childNumber","childWidth","gauge","innerRadius","pieRadius","childAngle","proc","pointerRadius","gradient3","eachCategories","childendX","drawRadarDataPoints","gridCount","coordinateAngle","_loop","startPos","radarDataPoints","normalInt","iter","arr","random","collisionNew","isIn","getBoundingBox","coords","xMin","xMax","yMin","yMax","coorda","longitude","latitude","coordinateToPoint","pointY","pointX","isRayIntersectsSegment","s_poi","e_poi","xseg","poly","sinsc","epoly","drawMapDataPoints","mapOption","fillOpacity","activeBorderColor","activeFillColor","activeFillOpacity","xScale","yScale","clearRect","centerPoint","properties","centroid","getWordCloudPoint","tHeight","tWidth","breaknum","Spin","isSpin","areav","drawWordCloudDataPoints","wordOption","autoColors","word","wordCloudData","strokeText","drawFunnelDataPoints","funnelOption","activeWidth","labelAlign","funnel","drawFunnelText","drawCanvas","Timing","easeIn","easeOut","easeInOut","linear","Animation","isStop","duration","timing","delay","createAnimationFrame","step","timeStamp","Date","requestAnimationFrame","animationFrame","startTimeStamp","_step","timestamp","onProcess","onAnimationFinish","timingFunction","bind","stop","drawCharts","_this","animation","animationInstance","_series_","_calLegendData","_calYAxisData","maxTitleHeight","rightIndex","leftIndex","_calCategoriesData","categoriesData","scrollAlign","offsetLeft","totalWidth","screenWidth","scrollOption","currentOffset","startTouchX","lastMoveTime","updateData","_drawLineDataPoints","enableMarkLine","_drawMixDataPoints","_drawColumnDataPoints","_drawAreaDataPoints","arcbarData","gaugeData","_drawCandleDataPoints","Event","events","addEventListener","listener","_len","args","_key","params","Charts","config$$1","JSON","parse","stringify","tempWidth","tempHeight","$this","call","scrollPosition","_getXAxisPoints0","zoom","log","centerLeft","MaxLeft","stopAnimation","getCurrentDataIndex","_touches$","getLegendDataIndex","touchLegend","showToolTip","_getToolTipData","_getMixToolTipData","scrollStart","scroll","now","Limit","touchMoveLimit","currMoveTime","_distance","scrollEnd","_scrollOption","module","exports"],"mappings":"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","file":"pages/family/common/vendor.js","sourcesContent":["//---------------------------------------------------------------------\r\n// github https://github.com/Sansnn/uQRCode\r\n//---------------------------------------------------------------------\r\n\r\nlet uQRCode = {};\r\n\r\n(function() {\r\n\t//---------------------------------------------------------------------\r\n\t// QRCode for JavaScript\r\n\t//\r\n\t// Copyright (c) 2009 Kazuhiko Arase\r\n\t//\r\n\t// URL: http://www.d-project.com/\r\n\t//\r\n\t// Licensed under the MIT license:\r\n\t//   http://www.opensource.org/licenses/mit-license.php\r\n\t//\r\n\t// The word \"QR Code\" is registered trademark of \r\n\t// DENSO WAVE INCORPORATED\r\n\t//   http://www.denso-wave.com/qrcode/faqpatent-e.html\r\n\t//\r\n\t//---------------------------------------------------------------------\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QR8bitByte\r\n\t//---------------------------------------------------------------------\r\n\r\n\tfunction QR8bitByte(data) {\r\n\t\tthis.mode = QRMode.MODE_8BIT_BYTE;\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n\tQR8bitByte.prototype = {\r\n\r\n\t\tgetLength: function(buffer) {\r\n\t\t\treturn this.data.length;\r\n\t\t},\r\n\r\n\t\twrite: function(buffer) {\r\n\t\t\tfor (var i = 0; i < this.data.length; i++) {\r\n\t\t\t\t// not JIS ...\r\n\t\t\t\tbuffer.put(this.data.charCodeAt(i), 8);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRCode\r\n\t//---------------------------------------------------------------------\r\n\r\n\tfunction QRCode(typeNumber, errorCorrectLevel) {\r\n\t\tthis.typeNumber = typeNumber;\r\n\t\tthis.errorCorrectLevel = errorCorrectLevel;\r\n\t\tthis.modules = null;\r\n\t\tthis.moduleCount = 0;\r\n\t\tthis.dataCache = null;\r\n\t\tthis.dataList = new Array();\r\n\t}\r\n\r\n\tQRCode.prototype = {\r\n\r\n\t\taddData: function(data) {\r\n\t\t\tvar newData = new QR8bitByte(data);\r\n\t\t\tthis.dataList.push(newData);\r\n\t\t\tthis.dataCache = null;\r\n\t\t},\r\n\r\n\t\tisDark: function(row, col) {\r\n\t\t\tif (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\r\n\t\t\t\tthrow new Error(row + \",\" + col);\r\n\t\t\t}\r\n\t\t\treturn this.modules[row][col];\r\n\t\t},\r\n\r\n\t\tgetModuleCount: function() {\r\n\t\t\treturn this.moduleCount;\r\n\t\t},\r\n\r\n\t\tmake: function() {\r\n\t\t\t// Calculate automatically typeNumber if provided is < 1\r\n\t\t\tif (this.typeNumber < 1) {\r\n\t\t\t\tvar typeNumber = 1;\r\n\t\t\t\tfor (typeNumber = 1; typeNumber < 40; typeNumber++) {\r\n\t\t\t\t\tvar rsBlocks = QRRSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\r\n\r\n\t\t\t\t\tvar buffer = new QRBitBuffer();\r\n\t\t\t\t\tvar totalDataCount = 0;\r\n\t\t\t\t\tfor (var i = 0; i < rsBlocks.length; i++) {\r\n\t\t\t\t\t\ttotalDataCount += rsBlocks[i].dataCount;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var i = 0; i < this.dataList.length; i++) {\r\n\t\t\t\t\t\tvar data = this.dataList[i];\r\n\t\t\t\t\t\tbuffer.put(data.mode, 4);\r\n\t\t\t\t\t\tbuffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\r\n\t\t\t\t\t\tdata.write(buffer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (buffer.getLengthInBits() <= totalDataCount * 8)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.typeNumber = typeNumber;\r\n\t\t\t}\r\n\t\t\tthis.makeImpl(false, this.getBestMaskPattern());\r\n\t\t},\r\n\r\n\t\tmakeImpl: function(test, maskPattern) {\r\n\r\n\t\t\tthis.moduleCount = this.typeNumber * 4 + 17;\r\n\t\t\tthis.modules = new Array(this.moduleCount);\r\n\r\n\t\t\tfor (var row = 0; row < this.moduleCount; row++) {\r\n\r\n\t\t\t\tthis.modules[row] = new Array(this.moduleCount);\r\n\r\n\t\t\t\tfor (var col = 0; col < this.moduleCount; col++) {\r\n\t\t\t\t\tthis.modules[row][col] = null; //(col + row) % 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setupPositionProbePattern(0, 0);\r\n\t\t\tthis.setupPositionProbePattern(this.moduleCount - 7, 0);\r\n\t\t\tthis.setupPositionProbePattern(0, this.moduleCount - 7);\r\n\t\t\tthis.setupPositionAdjustPattern();\r\n\t\t\tthis.setupTimingPattern();\r\n\t\t\tthis.setupTypeInfo(test, maskPattern);\r\n\r\n\t\t\tif (this.typeNumber >= 7) {\r\n\t\t\t\tthis.setupTypeNumber(test);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.dataCache == null) {\r\n\t\t\t\tthis.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\r\n\t\t\t}\r\n\r\n\t\t\tthis.mapData(this.dataCache, maskPattern);\r\n\t\t},\r\n\r\n\t\tsetupPositionProbePattern: function(row, col) {\r\n\r\n\t\t\tfor (var r = -1; r <= 7; r++) {\r\n\r\n\t\t\t\tif (row + r <= -1 || this.moduleCount <= row + r) continue;\r\n\r\n\t\t\t\tfor (var c = -1; c <= 7; c++) {\r\n\r\n\t\t\t\t\tif (col + c <= -1 || this.moduleCount <= col + c) continue;\r\n\r\n\t\t\t\t\tif ((0 <= r && r <= 6 && (c == 0 || c == 6)) ||\r\n\t\t\t\t\t\t(0 <= c && c <= 6 && (r == 0 || r == 6)) ||\r\n\t\t\t\t\t\t(2 <= r && r <= 4 && 2 <= c && c <= 4)) {\r\n\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetBestMaskPattern: function() {\r\n\r\n\t\t\tvar minLostPoint = 0;\r\n\t\t\tvar pattern = 0;\r\n\r\n\t\t\tfor (var i = 0; i < 8; i++) {\r\n\r\n\t\t\t\tthis.makeImpl(true, i);\r\n\r\n\t\t\t\tvar lostPoint = QRUtil.getLostPoint(this);\r\n\r\n\t\t\t\tif (i == 0 || minLostPoint > lostPoint) {\r\n\t\t\t\t\tminLostPoint = lostPoint;\r\n\t\t\t\t\tpattern = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn pattern;\r\n\t\t},\r\n\r\n\t\tcreateMovieClip: function(target_mc, instance_name, depth) {\r\n\r\n\t\t\tvar qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\r\n\t\t\tvar cs = 1;\r\n\r\n\t\t\tthis.make();\r\n\r\n\t\t\tfor (var row = 0; row < this.modules.length; row++) {\r\n\r\n\t\t\t\tvar y = row * cs;\r\n\r\n\t\t\t\tfor (var col = 0; col < this.modules[row].length; col++) {\r\n\r\n\t\t\t\t\tvar x = col * cs;\r\n\t\t\t\t\tvar dark = this.modules[row][col];\r\n\r\n\t\t\t\t\tif (dark) {\r\n\t\t\t\t\t\tqr_mc.beginFill(0, 100);\r\n\t\t\t\t\t\tqr_mc.moveTo(x, y);\r\n\t\t\t\t\t\tqr_mc.lineTo(x + cs, y);\r\n\t\t\t\t\t\tqr_mc.lineTo(x + cs, y + cs);\r\n\t\t\t\t\t\tqr_mc.lineTo(x, y + cs);\r\n\t\t\t\t\t\tqr_mc.endFill();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn qr_mc;\r\n\t\t},\r\n\r\n\t\tsetupTimingPattern: function() {\r\n\r\n\t\t\tfor (var r = 8; r < this.moduleCount - 8; r++) {\r\n\t\t\t\tif (this.modules[r][6] != null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tthis.modules[r][6] = (r % 2 == 0);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var c = 8; c < this.moduleCount - 8; c++) {\r\n\t\t\t\tif (this.modules[6][c] != null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tthis.modules[6][c] = (c % 2 == 0);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetupPositionAdjustPattern: function() {\r\n\r\n\t\t\tvar pos = QRUtil.getPatternPosition(this.typeNumber);\r\n\r\n\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\r\n\t\t\t\tfor (var j = 0; j < pos.length; j++) {\r\n\r\n\t\t\t\t\tvar row = pos[i];\r\n\t\t\t\t\tvar col = pos[j];\r\n\r\n\t\t\t\t\tif (this.modules[row][col] != null) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (var r = -2; r <= 2; r++) {\r\n\r\n\t\t\t\t\t\tfor (var c = -2; c <= 2; c++) {\r\n\r\n\t\t\t\t\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2 ||\r\n\t\t\t\t\t\t\t\t(r == 0 && c == 0)) {\r\n\t\t\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetupTypeNumber: function(test) {\r\n\r\n\t\t\tvar bits = QRUtil.getBCHTypeNumber(this.typeNumber);\r\n\r\n\t\t\tfor (var i = 0; i < 18; i++) {\r\n\t\t\t\tvar mod = (!test && ((bits >> i) & 1) == 1);\r\n\t\t\t\tthis.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < 18; i++) {\r\n\t\t\t\tvar mod = (!test && ((bits >> i) & 1) == 1);\r\n\t\t\t\tthis.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetupTypeInfo: function(test, maskPattern) {\r\n\r\n\t\t\tvar data = (this.errorCorrectLevel << 3) | maskPattern;\r\n\t\t\tvar bits = QRUtil.getBCHTypeInfo(data);\r\n\r\n\t\t\t// vertical\t\t\r\n\t\t\tfor (var i = 0; i < 15; i++) {\r\n\r\n\t\t\t\tvar mod = (!test && ((bits >> i) & 1) == 1);\r\n\r\n\t\t\t\tif (i < 6) {\r\n\t\t\t\t\tthis.modules[i][8] = mod;\r\n\t\t\t\t} else if (i < 8) {\r\n\t\t\t\t\tthis.modules[i + 1][8] = mod;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.modules[this.moduleCount - 15 + i][8] = mod;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// horizontal\r\n\t\t\tfor (var i = 0; i < 15; i++) {\r\n\r\n\t\t\t\tvar mod = (!test && ((bits >> i) & 1) == 1);\r\n\r\n\t\t\t\tif (i < 8) {\r\n\t\t\t\t\tthis.modules[8][this.moduleCount - i - 1] = mod;\r\n\t\t\t\t} else if (i < 9) {\r\n\t\t\t\t\tthis.modules[8][15 - i - 1 + 1] = mod;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.modules[8][15 - i - 1] = mod;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// fixed module\r\n\t\t\tthis.modules[this.moduleCount - 8][8] = (!test);\r\n\r\n\t\t},\r\n\r\n\t\tmapData: function(data, maskPattern) {\r\n\r\n\t\t\tvar inc = -1;\r\n\t\t\tvar row = this.moduleCount - 1;\r\n\t\t\tvar bitIndex = 7;\r\n\t\t\tvar byteIndex = 0;\r\n\r\n\t\t\tfor (var col = this.moduleCount - 1; col > 0; col -= 2) {\r\n\r\n\t\t\t\tif (col == 6) col--;\r\n\r\n\t\t\t\twhile (true) {\r\n\r\n\t\t\t\t\tfor (var c = 0; c < 2; c++) {\r\n\r\n\t\t\t\t\t\tif (this.modules[row][col - c] == null) {\r\n\r\n\t\t\t\t\t\t\tvar dark = false;\r\n\r\n\t\t\t\t\t\t\tif (byteIndex < data.length) {\r\n\t\t\t\t\t\t\t\tdark = (((data[byteIndex] >>> bitIndex) & 1) == 1);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar mask = QRUtil.getMask(maskPattern, row, col - c);\r\n\r\n\t\t\t\t\t\t\tif (mask) {\r\n\t\t\t\t\t\t\t\tdark = !dark;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.modules[row][col - c] = dark;\r\n\t\t\t\t\t\t\tbitIndex--;\r\n\r\n\t\t\t\t\t\t\tif (bitIndex == -1) {\r\n\t\t\t\t\t\t\t\tbyteIndex++;\r\n\t\t\t\t\t\t\t\tbitIndex = 7;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trow += inc;\r\n\r\n\t\t\t\t\tif (row < 0 || this.moduleCount <= row) {\r\n\t\t\t\t\t\trow -= inc;\r\n\t\t\t\t\t\tinc = -inc;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tQRCode.PAD0 = 0xEC;\r\n\tQRCode.PAD1 = 0x11;\r\n\r\n\tQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\r\n\r\n\t\tvar rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\r\n\r\n\t\tvar buffer = new QRBitBuffer();\r\n\r\n\t\tfor (var i = 0; i < dataList.length; i++) {\r\n\t\t\tvar data = dataList[i];\r\n\t\t\tbuffer.put(data.mode, 4);\r\n\t\t\tbuffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\r\n\t\t\tdata.write(buffer);\r\n\t\t}\r\n\r\n\t\t// calc num max data.\r\n\t\tvar totalDataCount = 0;\r\n\t\tfor (var i = 0; i < rsBlocks.length; i++) {\r\n\t\t\ttotalDataCount += rsBlocks[i].dataCount;\r\n\t\t}\r\n\r\n\t\tif (buffer.getLengthInBits() > totalDataCount * 8) {\r\n\t\t\tthrow new Error(\"code length overflow. (\" +\r\n\t\t\t\tbuffer.getLengthInBits() +\r\n\t\t\t\t\">\" +\r\n\t\t\t\ttotalDataCount * 8 +\r\n\t\t\t\t\")\");\r\n\t\t}\r\n\r\n\t\t// end code\r\n\t\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\r\n\t\t\tbuffer.put(0, 4);\r\n\t\t}\r\n\r\n\t\t// padding\r\n\t\twhile (buffer.getLengthInBits() % 8 != 0) {\r\n\t\t\tbuffer.putBit(false);\r\n\t\t}\r\n\r\n\t\t// padding\r\n\t\twhile (true) {\r\n\r\n\t\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tbuffer.put(QRCode.PAD0, 8);\r\n\r\n\t\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tbuffer.put(QRCode.PAD1, 8);\r\n\t\t}\r\n\r\n\t\treturn QRCode.createBytes(buffer, rsBlocks);\r\n\t}\r\n\r\n\tQRCode.createBytes = function(buffer, rsBlocks) {\r\n\r\n\t\tvar offset = 0;\r\n\r\n\t\tvar maxDcCount = 0;\r\n\t\tvar maxEcCount = 0;\r\n\r\n\t\tvar dcdata = new Array(rsBlocks.length);\r\n\t\tvar ecdata = new Array(rsBlocks.length);\r\n\r\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\r\n\r\n\t\t\tvar dcCount = rsBlocks[r].dataCount;\r\n\t\t\tvar ecCount = rsBlocks[r].totalCount - dcCount;\r\n\r\n\t\t\tmaxDcCount = Math.max(maxDcCount, dcCount);\r\n\t\t\tmaxEcCount = Math.max(maxEcCount, ecCount);\r\n\r\n\t\t\tdcdata[r] = new Array(dcCount);\r\n\r\n\t\t\tfor (var i = 0; i < dcdata[r].length; i++) {\r\n\t\t\t\tdcdata[r][i] = 0xff & buffer.buffer[i + offset];\r\n\t\t\t}\r\n\t\t\toffset += dcCount;\r\n\r\n\t\t\tvar rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\r\n\t\t\tvar rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\r\n\r\n\t\t\tvar modPoly = rawPoly.mod(rsPoly);\r\n\t\t\tecdata[r] = new Array(rsPoly.getLength() - 1);\r\n\t\t\tfor (var i = 0; i < ecdata[r].length; i++) {\r\n\t\t\t\tvar modIndex = i + modPoly.getLength() - ecdata[r].length;\r\n\t\t\t\tecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar totalCodeCount = 0;\r\n\t\tfor (var i = 0; i < rsBlocks.length; i++) {\r\n\t\t\ttotalCodeCount += rsBlocks[i].totalCount;\r\n\t\t}\r\n\r\n\t\tvar data = new Array(totalCodeCount);\r\n\t\tvar index = 0;\r\n\r\n\t\tfor (var i = 0; i < maxDcCount; i++) {\r\n\t\t\tfor (var r = 0; r < rsBlocks.length; r++) {\r\n\t\t\t\tif (i < dcdata[r].length) {\r\n\t\t\t\t\tdata[index++] = dcdata[r][i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < maxEcCount; i++) {\r\n\t\t\tfor (var r = 0; r < rsBlocks.length; r++) {\r\n\t\t\t\tif (i < ecdata[r].length) {\r\n\t\t\t\t\tdata[index++] = ecdata[r][i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRMode\r\n\t//---------------------------------------------------------------------\r\n\r\n\tvar QRMode = {\r\n\t\tMODE_NUMBER: 1 << 0,\r\n\t\tMODE_ALPHA_NUM: 1 << 1,\r\n\t\tMODE_8BIT_BYTE: 1 << 2,\r\n\t\tMODE_KANJI: 1 << 3\r\n\t};\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRErrorCorrectLevel\r\n\t//---------------------------------------------------------------------\r\n\r\n\tvar QRErrorCorrectLevel = {\r\n\t\tL: 1,\r\n\t\tM: 0,\r\n\t\tQ: 3,\r\n\t\tH: 2\r\n\t};\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRMaskPattern\r\n\t//---------------------------------------------------------------------\r\n\r\n\tvar QRMaskPattern = {\r\n\t\tPATTERN000: 0,\r\n\t\tPATTERN001: 1,\r\n\t\tPATTERN010: 2,\r\n\t\tPATTERN011: 3,\r\n\t\tPATTERN100: 4,\r\n\t\tPATTERN101: 5,\r\n\t\tPATTERN110: 6,\r\n\t\tPATTERN111: 7\r\n\t};\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRUtil\r\n\t//---------------------------------------------------------------------\r\n\r\n\tvar QRUtil = {\r\n\r\n\t\tPATTERN_POSITION_TABLE: [\r\n\t\t\t[],\r\n\t\t\t[6, 18],\r\n\t\t\t[6, 22],\r\n\t\t\t[6, 26],\r\n\t\t\t[6, 30],\r\n\t\t\t[6, 34],\r\n\t\t\t[6, 22, 38],\r\n\t\t\t[6, 24, 42],\r\n\t\t\t[6, 26, 46],\r\n\t\t\t[6, 28, 50],\r\n\t\t\t[6, 30, 54],\r\n\t\t\t[6, 32, 58],\r\n\t\t\t[6, 34, 62],\r\n\t\t\t[6, 26, 46, 66],\r\n\t\t\t[6, 26, 48, 70],\r\n\t\t\t[6, 26, 50, 74],\r\n\t\t\t[6, 30, 54, 78],\r\n\t\t\t[6, 30, 56, 82],\r\n\t\t\t[6, 30, 58, 86],\r\n\t\t\t[6, 34, 62, 90],\r\n\t\t\t[6, 28, 50, 72, 94],\r\n\t\t\t[6, 26, 50, 74, 98],\r\n\t\t\t[6, 30, 54, 78, 102],\r\n\t\t\t[6, 28, 54, 80, 106],\r\n\t\t\t[6, 32, 58, 84, 110],\r\n\t\t\t[6, 30, 58, 86, 114],\r\n\t\t\t[6, 34, 62, 90, 118],\r\n\t\t\t[6, 26, 50, 74, 98, 122],\r\n\t\t\t[6, 30, 54, 78, 102, 126],\r\n\t\t\t[6, 26, 52, 78, 104, 130],\r\n\t\t\t[6, 30, 56, 82, 108, 134],\r\n\t\t\t[6, 34, 60, 86, 112, 138],\r\n\t\t\t[6, 30, 58, 86, 114, 142],\r\n\t\t\t[6, 34, 62, 90, 118, 146],\r\n\t\t\t[6, 30, 54, 78, 102, 126, 150],\r\n\t\t\t[6, 24, 50, 76, 102, 128, 154],\r\n\t\t\t[6, 28, 54, 80, 106, 132, 158],\r\n\t\t\t[6, 32, 58, 84, 110, 136, 162],\r\n\t\t\t[6, 26, 54, 82, 110, 138, 166],\r\n\t\t\t[6, 30, 58, 86, 114, 142, 170]\r\n\t\t],\r\n\r\n\t\tG15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\r\n\t\tG18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\r\n\t\tG15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\r\n\r\n\t\tgetBCHTypeInfo: function(data) {\r\n\t\t\tvar d = data << 10;\r\n\t\t\twhile (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\r\n\t\t\t\td ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)));\r\n\t\t\t}\r\n\t\t\treturn ((data << 10) | d) ^ QRUtil.G15_MASK;\r\n\t\t},\r\n\r\n\t\tgetBCHTypeNumber: function(data) {\r\n\t\t\tvar d = data << 12;\r\n\t\t\twhile (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\r\n\t\t\t\td ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)));\r\n\t\t\t}\r\n\t\t\treturn (data << 12) | d;\r\n\t\t},\r\n\r\n\t\tgetBCHDigit: function(data) {\r\n\r\n\t\t\tvar digit = 0;\r\n\r\n\t\t\twhile (data != 0) {\r\n\t\t\t\tdigit++;\r\n\t\t\t\tdata >>>= 1;\r\n\t\t\t}\r\n\r\n\t\t\treturn digit;\r\n\t\t},\r\n\r\n\t\tgetPatternPosition: function(typeNumber) {\r\n\t\t\treturn QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\r\n\t\t},\r\n\r\n\t\tgetMask: function(maskPattern, i, j) {\r\n\r\n\t\t\tswitch (maskPattern) {\r\n\r\n\t\t\t\tcase QRMaskPattern.PATTERN000:\r\n\t\t\t\t\treturn (i + j) % 2 == 0;\r\n\t\t\t\tcase QRMaskPattern.PATTERN001:\r\n\t\t\t\t\treturn i % 2 == 0;\r\n\t\t\t\tcase QRMaskPattern.PATTERN010:\r\n\t\t\t\t\treturn j % 3 == 0;\r\n\t\t\t\tcase QRMaskPattern.PATTERN011:\r\n\t\t\t\t\treturn (i + j) % 3 == 0;\r\n\t\t\t\tcase QRMaskPattern.PATTERN100:\r\n\t\t\t\t\treturn (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\r\n\t\t\t\tcase QRMaskPattern.PATTERN101:\r\n\t\t\t\t\treturn (i * j) % 2 + (i * j) % 3 == 0;\r\n\t\t\t\tcase QRMaskPattern.PATTERN110:\r\n\t\t\t\t\treturn ((i * j) % 2 + (i * j) % 3) % 2 == 0;\r\n\t\t\t\tcase QRMaskPattern.PATTERN111:\r\n\t\t\t\t\treturn ((i * j) % 3 + (i + j) % 2) % 2 == 0;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error(\"bad maskPattern:\" + maskPattern);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetErrorCorrectPolynomial: function(errorCorrectLength) {\r\n\r\n\t\t\tvar a = new QRPolynomial([1], 0);\r\n\r\n\t\t\tfor (var i = 0; i < errorCorrectLength; i++) {\r\n\t\t\t\ta = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));\r\n\t\t\t}\r\n\r\n\t\t\treturn a;\r\n\t\t},\r\n\r\n\t\tgetLengthInBits: function(mode, type) {\r\n\r\n\t\t\tif (1 <= type && type < 10) {\r\n\r\n\t\t\t\t// 1 - 9\r\n\r\n\t\t\t\tswitch (mode) {\r\n\t\t\t\t\tcase QRMode.MODE_NUMBER:\r\n\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\tcase QRMode.MODE_ALPHA_NUM:\r\n\t\t\t\t\t\treturn 9;\r\n\t\t\t\t\tcase QRMode.MODE_8BIT_BYTE:\r\n\t\t\t\t\t\treturn 8;\r\n\t\t\t\t\tcase QRMode.MODE_KANJI:\r\n\t\t\t\t\t\treturn 8;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthrow new Error(\"mode:\" + mode);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (type < 27) {\r\n\r\n\t\t\t\t// 10 - 26\r\n\r\n\t\t\t\tswitch (mode) {\r\n\t\t\t\t\tcase QRMode.MODE_NUMBER:\r\n\t\t\t\t\t\treturn 12;\r\n\t\t\t\t\tcase QRMode.MODE_ALPHA_NUM:\r\n\t\t\t\t\t\treturn 11;\r\n\t\t\t\t\tcase QRMode.MODE_8BIT_BYTE:\r\n\t\t\t\t\t\treturn 16;\r\n\t\t\t\t\tcase QRMode.MODE_KANJI:\r\n\t\t\t\t\t\treturn 10;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthrow new Error(\"mode:\" + mode);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (type < 41) {\r\n\r\n\t\t\t\t// 27 - 40\r\n\r\n\t\t\t\tswitch (mode) {\r\n\t\t\t\t\tcase QRMode.MODE_NUMBER:\r\n\t\t\t\t\t\treturn 14;\r\n\t\t\t\t\tcase QRMode.MODE_ALPHA_NUM:\r\n\t\t\t\t\t\treturn 13;\r\n\t\t\t\t\tcase QRMode.MODE_8BIT_BYTE:\r\n\t\t\t\t\t\treturn 16;\r\n\t\t\t\t\tcase QRMode.MODE_KANJI:\r\n\t\t\t\t\t\treturn 12;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthrow new Error(\"mode:\" + mode);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"type:\" + type);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetLostPoint: function(qrCode) {\r\n\r\n\t\t\tvar moduleCount = qrCode.getModuleCount();\r\n\r\n\t\t\tvar lostPoint = 0;\r\n\r\n\t\t\t// LEVEL1\r\n\r\n\t\t\tfor (var row = 0; row < moduleCount; row++) {\r\n\r\n\t\t\t\tfor (var col = 0; col < moduleCount; col++) {\r\n\r\n\t\t\t\t\tvar sameCount = 0;\r\n\t\t\t\t\tvar dark = qrCode.isDark(row, col);\r\n\r\n\t\t\t\t\tfor (var r = -1; r <= 1; r++) {\r\n\r\n\t\t\t\t\t\tif (row + r < 0 || moduleCount <= row + r) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var c = -1; c <= 1; c++) {\r\n\r\n\t\t\t\t\t\t\tif (col + c < 0 || moduleCount <= col + c) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (r == 0 && c == 0) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (dark == qrCode.isDark(row + r, col + c)) {\r\n\t\t\t\t\t\t\t\tsameCount++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (sameCount > 5) {\r\n\t\t\t\t\t\tlostPoint += (3 + sameCount - 5);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// LEVEL2\r\n\r\n\t\t\tfor (var row = 0; row < moduleCount - 1; row++) {\r\n\t\t\t\tfor (var col = 0; col < moduleCount - 1; col++) {\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\tif (qrCode.isDark(row, col)) count++;\r\n\t\t\t\t\tif (qrCode.isDark(row + 1, col)) count++;\r\n\t\t\t\t\tif (qrCode.isDark(row, col + 1)) count++;\r\n\t\t\t\t\tif (qrCode.isDark(row + 1, col + 1)) count++;\r\n\t\t\t\t\tif (count == 0 || count == 4) {\r\n\t\t\t\t\t\tlostPoint += 3;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// LEVEL3\r\n\r\n\t\t\tfor (var row = 0; row < moduleCount; row++) {\r\n\t\t\t\tfor (var col = 0; col < moduleCount - 6; col++) {\r\n\t\t\t\t\tif (qrCode.isDark(row, col) &&\r\n\t\t\t\t\t\t!qrCode.isDark(row, col + 1) &&\r\n\t\t\t\t\t\tqrCode.isDark(row, col + 2) &&\r\n\t\t\t\t\t\tqrCode.isDark(row, col + 3) &&\r\n\t\t\t\t\t\tqrCode.isDark(row, col + 4) &&\r\n\t\t\t\t\t\t!qrCode.isDark(row, col + 5) &&\r\n\t\t\t\t\t\tqrCode.isDark(row, col + 6)) {\r\n\t\t\t\t\t\tlostPoint += 40;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var col = 0; col < moduleCount; col++) {\r\n\t\t\t\tfor (var row = 0; row < moduleCount - 6; row++) {\r\n\t\t\t\t\tif (qrCode.isDark(row, col) &&\r\n\t\t\t\t\t\t!qrCode.isDark(row + 1, col) &&\r\n\t\t\t\t\t\tqrCode.isDark(row + 2, col) &&\r\n\t\t\t\t\t\tqrCode.isDark(row + 3, col) &&\r\n\t\t\t\t\t\tqrCode.isDark(row + 4, col) &&\r\n\t\t\t\t\t\t!qrCode.isDark(row + 5, col) &&\r\n\t\t\t\t\t\tqrCode.isDark(row + 6, col)) {\r\n\t\t\t\t\t\tlostPoint += 40;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// LEVEL4\r\n\r\n\t\t\tvar darkCount = 0;\r\n\r\n\t\t\tfor (var col = 0; col < moduleCount; col++) {\r\n\t\t\t\tfor (var row = 0; row < moduleCount; row++) {\r\n\t\t\t\t\tif (qrCode.isDark(row, col)) {\r\n\t\t\t\t\t\tdarkCount++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\r\n\t\t\tlostPoint += ratio * 10;\r\n\r\n\t\t\treturn lostPoint;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRMath\r\n\t//---------------------------------------------------------------------\r\n\r\n\tvar QRMath = {\r\n\r\n\t\tglog: function(n) {\r\n\r\n\t\t\tif (n < 1) {\r\n\t\t\t\tthrow new Error(\"glog(\" + n + \")\");\r\n\t\t\t}\r\n\r\n\t\t\treturn QRMath.LOG_TABLE[n];\r\n\t\t},\r\n\r\n\t\tgexp: function(n) {\r\n\r\n\t\t\twhile (n < 0) {\r\n\t\t\t\tn += 255;\r\n\t\t\t}\r\n\r\n\t\t\twhile (n >= 256) {\r\n\t\t\t\tn -= 255;\r\n\t\t\t}\r\n\r\n\t\t\treturn QRMath.EXP_TABLE[n];\r\n\t\t},\r\n\r\n\t\tEXP_TABLE: new Array(256),\r\n\r\n\t\tLOG_TABLE: new Array(256)\r\n\r\n\t};\r\n\r\n\tfor (var i = 0; i < 8; i++) {\r\n\t\tQRMath.EXP_TABLE[i] = 1 << i;\r\n\t}\r\n\tfor (var i = 8; i < 256; i++) {\r\n\t\tQRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^\r\n\t\t\tQRMath.EXP_TABLE[i - 5] ^\r\n\t\t\tQRMath.EXP_TABLE[i - 6] ^\r\n\t\t\tQRMath.EXP_TABLE[i - 8];\r\n\t}\r\n\tfor (var i = 0; i < 255; i++) {\r\n\t\tQRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\r\n\t}\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRPolynomial\r\n\t//---------------------------------------------------------------------\r\n\r\n\tfunction QRPolynomial(num, shift) {\r\n\r\n\t\tif (num.length == undefined) {\r\n\t\t\tthrow new Error(num.length + \"/\" + shift);\r\n\t\t}\r\n\r\n\t\tvar offset = 0;\r\n\r\n\t\twhile (offset < num.length && num[offset] == 0) {\r\n\t\t\toffset++;\r\n\t\t}\r\n\r\n\t\tthis.num = new Array(num.length - offset + shift);\r\n\t\tfor (var i = 0; i < num.length - offset; i++) {\r\n\t\t\tthis.num[i] = num[i + offset];\r\n\t\t}\r\n\t}\r\n\r\n\tQRPolynomial.prototype = {\r\n\r\n\t\tget: function(index) {\r\n\t\t\treturn this.num[index];\r\n\t\t},\r\n\r\n\t\tgetLength: function() {\r\n\t\t\treturn this.num.length;\r\n\t\t},\r\n\r\n\t\tmultiply: function(e) {\r\n\r\n\t\t\tvar num = new Array(this.getLength() + e.getLength() - 1);\r\n\r\n\t\t\tfor (var i = 0; i < this.getLength(); i++) {\r\n\t\t\t\tfor (var j = 0; j < e.getLength(); j++) {\r\n\t\t\t\t\tnum[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn new QRPolynomial(num, 0);\r\n\t\t},\r\n\r\n\t\tmod: function(e) {\r\n\r\n\t\t\tif (this.getLength() - e.getLength() < 0) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tvar ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));\r\n\r\n\t\t\tvar num = new Array(this.getLength());\r\n\r\n\t\t\tfor (var i = 0; i < this.getLength(); i++) {\r\n\t\t\t\tnum[i] = this.get(i);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < e.getLength(); i++) {\r\n\t\t\t\tnum[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\r\n\t\t\t}\r\n\r\n\t\t\t// recursive call\r\n\t\t\treturn new QRPolynomial(num, 0).mod(e);\r\n\t\t}\r\n\t};\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRRSBlock\r\n\t//---------------------------------------------------------------------\r\n\r\n\tfunction QRRSBlock(totalCount, dataCount) {\r\n\t\tthis.totalCount = totalCount;\r\n\t\tthis.dataCount = dataCount;\r\n\t}\r\n\r\n\tQRRSBlock.RS_BLOCK_TABLE = [\r\n\r\n\t\t// L\r\n\t\t// M\r\n\t\t// Q\r\n\t\t// H\r\n\r\n\t\t// 1\r\n\t\t[1, 26, 19],\r\n\t\t[1, 26, 16],\r\n\t\t[1, 26, 13],\r\n\t\t[1, 26, 9],\r\n\r\n\t\t// 2\r\n\t\t[1, 44, 34],\r\n\t\t[1, 44, 28],\r\n\t\t[1, 44, 22],\r\n\t\t[1, 44, 16],\r\n\r\n\t\t// 3\r\n\t\t[1, 70, 55],\r\n\t\t[1, 70, 44],\r\n\t\t[2, 35, 17],\r\n\t\t[2, 35, 13],\r\n\r\n\t\t// 4\t\t\r\n\t\t[1, 100, 80],\r\n\t\t[2, 50, 32],\r\n\t\t[2, 50, 24],\r\n\t\t[4, 25, 9],\r\n\r\n\t\t// 5\r\n\t\t[1, 134, 108],\r\n\t\t[2, 67, 43],\r\n\t\t[2, 33, 15, 2, 34, 16],\r\n\t\t[2, 33, 11, 2, 34, 12],\r\n\r\n\t\t// 6\r\n\t\t[2, 86, 68],\r\n\t\t[4, 43, 27],\r\n\t\t[4, 43, 19],\r\n\t\t[4, 43, 15],\r\n\r\n\t\t// 7\t\t\r\n\t\t[2, 98, 78],\r\n\t\t[4, 49, 31],\r\n\t\t[2, 32, 14, 4, 33, 15],\r\n\t\t[4, 39, 13, 1, 40, 14],\r\n\r\n\t\t// 8\r\n\t\t[2, 121, 97],\r\n\t\t[2, 60, 38, 2, 61, 39],\r\n\t\t[4, 40, 18, 2, 41, 19],\r\n\t\t[4, 40, 14, 2, 41, 15],\r\n\r\n\t\t// 9\r\n\t\t[2, 146, 116],\r\n\t\t[3, 58, 36, 2, 59, 37],\r\n\t\t[4, 36, 16, 4, 37, 17],\r\n\t\t[4, 36, 12, 4, 37, 13],\r\n\r\n\t\t// 10\t\t\r\n\t\t[2, 86, 68, 2, 87, 69],\r\n\t\t[4, 69, 43, 1, 70, 44],\r\n\t\t[6, 43, 19, 2, 44, 20],\r\n\t\t[6, 43, 15, 2, 44, 16],\r\n\r\n\t\t// 11\r\n\t\t[4, 101, 81],\r\n\t\t[1, 80, 50, 4, 81, 51],\r\n\t\t[4, 50, 22, 4, 51, 23],\r\n\t\t[3, 36, 12, 8, 37, 13],\r\n\r\n\t\t// 12\r\n\t\t[2, 116, 92, 2, 117, 93],\r\n\t\t[6, 58, 36, 2, 59, 37],\r\n\t\t[4, 46, 20, 6, 47, 21],\r\n\t\t[7, 42, 14, 4, 43, 15],\r\n\r\n\t\t// 13\r\n\t\t[4, 133, 107],\r\n\t\t[8, 59, 37, 1, 60, 38],\r\n\t\t[8, 44, 20, 4, 45, 21],\r\n\t\t[12, 33, 11, 4, 34, 12],\r\n\r\n\t\t// 14\r\n\t\t[3, 145, 115, 1, 146, 116],\r\n\t\t[4, 64, 40, 5, 65, 41],\r\n\t\t[11, 36, 16, 5, 37, 17],\r\n\t\t[11, 36, 12, 5, 37, 13],\r\n\r\n\t\t// 15\r\n\t\t[5, 109, 87, 1, 110, 88],\r\n\t\t[5, 65, 41, 5, 66, 42],\r\n\t\t[5, 54, 24, 7, 55, 25],\r\n\t\t[11, 36, 12],\r\n\r\n\t\t// 16\r\n\t\t[5, 122, 98, 1, 123, 99],\r\n\t\t[7, 73, 45, 3, 74, 46],\r\n\t\t[15, 43, 19, 2, 44, 20],\r\n\t\t[3, 45, 15, 13, 46, 16],\r\n\r\n\t\t// 17\r\n\t\t[1, 135, 107, 5, 136, 108],\r\n\t\t[10, 74, 46, 1, 75, 47],\r\n\t\t[1, 50, 22, 15, 51, 23],\r\n\t\t[2, 42, 14, 17, 43, 15],\r\n\r\n\t\t// 18\r\n\t\t[5, 150, 120, 1, 151, 121],\r\n\t\t[9, 69, 43, 4, 70, 44],\r\n\t\t[17, 50, 22, 1, 51, 23],\r\n\t\t[2, 42, 14, 19, 43, 15],\r\n\r\n\t\t// 19\r\n\t\t[3, 141, 113, 4, 142, 114],\r\n\t\t[3, 70, 44, 11, 71, 45],\r\n\t\t[17, 47, 21, 4, 48, 22],\r\n\t\t[9, 39, 13, 16, 40, 14],\r\n\r\n\t\t// 20\r\n\t\t[3, 135, 107, 5, 136, 108],\r\n\t\t[3, 67, 41, 13, 68, 42],\r\n\t\t[15, 54, 24, 5, 55, 25],\r\n\t\t[15, 43, 15, 10, 44, 16],\r\n\r\n\t\t// 21\r\n\t\t[4, 144, 116, 4, 145, 117],\r\n\t\t[17, 68, 42],\r\n\t\t[17, 50, 22, 6, 51, 23],\r\n\t\t[19, 46, 16, 6, 47, 17],\r\n\r\n\t\t// 22\r\n\t\t[2, 139, 111, 7, 140, 112],\r\n\t\t[17, 74, 46],\r\n\t\t[7, 54, 24, 16, 55, 25],\r\n\t\t[34, 37, 13],\r\n\r\n\t\t// 23\r\n\t\t[4, 151, 121, 5, 152, 122],\r\n\t\t[4, 75, 47, 14, 76, 48],\r\n\t\t[11, 54, 24, 14, 55, 25],\r\n\t\t[16, 45, 15, 14, 46, 16],\r\n\r\n\t\t// 24\r\n\t\t[6, 147, 117, 4, 148, 118],\r\n\t\t[6, 73, 45, 14, 74, 46],\r\n\t\t[11, 54, 24, 16, 55, 25],\r\n\t\t[30, 46, 16, 2, 47, 17],\r\n\r\n\t\t// 25\r\n\t\t[8, 132, 106, 4, 133, 107],\r\n\t\t[8, 75, 47, 13, 76, 48],\r\n\t\t[7, 54, 24, 22, 55, 25],\r\n\t\t[22, 45, 15, 13, 46, 16],\r\n\r\n\t\t// 26\r\n\t\t[10, 142, 114, 2, 143, 115],\r\n\t\t[19, 74, 46, 4, 75, 47],\r\n\t\t[28, 50, 22, 6, 51, 23],\r\n\t\t[33, 46, 16, 4, 47, 17],\r\n\r\n\t\t// 27\r\n\t\t[8, 152, 122, 4, 153, 123],\r\n\t\t[22, 73, 45, 3, 74, 46],\r\n\t\t[8, 53, 23, 26, 54, 24],\r\n\t\t[12, 45, 15, 28, 46, 16],\r\n\r\n\t\t// 28\r\n\t\t[3, 147, 117, 10, 148, 118],\r\n\t\t[3, 73, 45, 23, 74, 46],\r\n\t\t[4, 54, 24, 31, 55, 25],\r\n\t\t[11, 45, 15, 31, 46, 16],\r\n\r\n\t\t// 29\r\n\t\t[7, 146, 116, 7, 147, 117],\r\n\t\t[21, 73, 45, 7, 74, 46],\r\n\t\t[1, 53, 23, 37, 54, 24],\r\n\t\t[19, 45, 15, 26, 46, 16],\r\n\r\n\t\t// 30\r\n\t\t[5, 145, 115, 10, 146, 116],\r\n\t\t[19, 75, 47, 10, 76, 48],\r\n\t\t[15, 54, 24, 25, 55, 25],\r\n\t\t[23, 45, 15, 25, 46, 16],\r\n\r\n\t\t// 31\r\n\t\t[13, 145, 115, 3, 146, 116],\r\n\t\t[2, 74, 46, 29, 75, 47],\r\n\t\t[42, 54, 24, 1, 55, 25],\r\n\t\t[23, 45, 15, 28, 46, 16],\r\n\r\n\t\t// 32\r\n\t\t[17, 145, 115],\r\n\t\t[10, 74, 46, 23, 75, 47],\r\n\t\t[10, 54, 24, 35, 55, 25],\r\n\t\t[19, 45, 15, 35, 46, 16],\r\n\r\n\t\t// 33\r\n\t\t[17, 145, 115, 1, 146, 116],\r\n\t\t[14, 74, 46, 21, 75, 47],\r\n\t\t[29, 54, 24, 19, 55, 25],\r\n\t\t[11, 45, 15, 46, 46, 16],\r\n\r\n\t\t// 34\r\n\t\t[13, 145, 115, 6, 146, 116],\r\n\t\t[14, 74, 46, 23, 75, 47],\r\n\t\t[44, 54, 24, 7, 55, 25],\r\n\t\t[59, 46, 16, 1, 47, 17],\r\n\r\n\t\t// 35\r\n\t\t[12, 151, 121, 7, 152, 122],\r\n\t\t[12, 75, 47, 26, 76, 48],\r\n\t\t[39, 54, 24, 14, 55, 25],\r\n\t\t[22, 45, 15, 41, 46, 16],\r\n\r\n\t\t// 36\r\n\t\t[6, 151, 121, 14, 152, 122],\r\n\t\t[6, 75, 47, 34, 76, 48],\r\n\t\t[46, 54, 24, 10, 55, 25],\r\n\t\t[2, 45, 15, 64, 46, 16],\r\n\r\n\t\t// 37\r\n\t\t[17, 152, 122, 4, 153, 123],\r\n\t\t[29, 74, 46, 14, 75, 47],\r\n\t\t[49, 54, 24, 10, 55, 25],\r\n\t\t[24, 45, 15, 46, 46, 16],\r\n\r\n\t\t// 38\r\n\t\t[4, 152, 122, 18, 153, 123],\r\n\t\t[13, 74, 46, 32, 75, 47],\r\n\t\t[48, 54, 24, 14, 55, 25],\r\n\t\t[42, 45, 15, 32, 46, 16],\r\n\r\n\t\t// 39\r\n\t\t[20, 147, 117, 4, 148, 118],\r\n\t\t[40, 75, 47, 7, 76, 48],\r\n\t\t[43, 54, 24, 22, 55, 25],\r\n\t\t[10, 45, 15, 67, 46, 16],\r\n\r\n\t\t// 40\r\n\t\t[19, 148, 118, 6, 149, 119],\r\n\t\t[18, 75, 47, 31, 76, 48],\r\n\t\t[34, 54, 24, 34, 55, 25],\r\n\t\t[20, 45, 15, 61, 46, 16]\r\n\t];\r\n\r\n\tQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\r\n\r\n\t\tvar rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\r\n\r\n\t\tif (rsBlock == undefined) {\r\n\t\t\tthrow new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\r\n\t\t}\r\n\r\n\t\tvar length = rsBlock.length / 3;\r\n\r\n\t\tvar list = new Array();\r\n\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\r\n\t\t\tvar count = rsBlock[i * 3 + 0];\r\n\t\t\tvar totalCount = rsBlock[i * 3 + 1];\r\n\t\t\tvar dataCount = rsBlock[i * 3 + 2];\r\n\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tlist.push(new QRRSBlock(totalCount, dataCount));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\t}\r\n\r\n\tQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\r\n\r\n\t\tswitch (errorCorrectLevel) {\r\n\t\t\tcase QRErrorCorrectLevel.L:\r\n\t\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\r\n\t\t\tcase QRErrorCorrectLevel.M:\r\n\t\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\r\n\t\t\tcase QRErrorCorrectLevel.Q:\r\n\t\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\r\n\t\t\tcase QRErrorCorrectLevel.H:\r\n\t\t\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\r\n\t\t\tdefault:\r\n\t\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// QRBitBuffer\r\n\t//---------------------------------------------------------------------\r\n\r\n\tfunction QRBitBuffer() {\r\n\t\tthis.buffer = new Array();\r\n\t\tthis.length = 0;\r\n\t}\r\n\r\n\tQRBitBuffer.prototype = {\r\n\r\n\t\tget: function(index) {\r\n\t\t\tvar bufIndex = Math.floor(index / 8);\r\n\t\t\treturn ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) == 1;\r\n\t\t},\r\n\r\n\t\tput: function(num, length) {\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\tthis.putBit(((num >>> (length - i - 1)) & 1) == 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetLengthInBits: function() {\r\n\t\t\treturn this.length;\r\n\t\t},\r\n\r\n\t\tputBit: function(bit) {\r\n\r\n\t\t\tvar bufIndex = Math.floor(this.length / 8);\r\n\t\t\tif (this.buffer.length <= bufIndex) {\r\n\t\t\t\tthis.buffer.push(0);\r\n\t\t\t}\r\n\r\n\t\t\tif (bit) {\r\n\t\t\t\tthis.buffer[bufIndex] |= (0x80 >>> (this.length % 8));\r\n\t\t\t}\r\n\r\n\t\t\tthis.length++;\r\n\t\t}\r\n\t};\r\n\r\n\t//---------------------------------------------------------------------\r\n\t// Support Chinese\r\n\t//---------------------------------------------------------------------\r\n\tfunction utf16To8(text) {\r\n\t\tvar result = '';\r\n\t\tvar c;\r\n\t\tfor (var i = 0; i < text.length; i++) {\r\n\t\t\tc = text.charCodeAt(i);\r\n\t\t\tif (c >= 0x0001 && c <= 0x007F) {\r\n\t\t\t\tresult += text.charAt(i);\r\n\t\t\t} else if (c > 0x07FF) {\r\n\t\t\t\tresult += String.fromCharCode(0xE0 | c >> 12 & 0x0F);\r\n\t\t\t\tresult += String.fromCharCode(0x80 | c >> 6 & 0x3F);\r\n\t\t\t\tresult += String.fromCharCode(0x80 | c >> 0 & 0x3F);\r\n\t\t\t} else {\r\n\t\t\t\tresult += String.fromCharCode(0xC0 | c >> 6 & 0x1F);\r\n\t\t\t\tresult += String.fromCharCode(0x80 | c >> 0 & 0x3F);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tuQRCode = {\r\n\t\t\r\n\t\tdefaults: {\r\n\t\t\tsize: 258,\r\n\t\t\tmargin: 0,\r\n\t\t\tbackgroundColor: '#ffffff',\r\n\t\t\tforegroundColor: '#000000',\r\n\t\t\tfileType: 'png', // 'jpg', 'png'\r\n\t\t\tcorrectLevel: 3,\r\n\t\t\ttypeNumber: -1\r\n\t\t},\r\n\r\n\t\tmake: function(options) {\r\n\t\t\tvar defaultOptions = {\r\n\t\t\t\tcanvasId: options.canvasId,\r\n\t\t\t\tcomponentInstance: options.componentInstance,\r\n\t\t\t\ttext: options.text,\r\n\t\t\t\tsize: this.defaults.size,\r\n\t\t\t\tmargin: this.defaults.margin,\r\n\t\t\t\tbackgroundColor: this.defaults.backgroundColor,\r\n\t\t\t\tforegroundColor: this.defaults.foregroundColor,\r\n\t\t\t\tfileType: this.defaults.fileType,\r\n\t\t\t\tcorrectLevel: this.defaults.correctLevel,\r\n\t\t\t\ttypeNumber: this.defaults.typeNumber\r\n\t\t\t};\r\n\t\t\tif (options) {\r\n\t\t\t\tfor (var i in options) {\r\n\t\t\t\t\tdefaultOptions[i] = options[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\toptions = defaultOptions;\r\n\t\t\tif (!options.canvasId) {\r\n\t\t\t\tconsole.error('uQRCode: Please set canvasId!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfunction createCanvas() {\r\n\t\t\t\tvar qrcode = new QRCode(options.typeNumber, options.correctLevel);\r\n\t\t\t\tqrcode.addData(utf16To8(options.text));\r\n\t\t\t\tqrcode.make();\r\n\r\n\t\t\t\tvar ctx = uni.createCanvasContext(options.canvasId, options.componentInstance);\r\n\t\t\t\tctx.setFillStyle(options.backgroundColor);\r\n\t\t\t\tctx.fillRect(0, 0, options.size, options.size);\r\n\r\n\t\t\t\tvar tileW = (options.size - options.margin * 2) / qrcode.getModuleCount();\r\n\t\t\t\tvar tileH = tileW;\r\n\r\n\t\t\t\tfor (var row = 0; row < qrcode.getModuleCount(); row++) {\r\n\t\t\t\t\tfor (var col = 0; col < qrcode.getModuleCount(); col++) {\r\n\t\t\t\t\t\tvar style = qrcode.isDark(row, col) ? options.foregroundColor : options.backgroundColor;\r\n\t\t\t\t\t\tctx.setFillStyle(style);\r\n\t\t\t\t\t\tvar x = Math.round(col * tileW) + options.margin;\r\n\t\t\t\t\t\tvar y = Math.round(row * tileH) + options.margin;\r\n\t\t\t\t\t\tvar w = Math.ceil((col + 1) * tileW) - Math.floor(col * tileW);\r\n\t\t\t\t\t\tvar h = Math.ceil((row + 1) * tileW) - Math.floor(row * tileW);\r\n\t\t\t\t\t\tctx.fillRect(x, y, w, h);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tctx.draw(false, function() {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t\t\tcanvasId: options.canvasId,\r\n\t\t\t\t\t\t\t\tfileType: options.fileType,\r\n\t\t\t\t\t\t\t\twidth: options.size,\r\n\t\t\t\t\t\t\t\theight: options.size,\r\n\t\t\t\t\t\t\t\tdestWidth: options.size,\r\n\t\t\t\t\t\t\t\tdestHeight: options.size,\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\toptions.success && options.success(res.tempFilePath);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(error) {\r\n\t\t\t\t\t\t\t\t\toptions.fail && options.fail(error);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcomplete: function(res) {\r\n\t\t\t\t\t\t\t\t\toptions.complete && options.complete(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, options.componentInstance);\r\n\t\t\t\t\t\t}, options.text.length + 100);\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 150);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcreateCanvas();\r\n\t\t}\r\n\r\n\t}\r\n\r\n})()\r\n\r\nexport default uQRCode\r\n","/*\r\n * uCharts v1.9.4.20200331\r\n * uni-app平台高性能跨全端图表，支持H5、APP、小程序（微信/支付宝/百度/头条/QQ/360）\r\n * Copyright (c) 2019 QIUN秋云 https://www.ucharts.cn All rights reserved.\r\n * Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\r\n * \r\n * uCharts官方网站\r\n * https://www.uCharts.cn\r\n * \r\n * 开源地址:\r\n * https://gitee.com/uCharts/uCharts\r\n * \r\n * uni-app插件市场地址：\r\n * http://ext.dcloud.net.cn/plugin?id=271\r\n * \r\n */\r\n\r\n'use strict';\r\n\r\nvar config = {\r\n  yAxisWidth: 15,\r\n  yAxisSplit: 5,\r\n  xAxisHeight: 15,\r\n  xAxisLineHeight: 15,\r\n  legendHeight: 15,\r\n  yAxisTitleWidth: 15,\r\n  padding: [10, 10, 10, 10],\r\n  pixelRatio: 1,\r\n  rotate: false,\r\n  columePadding: 3,\r\n  fontSize: 13,\r\n  //dataPointShape: ['diamond', 'circle', 'triangle', 'rect'],\r\n  dataPointShape: ['circle', 'circle', 'circle', 'circle'],\r\n  colors: ['#1890ff', '#2fc25b', '#facc14', '#f04864', '#8543e0', '#90ed7d'],\r\n  pieChartLinePadding: 15,\r\n  pieChartTextPadding: 5,\r\n  xAxisTextPadding: 3,\r\n  titleColor: '#333333',\r\n  titleFontSize: 20,\r\n  subtitleColor: '#999999',\r\n  subtitleFontSize: 15,\r\n  toolTipPadding: 3,\r\n  toolTipBackground: '#000000',\r\n  toolTipOpacity: 0.7,\r\n  toolTipLineHeight: 20,\r\n  radarLabelTextMargin: 15,\r\n  gaugeLabelTextMargin: 15\r\n};\r\n\r\nlet assign = function (target, ...varArgs) {\r\n    if (target == null) {\r\n        throw new TypeError('Cannot convert undefined or null to object');\r\n    }\r\n    if (!varArgs || varArgs.length <= 0) {\r\n        return target;\r\n    }\r\n    // 深度合并对象\r\n    function deepAssign(obj1, obj2) {\r\n        for (let key in obj2) {\r\n            obj1[key] = obj1[key] && obj1[key].toString() === \"[object Object]\" ?\r\n                deepAssign(obj1[key], obj2[key]) : obj1[key] = obj2[key];\r\n        }\r\n        return obj1;\r\n    }\r\n\r\n    varArgs.forEach(val => {\r\n        target = deepAssign(target, val);\r\n    });\r\n    return target;\r\n};\r\n\r\nvar util = {\r\n  toFixed: function toFixed(num, limit) {\r\n    limit = limit || 2;\r\n    if (this.isFloat(num)) {\r\n      num = num.toFixed(limit);\r\n    }\r\n    return num;\r\n  },\r\n  isFloat: function isFloat(num) {\r\n    return num % 1 !== 0;\r\n  },\r\n  approximatelyEqual: function approximatelyEqual(num1, num2) {\r\n    return Math.abs(num1 - num2) < 1e-10;\r\n  },\r\n  isSameSign: function isSameSign(num1, num2) {\r\n    return Math.abs(num1) === num1 && Math.abs(num2) === num2 || Math.abs(num1) !== num1 && Math.abs(num2) !== num2;\r\n  },\r\n  isSameXCoordinateArea: function isSameXCoordinateArea(p1, p2) {\r\n    return this.isSameSign(p1.x, p2.x);\r\n  },\r\n  isCollision: function isCollision(obj1, obj2) {\r\n    obj1.end = {};\r\n    obj1.end.x = obj1.start.x + obj1.width;\r\n    obj1.end.y = obj1.start.y - obj1.height;\r\n    obj2.end = {};\r\n    obj2.end.x = obj2.start.x + obj2.width;\r\n    obj2.end.y = obj2.start.y - obj2.height;\r\n    var flag = obj2.start.x > obj1.end.x || obj2.end.x < obj1.start.x || obj2.end.y > obj1.start.y || obj2.start.y < obj1.end.y;\r\n    return !flag;\r\n  }\r\n};\r\n\r\n//兼容H5点击事件\r\nfunction getH5Offset(e) {\r\n  e.mp = {\r\n    changedTouches: []\r\n  };\r\n  e.mp.changedTouches.push({\r\n    x: e.offsetX,\r\n    y: e.offsetY\r\n  });\r\n  return e;\r\n}\r\n\r\n// hex 转 rgba\r\nfunction hexToRgb(hexValue, opc) {\r\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  var hex = hexValue.replace(rgx, function(m, r, g, b) {\r\n    return r + r + g + g + b + b;\r\n  });\r\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  var r = parseInt(rgb[1], 16);\r\n  var g = parseInt(rgb[2], 16);\r\n  var b = parseInt(rgb[3], 16);\r\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + opc + ')';\r\n}\r\n\r\nfunction findRange(num, type, limit) {\r\n  if (isNaN(num)) {\r\n    throw new Error('[uCharts] unvalid series data!');\r\n  }\r\n  limit = limit || 10;\r\n  type = type ? type : 'upper';\r\n  var multiple = 1;\r\n  while (limit < 1) {\r\n    limit *= 10;\r\n    multiple *= 10;\r\n  }\r\n  if (type === 'upper') {\r\n    num = Math.ceil(num * multiple);\r\n  } else {\r\n    num = Math.floor(num * multiple);\r\n  }\r\n  while (num % limit !== 0) {\r\n    if (type === 'upper') {\r\n      num++;\r\n    } else {\r\n      num--;\r\n    }\r\n  }\r\n  return num / multiple;\r\n}\r\n\r\nfunction calCandleMA(dayArr, nameArr, colorArr, kdata) {\r\n  let seriesTemp = [];\r\n  for (let k = 0; k < dayArr.length; k++) {\r\n    let seriesItem = {\r\n      data: [],\r\n      name: nameArr[k],\r\n      color: colorArr[k]\r\n    };\r\n    for (let i = 0, len = kdata.length; i < len; i++) {\r\n      if (i < dayArr[k]) {\r\n        seriesItem.data.push(null);\r\n        continue;\r\n      }\r\n      let sum = 0;\r\n      for (let j = 0; j < dayArr[k]; j++) {\r\n        sum += kdata[i - j][1];\r\n      }\r\n      seriesItem.data.push(+(sum / dayArr[k]).toFixed(3));\r\n    }\r\n    seriesTemp.push(seriesItem);\r\n  }\r\n  return seriesTemp;\r\n}\r\n\r\nfunction calValidDistance(self,distance, chartData, config, opts) {\r\n  var dataChartAreaWidth = opts.width - opts.area[1] - opts.area[3];\r\n  var dataChartWidth = chartData.eachSpacing * (opts.chartData.xAxisData.xAxisPoints.length-1);\r\n  var validDistance = distance;\r\n  if (distance >= 0) {\r\n    validDistance = 0;\r\n\t\tself.event.trigger('scrollLeft');\r\n  } else if (Math.abs(distance) >= dataChartWidth - dataChartAreaWidth) {\r\n    validDistance = dataChartAreaWidth - dataChartWidth;\r\n\t\tself.event.trigger('scrollRight');\r\n  }\r\n  return validDistance;\r\n}\r\n\r\nfunction isInAngleRange(angle, startAngle, endAngle) {\r\n  function adjust(angle) {\r\n    while (angle < 0) {\r\n      angle += 2 * Math.PI;\r\n    }\r\n    while (angle > 2 * Math.PI) {\r\n      angle -= 2 * Math.PI;\r\n    }\r\n    return angle;\r\n  }\r\n  angle = adjust(angle);\r\n  startAngle = adjust(startAngle);\r\n  endAngle = adjust(endAngle);\r\n  if (startAngle > endAngle) {\r\n    endAngle += 2 * Math.PI;\r\n    if (angle < startAngle) {\r\n      angle += 2 * Math.PI;\r\n    }\r\n  }\r\n  return angle >= startAngle && angle <= endAngle;\r\n}\r\n\r\nfunction calRotateTranslate(x, y, h) {\r\n  var xv = x;\r\n  var yv = h - y;\r\n  var transX = xv + (h - yv - xv) / Math.sqrt(2);\r\n  transX *= -1;\r\n  var transY = (h - yv) * (Math.sqrt(2) - 1) - (h - yv - xv) / Math.sqrt(2);\r\n  return {\r\n    transX: transX,\r\n    transY: transY\r\n  };\r\n}\r\n\r\nfunction createCurveControlPoints(points, i) {\r\n\r\n  function isNotMiddlePoint(points, i) {\r\n    if (points[i - 1] && points[i + 1]) {\r\n      return points[i].y >= Math.max(points[i - 1].y, points[i + 1].y) || points[i].y <= Math.min(points[i - 1].y,points[i + 1].y);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\tfunction isNotMiddlePointX(points, i) {\r\n\t  if (points[i - 1] && points[i + 1]) {\r\n\t    return points[i].x >= Math.max(points[i - 1].x, points[i + 1].x) || points[i].x <= Math.min(points[i - 1].x,points[i + 1].x);\r\n\t  } else {\r\n\t    return false;\r\n\t  }\r\n\t}\r\n  var a = 0.2;\r\n  var b = 0.2;\r\n  var pAx = null;\r\n  var pAy = null;\r\n  var pBx = null;\r\n  var pBy = null;\r\n  if (i < 1) {\r\n    pAx = points[0].x + (points[1].x - points[0].x) * a;\r\n    pAy = points[0].y + (points[1].y - points[0].y) * a;\r\n  } else {\r\n    pAx = points[i].x + (points[i + 1].x - points[i - 1].x) * a;\r\n    pAy = points[i].y + (points[i + 1].y - points[i - 1].y) * a;\r\n  }\r\n\r\n  if (i > points.length - 3) {\r\n    var last = points.length - 1;\r\n    pBx = points[last].x - (points[last].x - points[last - 1].x) * b;\r\n    pBy = points[last].y - (points[last].y - points[last - 1].y) * b;\r\n  } else {\r\n    pBx = points[i + 1].x - (points[i + 2].x - points[i].x) * b;\r\n    pBy = points[i + 1].y - (points[i + 2].y - points[i].y) * b;\r\n  }\r\n  if (isNotMiddlePoint(points, i + 1)) {\r\n    pBy = points[i + 1].y;\r\n  }\r\n  if (isNotMiddlePoint(points, i)) {\r\n    pAy = points[i].y;\r\n  }\r\n\tif (isNotMiddlePointX(points, i + 1)) {\r\n\t  pBx = points[i + 1].x;\r\n\t}\r\n\tif (isNotMiddlePointX(points, i)) {\r\n\t  pAx = points[i].x;\r\n\t}\r\n\tif (pAy >= Math.max(points[i].y, points[i + 1].y) || pAy <= Math.min(points[i].y, points[i + 1].y)) {\r\n\tpAy = points[i].y;\r\n\t}\r\n\tif (pBy >= Math.max(points[i].y, points[i + 1].y) || pBy <= Math.min(points[i].y, points[i + 1].y)) {\r\n\tpBy = points[i + 1].y;\r\n\t}\r\n\tif (pAx >= Math.max(points[i].x, points[i + 1].x) || pAx <= Math.min(points[i].x, points[i + 1].x)) {\r\n\tpAx = points[i].x;\r\n\t}\r\n\tif (pBx >= Math.max(points[i].x, points[i + 1].x) || pBx <= Math.min(points[i].x, points[i + 1].x)) {\r\n\tpBx = points[i + 1].x;\r\n\t}\r\n  return {\r\n    ctrA: {\r\n      x: pAx,\r\n      y: pAy\r\n    },\r\n    ctrB: {\r\n      x: pBx,\r\n      y: pBy\r\n    }\r\n  };\r\n}\r\n\r\nfunction convertCoordinateOrigin(x, y, center) {\r\n  return {\r\n    x: center.x + x,\r\n    y: center.y - y\r\n  };\r\n}\r\n\r\nfunction avoidCollision(obj, target) {\r\n  if (target) {\r\n    // is collision test\r\n    while (util.isCollision(obj, target)) {\r\n      if (obj.start.x > 0) {\r\n        obj.start.y--;\r\n      } else if (obj.start.x < 0) {\r\n        obj.start.y++;\r\n      } else {\r\n        if (obj.start.y > 0) {\r\n          obj.start.y++;\r\n        } else {\r\n          obj.start.y--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return obj;\r\n}\r\n\r\nfunction fillSeries(series, opts, config) {\r\n  var index = 0;\r\n  return series.map(function(item) {\r\n    if (!item.color) {\r\n      item.color = config.colors[index];\r\n      index = (index + 1) % config.colors.length;\r\n    }\r\n    if (!item.index) {\r\n      item.index = 0;\r\n    }\r\n    if (!item.type) {\r\n      item.type = opts.type;\r\n    }\r\n    if (typeof item.show == \"undefined\") {\r\n      item.show = true;\r\n    }\r\n    if (!item.type) {\r\n      item.type = opts.type;\r\n    }\r\n    if (!item.pointShape) {\r\n      item.pointShape = \"circle\";\r\n    }\r\n    if (!item.legendShape) {\r\n      switch (item.type) {\r\n        case 'line':\r\n          item.legendShape = \"line\";\r\n          break;\r\n        case 'column':\r\n          item.legendShape = \"rect\";\r\n          break;\r\n        case 'area':\r\n          item.legendShape = \"triangle\";\r\n          break;\r\n        default:\r\n          item.legendShape = \"circle\";\r\n      }\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction getDataRange(minData, maxData) {\r\n  var limit = 0;\r\n  var range = maxData - minData;\r\n  if (range >= 10000) {\r\n    limit = 1000;\r\n  } else if (range >= 1000) {\r\n    limit = 100;\r\n  } else if (range >= 100) {\r\n    limit = 10;\r\n  } else if (range >= 10) {\r\n    limit = 5;\r\n  } else if (range >= 1) {\r\n    limit = 1;\r\n  } else if (range >= 0.1) {\r\n    limit = 0.1;\r\n  } else if (range >= 0.01) {\r\n    limit = 0.01;\r\n  } else if (range >= 0.001) {\r\n    limit = 0.001;\r\n  } else if (range >= 0.0001) {\r\n    limit = 0.0001;\r\n  } else if (range >= 0.00001) {\r\n    limit = 0.00001;\r\n  } else {\r\n    limit = 0.000001;\r\n  }\r\n  return {\r\n    minRange: findRange(minData, 'lower', limit),\r\n    maxRange: findRange(maxData, 'upper', limit)\r\n  };\r\n}\r\n\r\nfunction measureText(text) {\r\n  var fontSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : config.fontSize;\r\n  text = String(text);\r\n  var text = text.split('');\r\n  var width = 0;\r\n  for (let i = 0; i < text.length; i++) {\r\n    let item = text[i];\r\n    if (/[a-zA-Z]/.test(item)) {\r\n      width += 7;\r\n    } else if (/[0-9]/.test(item)) {\r\n      width += 5.5;\r\n    } else if (/\\./.test(item)) {\r\n      width += 2.7;\r\n    } else if (/-/.test(item)) {\r\n      width += 3.25;\r\n    } else if (/[\\u4e00-\\u9fa5]/.test(item)) {\r\n      width += 10;\r\n    } else if (/\\(|\\)/.test(item)) {\r\n      width += 3.73;\r\n    } else if (/\\s/.test(item)) {\r\n      width += 2.5;\r\n    } else if (/%/.test(item)) {\r\n      width += 8;\r\n    } else {\r\n      width += 10;\r\n    }\r\n  }\r\n  return width * fontSize / 10;\r\n}\r\n\r\nfunction dataCombine(series) {\r\n  return series.reduce(function(a, b) {\r\n    return (a.data ? a.data : a).concat(b.data);\r\n  }, []);\r\n}\r\n\r\nfunction dataCombineStack(series, len) {\r\n  var sum = new Array(len);\r\n  for (var j = 0; j < sum.length; j++) {\r\n    sum[j] = 0;\r\n  }\r\n  for (var i = 0; i < series.length; i++) {\r\n    for (var j = 0; j < sum.length; j++) {\r\n      sum[j] += series[i].data[j];\r\n    }\r\n  }\r\n  return series.reduce(function(a, b) {\r\n    return (a.data ? a.data : a).concat(b.data).concat(sum);\r\n  }, []);\r\n}\r\n\r\nfunction getTouches(touches, opts, e) {\r\n  let x, y;\r\n  if (touches.clientX) {\r\n    if (opts.rotate) {\r\n      y = opts.height - touches.clientX * opts.pixelRatio;\r\n      x = (touches.pageY - e.currentTarget.offsetTop - (opts.height / opts.pixelRatio / 2) * (opts.pixelRatio - 1)) *\r\n        opts.pixelRatio;\r\n    } else {\r\n      x = touches.clientX * opts.pixelRatio;\r\n      y = (touches.pageY - e.currentTarget.offsetTop - (opts.height / opts.pixelRatio / 2) * (opts.pixelRatio - 1)) *\r\n        opts.pixelRatio;\r\n    }\r\n  } else {\r\n    if (opts.rotate) {\r\n      y = opts.height - touches.x * opts.pixelRatio;\r\n      x = touches.y * opts.pixelRatio;\r\n    } else {\r\n      x = touches.x * opts.pixelRatio;\r\n      y = touches.y * opts.pixelRatio;\r\n    }\r\n  }\r\n  return {\r\n    x: x,\r\n    y: y\r\n  }\r\n}\r\n\r\nfunction getSeriesDataItem(series, index) {\r\n  var data = [];\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    if (item.data[index] !== null && typeof item.data[index] !== 'undefined' && item.show) {\r\n      let seriesItem = {};\r\n      seriesItem.color = item.color;\r\n      seriesItem.type = item.type;\r\n      seriesItem.style = item.style;\r\n      seriesItem.pointShape = item.pointShape;\r\n      seriesItem.disableLegend = item.disableLegend;\r\n      seriesItem.name = item.name;\r\n      seriesItem.show = item.show;\r\n      seriesItem.data = item.format ? item.format(item.data[index]) : item.data[index];\r\n      data.push(seriesItem);\r\n    }\r\n  }\r\n  return data;\r\n}\r\n\r\nfunction getMaxTextListLength(list) {\r\n  var lengthList = list.map(function(item) {\r\n    return measureText(item);\r\n  });\r\n  return Math.max.apply(null, lengthList);\r\n}\r\n\r\nfunction getRadarCoordinateSeries(length) {\r\n  var eachAngle = 2 * Math.PI / length;\r\n  var CoordinateSeries = [];\r\n  for (var i = 0; i < length; i++) {\r\n    CoordinateSeries.push(eachAngle * i);\r\n  }\r\n\r\n  return CoordinateSeries.map(function(item) {\r\n    return -1 * item + Math.PI / 2;\r\n  });\r\n}\r\n\r\nfunction getToolTipData(seriesData, calPoints, index, categories) {\r\n  var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\r\n\r\n  var textList = seriesData.map(function(item) {\r\n\t\tlet titleText=[];\r\n\t\tif(categories){\r\n\t\t\ttitleText=categories;\r\n\t\t}else{\r\n\t\t\ttitleText=item.data;\r\n\t\t}\r\n    return {\r\n      text: option.format ? option.format(item, titleText[index]) : item.name + ': ' + item.data,\r\n      color: item.color\r\n    };\r\n  });\r\n  var validCalPoints = [];\r\n  var offset = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n  for (let i = 0; i < calPoints.length; i++) {\r\n    let points = calPoints[i];\r\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\r\n      validCalPoints.push(points[index]);\r\n    }\r\n  }\r\n  for (let i = 0; i < validCalPoints.length; i++) {\r\n    let item = validCalPoints[i];\r\n    offset.x = Math.round(item.x);\r\n    offset.y += item.y;\r\n  }\r\n  offset.y /= validCalPoints.length;\r\n  return {\r\n    textList: textList,\r\n    offset: offset\r\n  };\r\n}\r\n\r\nfunction getMixToolTipData(seriesData, calPoints, index, categories) {\r\n  var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\r\n  var textList = seriesData.map(function(item) {\r\n    return {\r\n      text: option.format ? option.format(item, categories[index]) : item.name + ': ' + item.data,\r\n      color: item.color,\r\n      disableLegend: item.disableLegend ? true : false\r\n    };\r\n  });\r\n  textList = textList.filter(function(item) {\r\n    if (item.disableLegend !== true) {\r\n      return item;\r\n    }\r\n  });\r\n  var validCalPoints = [];\r\n  var offset = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n  for (let i = 0; i < calPoints.length; i++) {\r\n    let points = calPoints[i];\r\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\r\n      validCalPoints.push(points[index]);\r\n    }\r\n  }\r\n  for (let i = 0; i < validCalPoints.length; i++) {\r\n    let item = validCalPoints[i];\r\n    offset.x = Math.round(item.x);\r\n    offset.y += item.y;\r\n  }\r\n  offset.y /= validCalPoints.length;\r\n  return {\r\n    textList: textList,\r\n    offset: offset\r\n  };\r\n}\r\n\r\nfunction getCandleToolTipData(series, seriesData, calPoints, index, categories, extra) {\r\n  var option = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\r\n  let upColor = extra.color.upFill;\r\n  let downColor = extra.color.downFill;\r\n  //颜色顺序为开盘，收盘，最低，最高\r\n  let color = [upColor, upColor, downColor, upColor];\r\n  var textList = [];\r\n  let text0 = {\r\n    text: categories[index],\r\n    color: null\r\n  };\r\n  textList.push(text0);\r\n  seriesData.map(function(item) {\r\n    if (index == 0) {\r\n      if(item.data[1] - item.data[0] < 0){\r\n      \tcolor[1] = downColor;\r\n      }else{\r\n      \tcolor[1] = upColor;\r\n      }\r\n    } else {\r\n      if (item.data[0] < series[index - 1][1]) {\r\n        color[0] = downColor;\r\n      }\r\n      if (item.data[1] < item.data[0]) {\r\n        color[1] = downColor;\r\n      }\r\n      if (item.data[2] > series[index - 1][1]) {\r\n        color[2] = upColor;\r\n      }\r\n      if (item.data[3] < series[index - 1][1]) {\r\n        color[3] = downColor;\r\n      }\r\n    }\r\n    let text1 = {\r\n      text: '开盘：' + item.data[0],\r\n      color: color[0]\r\n    };\r\n    let text2 = {\r\n      text: '收盘：' + item.data[1],\r\n      color: color[1]\r\n    };\r\n    let text3 = {\r\n      text: '最低：' + item.data[2],\r\n      color: color[2]\r\n    };\r\n    let text4 = {\r\n      text: '最高：' + item.data[3],\r\n      color: color[3]\r\n    };\r\n    textList.push(text1, text2, text3, text4);\r\n  });\r\n  var validCalPoints = [];\r\n  var offset = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n  for (let i = 0; i < calPoints.length; i++) {\r\n    let points = calPoints[i];\r\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\r\n      validCalPoints.push(points[index]);\r\n    }\r\n  }\r\n  offset.x = Math.round(validCalPoints[0][0].x);\r\n  return {\r\n    textList: textList,\r\n    offset: offset\r\n  };\r\n}\r\n\r\nfunction filterSeries(series) {\r\n  let tempSeries = [];\r\n  for (let i = 0; i < series.length; i++) {\r\n    if (series[i].show == true) {\r\n      tempSeries.push(series[i])\r\n    }\r\n  }\r\n  return tempSeries;\r\n}\r\n\r\nfunction findCurrentIndex(currentPoints, calPoints, opts, config) {\r\n  var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\r\n  var currentIndex = -1;\r\n  var spacing = opts.chartData.eachSpacing/2;\r\n\tlet xAxisPoints=[];\r\n\tif(calPoints.length>0){\r\n\t\tif(opts.type=='candle'){\r\n\t\t\tfor(let i=0;i<calPoints[0].length;i++){\r\n\t\t\t\txAxisPoints.push(calPoints[0][i][0].x)\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(let i=0;i<calPoints[0].length;i++){\r\n\t\t\t\txAxisPoints.push(calPoints[0][i].x)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif((opts.type=='line' || opts.type=='area') && opts.xAxis.boundaryGap=='justify'){\r\n\t\t  spacing = opts.chartData.eachSpacing/2;\r\n\t\t}\r\n\t\tif(!opts.categories){\r\n\t\t\tspacing=0\r\n\t\t}\r\n\t\tif (isInExactChartArea(currentPoints, opts, config)) {\r\n\t\t  xAxisPoints.forEach(function(item, index) {\r\n\t\t    if (currentPoints.x + offset + spacing > item) {\r\n\t\t      currentIndex = index;\r\n\t\t    }\r\n\t\t  });\r\n\t\t}\r\n\t}\r\n  return currentIndex;\r\n}\r\n\r\nfunction findLegendIndex(currentPoints, legendData, opts) {\r\n  let currentIndex = -1;\r\n  if (isInExactLegendArea(currentPoints, legendData.area)) {\r\n    let points = legendData.points;\r\n    let index = -1;\r\n    for (let i = 0, len = points.length; i < len; i++) {\r\n      let item = points[i];\r\n      for (let j = 0; j < item.length; j++) {\r\n        index += 1;\r\n        let area = item[j]['area'];\r\n        if (currentPoints.x > area[0] && currentPoints.x < area[2] && currentPoints.y > area[1] && currentPoints.y < area[3]) {\r\n          currentIndex = index;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return currentIndex;\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction isInExactLegendArea(currentPoints, area) {\r\n  return currentPoints.x > area.start.x && currentPoints.x < area.end.x && currentPoints.y > area.start.y &&\r\n    currentPoints.y < area.end.y;\r\n}\r\n\r\nfunction isInExactChartArea(currentPoints, opts, config) {\r\n  return currentPoints.x <= opts.width - opts.area[1] + 10 && currentPoints.x >= opts.area[3] -10 && currentPoints.y >= opts.area[0] && currentPoints.y <= opts.height - opts.area[2];\r\n}\r\n\r\nfunction findRadarChartCurrentIndex(currentPoints, radarData, count) {\r\n  var eachAngleArea = 2 * Math.PI / count;\r\n  var currentIndex = -1;\r\n  if (isInExactPieChartArea(currentPoints, radarData.center, radarData.radius)) {\r\n    var fixAngle = function fixAngle(angle) {\r\n      if (angle < 0) {\r\n        angle += 2 * Math.PI;\r\n      }\r\n      if (angle > 2 * Math.PI) {\r\n        angle -= 2 * Math.PI;\r\n      }\r\n      return angle;\r\n    };\r\n\r\n    var angle = Math.atan2(radarData.center.y - currentPoints.y, currentPoints.x - radarData.center.x);\r\n    angle = -1 * angle;\r\n    if (angle < 0) {\r\n      angle += 2 * Math.PI;\r\n    }\r\n\r\n    var angleList = radarData.angleList.map(function(item) {\r\n      item = fixAngle(-1 * item);\r\n\r\n      return item;\r\n    });\r\n\r\n    angleList.forEach(function(item, index) {\r\n      var rangeStart = fixAngle(item - eachAngleArea / 2);\r\n      var rangeEnd = fixAngle(item + eachAngleArea / 2);\r\n      if (rangeEnd < rangeStart) {\r\n        rangeEnd += 2 * Math.PI;\r\n      }\r\n      if (angle >= rangeStart && angle <= rangeEnd || angle + 2 * Math.PI >= rangeStart && angle + 2 * Math.PI <=\r\n        rangeEnd) {\r\n        currentIndex = index;\r\n      }\r\n    });\r\n  }\r\n\r\n  return currentIndex;\r\n}\r\n\r\nfunction findFunnelChartCurrentIndex(currentPoints, funnelData) {\r\n  var currentIndex = -1;\r\n  for (var i = 0, len = funnelData.series.length; i < len; i++) {\r\n    var item = funnelData.series[i];\r\n    if (currentPoints.x > item.funnelArea[0] && currentPoints.x < item.funnelArea[2] && currentPoints.y > item.funnelArea[1] && currentPoints.y < item.funnelArea[3]) {\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findWordChartCurrentIndex(currentPoints, wordData) {\r\n  var currentIndex = -1;\r\n  for (var i = 0, len = wordData.length; i < len; i++) {\r\n    var item = wordData[i];\r\n    if (currentPoints.x > item.area[0] && currentPoints.x < item.area[2] && currentPoints.y > item.area[1] && currentPoints.y < item.area[3]) {\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findMapChartCurrentIndex(currentPoints, opts) {\r\n  var currentIndex = -1;\r\n  var cData=opts.chartData.mapData;\r\n  var data=opts.series;\r\n  var tmp=pointToCoordinate(currentPoints.y, currentPoints.x,cData.bounds,cData.scale,cData.xoffset,cData.yoffset);\r\n  var poi=[tmp.x, tmp.y];\r\n  for (var i = 0, len = data.length; i < len; i++) {\r\n    var item = data[i].geometry.coordinates;\r\n    if(isPoiWithinPoly(poi,item)){\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findPieChartCurrentIndex(currentPoints, pieData) {\r\n  var currentIndex = -1;\r\n  if (isInExactPieChartArea(currentPoints, pieData.center, pieData.radius)) {\r\n    var angle = Math.atan2(pieData.center.y - currentPoints.y, currentPoints.x - pieData.center.x);\r\n    angle = -angle;\r\n    for (var i = 0, len = pieData.series.length; i < len; i++) {\r\n      var item = pieData.series[i];\r\n      if (isInAngleRange(angle, item._start_, item._start_ + item._proportion_ * 2 * Math.PI)) {\r\n        currentIndex = i;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return currentIndex;\r\n}\r\n\r\nfunction isInExactPieChartArea(currentPoints, center, radius) {\r\n  return Math.pow(currentPoints.x - center.x, 2) + Math.pow(currentPoints.y - center.y, 2) <= Math.pow(radius, 2);\r\n}\r\n\r\nfunction splitPoints(points) {\r\n  var newPoints = [];\r\n  var items = [];\r\n  points.forEach(function(item, index) {\r\n    if (item !== null) {\r\n      items.push(item);\r\n    } else {\r\n      if (items.length) {\r\n        newPoints.push(items);\r\n      }\r\n      items = [];\r\n    }\r\n  });\r\n  if (items.length) {\r\n    newPoints.push(items);\r\n  }\r\n\r\n  return newPoints;\r\n}\r\n\r\nfunction calLegendData(series, opts, config, chartData) {\r\n  let legendData = {\r\n    area: {\r\n      start: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      end: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      width: 0,\r\n      height: 0,\r\n      wholeWidth: 0,\r\n      wholeHeight: 0\r\n    },\r\n    points: [],\r\n    widthArr: [],\r\n    heightArr: []\r\n  };\r\n  if (opts.legend.show === false) {\r\n    chartData.legendData = legendData;\r\n    return legendData;\r\n  }\r\n\r\n  let padding = opts.legend.padding;\r\n  let margin = opts.legend.margin;\r\n  let fontSize = opts.legend.fontSize;\r\n  let shapeWidth = 15 * opts.pixelRatio;\r\n  let shapeRight = 5 * opts.pixelRatio;\r\n  let lineHeight = Math.max(opts.legend.lineHeight * opts.pixelRatio, fontSize);\r\n  if (opts.legend.position == 'top' || opts.legend.position == 'bottom') {\r\n    let legendList = [];\r\n    let widthCount = 0;\r\n    let widthCountArr = [];\r\n    let currentRow = [];\r\n    for (let i = 0; i < series.length; i++) {\r\n      let item = series[i];\r\n      let itemWidth = shapeWidth + shapeRight + measureText(item.name || 'undefined', fontSize) + opts.legend.itemGap;\r\n      if (widthCount + itemWidth > opts.width - opts.padding[1] - opts.padding[3]) {\r\n        legendList.push(currentRow);\r\n        widthCountArr.push(widthCount - opts.legend.itemGap);\r\n        widthCount = itemWidth;\r\n        currentRow = [item];\r\n      } else {\r\n        widthCount += itemWidth;\r\n        currentRow.push(item);\r\n      }\r\n    }\r\n    if (currentRow.length) {\r\n      legendList.push(currentRow);\r\n      widthCountArr.push(widthCount - opts.legend.itemGap);\r\n      legendData.widthArr = widthCountArr;\r\n      let legendWidth = Math.max.apply(null, widthCountArr);\r\n      switch (opts.legend.float) {\r\n        case 'left':\r\n          legendData.area.start.x = opts.padding[3];\r\n          legendData.area.end.x = opts.padding[3] + 2 * padding;\r\n          break;\r\n        case 'right':\r\n          legendData.area.start.x = opts.width - opts.padding[1] - legendWidth - 2 * padding;\r\n          legendData.area.end.x = opts.width - opts.padding[1];\r\n          break;\r\n        default:\r\n          legendData.area.start.x = (opts.width - legendWidth) / 2 - padding;\r\n          legendData.area.end.x = (opts.width + legendWidth) / 2 + padding;\r\n      }\r\n      legendData.area.width = legendWidth + 2 * padding;\r\n      legendData.area.wholeWidth = legendWidth + 2 * padding;\r\n      legendData.area.height = legendList.length * lineHeight + 2 * padding;\r\n      legendData.area.wholeHeight = legendList.length * lineHeight + 2 * padding + 2 * margin;\r\n      legendData.points = legendList;\r\n    }\r\n  } else {\r\n    let len = series.length;\r\n    let maxHeight = opts.height - opts.padding[0] - opts.padding[2] - 2 * margin - 2 * padding;\r\n    let maxLength = Math.min(Math.floor(maxHeight / lineHeight), len);\r\n    legendData.area.height = maxLength * lineHeight + padding * 2;\r\n    legendData.area.wholeHeight = maxLength * lineHeight + padding * 2;\r\n    switch (opts.legend.float) {\r\n      case 'top':\r\n        legendData.area.start.y = opts.padding[0] + margin;\r\n        legendData.area.end.y = opts.padding[0] + margin + legendData.area.height;\r\n        break;\r\n      case 'bottom':\r\n        legendData.area.start.y = opts.height - opts.padding[2] - margin - legendData.area.height;\r\n        legendData.area.end.y = opts.height - opts.padding[2] - margin;\r\n        break;\r\n      default:\r\n        legendData.area.start.y = (opts.height - legendData.area.height) / 2;\r\n        legendData.area.end.y = (opts.height + legendData.area.height) / 2;\r\n    }\r\n    let lineNum = len % maxLength === 0 ? len / maxLength : Math.floor((len / maxLength) + 1);\r\n    let currentRow = [];\r\n    for (let i = 0; i < lineNum; i++) {\r\n      let temp = series.slice(i * maxLength, i * maxLength + maxLength);\r\n      currentRow.push(temp);\r\n    }\r\n\r\n    legendData.points = currentRow;\r\n\r\n    if (currentRow.length) {\r\n      for (let i = 0; i < currentRow.length; i++) {\r\n        let item = currentRow[i];\r\n        let maxWidth = 0;\r\n        for (let j = 0; j < item.length; j++) {\r\n          let itemWidth = shapeWidth + shapeRight + measureText(item[j].name || 'undefined', fontSize) + opts.legend.itemGap;\r\n          if (itemWidth > maxWidth) {\r\n            maxWidth = itemWidth;\r\n          }\r\n        }\r\n        legendData.widthArr.push(maxWidth);\r\n        legendData.heightArr.push(item.length * lineHeight + padding * 2);\r\n      }\r\n      let legendWidth = 0\r\n      for (let i = 0; i < legendData.widthArr.length; i++) {\r\n        legendWidth += legendData.widthArr[i];\r\n      }\r\n      legendData.area.width = legendWidth - opts.legend.itemGap + 2 * padding;\r\n      legendData.area.wholeWidth = legendData.area.width + padding;\r\n    }\r\n  }\r\n\r\n  switch (opts.legend.position) {\r\n    case 'top':\r\n      legendData.area.start.y = opts.padding[0] + margin;\r\n      legendData.area.end.y = opts.padding[0] + margin + legendData.area.height;\r\n      break;\r\n    case 'bottom':\r\n      legendData.area.start.y = opts.height - opts.padding[2] - legendData.area.height - margin;\r\n      legendData.area.end.y = opts.height - opts.padding[2] - margin;\r\n      break;\r\n    case 'left':\r\n      legendData.area.start.x = opts.padding[3];\r\n      legendData.area.end.x = opts.padding[3] + legendData.area.width;\r\n      break;\r\n    case 'right':\r\n      legendData.area.start.x = opts.width - opts.padding[1] - legendData.area.width;\r\n      legendData.area.end.x = opts.width - opts.padding[1];\r\n      break;\r\n  }\r\n  chartData.legendData = legendData;\r\n  return legendData;\r\n}\r\n\r\nfunction calCategoriesData(categories, opts, config, eachSpacing) {\r\n  var result = {\r\n    angle: 0,\r\n    xAxisHeight: config.xAxisHeight\r\n  };\r\n  var categoriesTextLenth = categories.map(function(item) {\r\n    return measureText(item,opts.xAxis.fontSize||config.fontSize);\r\n  });\r\n  var maxTextLength = Math.max.apply(this, categoriesTextLenth);\r\n\r\n  if (opts.xAxis.rotateLabel == true && maxTextLength + 2 * config.xAxisTextPadding > eachSpacing) {\r\n    result.angle = 45 * Math.PI / 180;\r\n    result.xAxisHeight = 2 * config.xAxisTextPadding + maxTextLength * Math.sin(result.angle);\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction getXAxisTextList(series, opts, config) {\r\n  var index = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : -1;\r\n  var data = dataCombine(series);\r\n  var sorted = [];\r\n  // remove null from data\r\n  data = data.filter(function(item) {\r\n    //return item !== null;\r\n    if (typeof item === 'object' && item !== null) {\r\n      if (item.constructor.toString().indexOf('Array')>-1) {\r\n        return item !== null;\r\n      } else {\r\n        return item.value !== null;\r\n      }\r\n    } else {\r\n      return item !== null;\r\n    }\r\n  });\r\n  data.map(function(item) {\r\n    if (typeof item === 'object') {\r\n      if (item.constructor.toString().indexOf('Array')>-1) {\r\n\t\t\t\tif(opts.type=='candle'){\r\n\t\t\t\t\titem.map(function(subitem) {\r\n\t\t\t\t\t  sorted.push(subitem);\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsorted.push(item[0]);\r\n\t\t\t\t}\r\n      } else {\r\n        sorted.push(item.value);\r\n      }\r\n    } else {\r\n      sorted.push(item);\r\n    }\r\n  })\r\n\t\r\n  var minData = 0;\r\n  var maxData = 0;\r\n  if (sorted.length > 0) {\r\n    minData = Math.min.apply(this, sorted);\r\n    maxData = Math.max.apply(this, sorted);\r\n  }\r\n  //为了兼容v1.9.0之前的项目\r\n  if(index>-1){\r\n    if (typeof opts.xAxis.data[index].min === 'number') {\r\n      minData = Math.min(opts.xAxis.data[index].min, minData);\r\n    }\r\n    if (typeof opts.xAxis.data[index].max === 'number') {\r\n      maxData = Math.max(opts.xAxis.data[index].max, maxData);\r\n    }\r\n  }else{\r\n    if (typeof opts.xAxis.min === 'number') {\r\n      minData = Math.min(opts.xAxis.min, minData);\r\n    }\r\n    if (typeof opts.xAxis.max === 'number') {\r\n      maxData = Math.max(opts.xAxis.max, maxData);\r\n    }\r\n  }\r\n  \r\n\r\n  if (minData === maxData) {\r\n    var rangeSpan = maxData || 10;\r\n    maxData += rangeSpan;\r\n  }\r\n\r\n  //var dataRange = getDataRange(minData, maxData);\r\n  var minRange = minData;\r\n  var maxRange = maxData;\r\n\r\n  var range = [];\r\n  var eachRange = (maxRange - minRange) / opts.xAxis.splitNumber;\r\n\r\n  for (var i = 0; i <= opts.xAxis.splitNumber; i++) {\r\n    range.push(minRange + eachRange * i);\r\n  }\r\n  return range;\r\n}\r\n\r\nfunction calXAxisData(series, opts, config){\r\n    var result = {\r\n        angle: 0,\r\n        xAxisHeight: config.xAxisHeight\r\n    };\r\n\r\n    result.ranges = getXAxisTextList(series, opts, config);\r\n    result.rangesFormat = result.ranges.map(function(item){\r\n        item = opts.xAxis.format? opts.xAxis.format(item):util.toFixed(item, 2);\r\n        return item;\r\n    });\r\n\t\t\r\n    var xAxisScaleValues = result.ranges.map(function (item) {\r\n        // 如果刻度值是浮点数,则保留两位小数\r\n        item = util.toFixed(item, 2);\r\n        // 若有自定义格式则调用自定义的格式化函数\r\n        item = opts.xAxis.format ? opts.xAxis.format(Number(item)) : item;\r\n        return item;\r\n    });\r\n\r\n    result = Object.assign(result,getXAxisPoints(xAxisScaleValues, opts, config));\r\n    // 计算X轴刻度的属性譬如每个刻度的间隔,刻度的起始点\\结束点以及总长\r\n    var eachSpacing = result.eachSpacing;\r\n\r\n    var textLength = xAxisScaleValues.map(function (item) {\r\n        return measureText(item);\r\n    });\r\n    \r\n    // get max length of categories text\r\n    var maxTextLength = Math.max.apply(this, textLength);\r\n\r\n    // 如果刻度值文本内容过长,则将其逆时针旋转45°\r\n    if (maxTextLength + 2 * config.xAxisTextPadding > eachSpacing) {\r\n        result.angle = 45 * Math.PI / 180;\r\n        result.xAxisHeight = 2 * config.xAxisTextPadding + maxTextLength * Math.sin(result.angle);\r\n    }\r\n\r\n    if (opts.xAxis.disabled === true) {\r\n        result.xAxisHeight = 0;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction getRadarDataPoints(angleList, center, radius, series, opts) {\r\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\r\n\r\n  var radarOption = opts.extra.radar || {};\r\n  radarOption.max = radarOption.max || 0;\r\n  var maxData = Math.max(radarOption.max, Math.max.apply(null, dataCombine(series)));\r\n\r\n  var data = [];\r\n  for (let i = 0; i < series.length; i++) {\r\n    let each = series[i];\r\n    let listItem = {};\r\n    listItem.color = each.color;\r\n\t\tlistItem.legendShape = each.legendShape;\r\n\t\tlistItem.pointShape = each.pointShape;\r\n    listItem.data = [];\r\n    each.data.forEach(function(item, index) {\r\n      let tmp = {};\r\n      tmp.angle = angleList[index];\r\n\r\n      tmp.proportion = item / maxData;\r\n      tmp.position = convertCoordinateOrigin(radius * tmp.proportion * process * Math.cos(tmp.angle), radius * tmp.proportion *\r\n        process * Math.sin(tmp.angle), center);\r\n      listItem.data.push(tmp);\r\n    });\r\n\r\n    data.push(listItem);\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction getPieDataPoints(series, radius) {\r\n  var process = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\r\n\r\n  var count = 0;\r\n  var _start_ = 0;\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    count += item.data;\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    if (count === 0) {\r\n      item._proportion_ = 1 / series.length * process;\r\n    } else {\r\n      item._proportion_ = item.data / count * process;\r\n    }\r\n    item._radius_ = radius;\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item._start_ = _start_;\r\n    _start_ += 2 * item._proportion_ * Math.PI;\r\n  }\r\n\r\n  return series;\r\n}\r\n\r\nfunction getFunnelDataPoints(series, radius) {\r\n  var process = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\r\n  series = series.sort(function(a,b){return parseInt(b.data)-parseInt(a.data);});\r\n  for (let i = 0; i < series.length; i++) {\r\n    series[i].radius = series[i].data/series[0].data*radius*process;\r\n    series[i]._proportion_ = series[i].data/series[0].data;\r\n  }\r\n  return series.reverse();\r\n}\r\n\r\nfunction getRoseDataPoints(series, type, minRadius, radius) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var count = 0;\r\n  var _start_ = 0;\r\n\r\n  var dataArr = [];\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    count += item.data;\r\n    dataArr.push(item.data);\r\n  }\r\n  \r\n  var minData = Math.min.apply(null, dataArr);\r\n  var maxData = Math.max.apply(null, dataArr);\r\n  var radiusLength = radius - minRadius;\r\n  \r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    if (count === 0 || type == 'area') {\r\n      item._proportion_ = item.data / count * process;\r\n      item._rose_proportion_ = 1 / series.length * process;\r\n    } else {\r\n      item._proportion_ = item.data / count * process;\r\n      item._rose_proportion_ = item.data / count * process;\r\n    }\r\n    item._radius_ = minRadius + radiusLength * ((item.data - minData) / (maxData - minData));\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item._start_ = _start_;\r\n    _start_ += 2 * item._rose_proportion_ * Math.PI;\r\n  }\r\n\r\n  return series;\r\n}\r\n\r\nfunction getArcbarDataPoints(series, arcbarOption) {\r\n  var process = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\r\n  if (process == 1) {\r\n    process = 0.999999;\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    let totalAngle;\r\n    if (arcbarOption.type == 'circle') {\r\n      totalAngle = 2;\r\n    } else {\r\n\t\t\tif (arcbarOption.endAngle < arcbarOption.startAngle) {\r\n\t\t\t  totalAngle = 2 + arcbarOption.endAngle - arcbarOption.startAngle;\r\n\t\t\t} else{\r\n\t\t\t  totalAngle = arcbarOption.startAngle - arcbarOption.endAngle;\r\n\t\t\t}\r\n    }\r\n    item._proportion_ = totalAngle * item.data * process + arcbarOption.startAngle;\r\n    if (item._proportion_ >= 2) {\r\n      item._proportion_ = item._proportion_ % 2;\r\n    }\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction getGaugeAxisPoints(categories, startAngle, endAngle) {\r\n  let totalAngle = startAngle - endAngle + 1;\r\n  let tempStartAngle = startAngle;\r\n  for (let i = 0; i < categories.length; i++) {\r\n    categories[i].value = categories[i].value === null ? 0 : categories[i].value;\r\n    categories[i]._startAngle_ = tempStartAngle;\r\n    categories[i]._endAngle_ = totalAngle * categories[i].value + startAngle;\r\n    if (categories[i]._endAngle_ >= 2) {\r\n      categories[i]._endAngle_ = categories[i]._endAngle_ % 2;\r\n    }\r\n    tempStartAngle = categories[i]._endAngle_;\r\n  }\r\n  return categories;\r\n}\r\n\r\nfunction getGaugeDataPoints(series, categories, gaugeOption) {\r\n  let process = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    if (gaugeOption.pointer.color == 'auto') {\r\n      for (let i = 0; i < categories.length; i++) {\r\n        if (item.data <= categories[i].value) {\r\n          item.color = categories[i].color;\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      item.color = gaugeOption.pointer.color;\r\n    }\r\n    let totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n    item._endAngle_ = totalAngle * item.data + gaugeOption.startAngle;\r\n    item._oldAngle_ = gaugeOption.oldAngle;\r\n    if (gaugeOption.oldAngle < gaugeOption.endAngle) {\r\n      item._oldAngle_ += 2;\r\n    }\r\n    if (item.data >= gaugeOption.oldData) {\r\n      item._proportion_ = (item._endAngle_ - item._oldAngle_) * process + gaugeOption.oldAngle;\r\n    } else {\r\n      item._proportion_ = item._oldAngle_ - (item._oldAngle_ - item._endAngle_) * process;\r\n    }\r\n    if (item._proportion_ >= 2) {\r\n      item._proportion_ = item._proportion_ % 2;\r\n    }\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction getPieTextMaxLength(series) {\r\n  series = getPieDataPoints(series);\r\n  let maxLength = 0;\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    let text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\r\n    maxLength = Math.max(maxLength, measureText(text));\r\n  }\r\n\r\n  return maxLength;\r\n}\r\n\r\nfunction fixColumeData(points, eachSpacing, columnLen, index, config, opts) {\r\n  return points.map(function(item) {\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    item.width = Math.ceil((eachSpacing - 2 * config.columePadding) / columnLen);\r\n\r\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.column.width);\r\n    }\r\n    if (item.width <= 0) {\r\n      item.width = 1;\r\n    }\r\n    item.x += (index + 0.5 - columnLen / 2) * item.width;\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction fixColumeMeterData(points, eachSpacing, columnLen, index, config, opts, border) {\r\n  return points.map(function(item) {\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    item.width = Math.ceil((eachSpacing - 2 * config.columePadding) / 2);\r\n\r\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.column.width);\r\n    }\r\n\r\n    if (index > 0) {\r\n      item.width -= 2 * border;\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction fixColumeStackData(points, eachSpacing, columnLen, index, config, opts, series) {\r\n\r\n  return points.map(function(item, indexn) {\r\n\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    item.width = Math.ceil((eachSpacing - 2 * config.columePadding) / 2);\r\n\r\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.column.width);\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction getXAxisPoints(categories, opts, config) {\r\n  var spacingValid = opts.width - opts.area[1] - opts.area[3];\r\n  var dataCount = opts.enableScroll ? Math.min(opts.xAxis.itemCount, categories.length) : categories.length;\r\n  if((opts.type=='line' || opts.type=='area') && dataCount>1 && opts.xAxis.boundaryGap=='justify'){\r\n    dataCount -=1;\r\n  }\r\n  var eachSpacing = spacingValid / dataCount;\r\n\r\n  var xAxisPoints = [];\r\n  var startX = opts.area[3];\r\n  var endX = opts.width - opts.area[1];\r\n  categories.forEach(function(item, index) {\r\n    xAxisPoints.push(startX + index * eachSpacing);\r\n  });\r\n  if(opts.xAxis.boundaryGap !=='justify'){\r\n    if (opts.enableScroll === true) {\r\n      xAxisPoints.push(startX + categories.length * eachSpacing);\r\n    } else {\r\n      xAxisPoints.push(endX);\r\n    }\r\n  }\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    startX: startX,\r\n    endX: endX,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\r\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\r\n  var points = [];\r\n  var validHeight = opts.height - opts.area[0] - opts.area[2];\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var cPoints = [];\r\n      item.forEach(function(items, indexs) {\r\n        var point = {};\r\n        point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\r\n        var value = items.value || items;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        height *= process;\r\n        point.y = opts.height - Math.round(height) - opts.area[2];\r\n        cPoints.push(point);\r\n      });\r\n      points.push(cPoints);\r\n    }\r\n  });\r\n\r\n  return points;\r\n}\r\n\r\nfunction getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\r\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\r\n  var boundaryGap='center';\r\n  if (opts.type == 'line'||opts.type == 'area'){\r\n    boundaryGap=opts.xAxis.boundaryGap;\r\n  }\r\n  var points = [];\r\n  var validHeight = opts.height - opts.area[0] - opts.area[2];\r\n\tvar validWidth = opts.width - opts.area[1] - opts.area[3];\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var point = {};\r\n      point.color = item.color;\r\n      point.x = xAxisPoints[index];\r\n      var value = item;\r\n      if (typeof item === 'object' && item !== null) {\r\n\t\t\t\tif (item.constructor.toString().indexOf('Array')>-1) {\r\n\t\t\t\t\tlet xranges,xminRange,xmaxRange;\r\n\t\t\t\t\txranges = [].concat(opts.chartData.xAxisData.ranges);\r\n\t\t\t\t\txminRange = xranges.shift();\r\n\t\t\t\t\txmaxRange = xranges.pop();\r\n\t\t\t\t  value = item[1];\r\n\t\t\t\t\tpoint.x = opts.area[3]+ validWidth * (item[0] - xminRange) / (xmaxRange - xminRange);\r\n\t\t\t\t} else {\r\n\t\t\t\t  value = item.value;\r\n\t\t\t\t}\r\n      }\r\n\t\t\tif(boundaryGap=='center'){\r\n\t\t\t  point.x += Math.round(eachSpacing / 2);\r\n\t\t\t}\r\n      var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n      height *= process;\r\n      point.y = opts.height - Math.round(height) - opts.area[2];\r\n      points.push(point);\r\n    }\r\n  });\r\n\r\n  return points;\r\n}\r\n\r\nfunction getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, stackSeries) {\r\n  var process = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 1;\r\n  var points = [];\r\n  var validHeight = opts.height - opts.area[0] - opts.area[2];\r\n\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var point = {};\r\n      point.color = item.color;\r\n      point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\r\n\r\n      if (seriesIndex > 0) {\r\n        var value = 0;\r\n        for (let i = 0; i <= seriesIndex; i++) {\r\n          value += stackSeries[i].data[index];\r\n        }\r\n        var value0 = value - item;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        var height0 = validHeight * (value0 - minRange) / (maxRange - minRange);\r\n      } else {\r\n        var value = item;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        var height0 = 0;\r\n      }\r\n      var heightc = height0;\r\n      height *= process;\r\n      heightc *= process;\r\n      point.y = opts.height - Math.round(height) - opts.area[2];\r\n      point.y0 = opts.height - Math.round(heightc) - opts.area[2];\r\n      points.push(point);\r\n    }\r\n  });\r\n\r\n  return points;\r\n}\r\n\r\nfunction getYAxisTextList(series, opts, config, stack) {\r\n  var index = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : -1;\r\n  var data;\r\n  if (stack == 'stack') {\r\n    data = dataCombineStack(series, opts.categories.length);\r\n  } else {\r\n    data = dataCombine(series);\r\n  }\r\n  var sorted = [];\r\n  // remove null from data\r\n  data = data.filter(function(item) {\r\n    //return item !== null;\r\n    if (typeof item === 'object' && item !== null) {\r\n      if (item.constructor.toString().indexOf('Array')>-1) {\r\n        return item !== null;\r\n      } else {\r\n        return item.value !== null;\r\n      }\r\n    } else {\r\n      return item !== null;\r\n    }\r\n  });\r\n  data.map(function(item) {\r\n    if (typeof item === 'object') {\r\n      if (item.constructor.toString().indexOf('Array')>-1) {\r\n\t\t\t\tif(opts.type=='candle'){\r\n\t\t\t\t\titem.map(function(subitem) {\r\n\t\t\t\t\t  sorted.push(subitem);\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsorted.push(item[1]);\r\n\t\t\t\t}\r\n      } else {\r\n        sorted.push(item.value);\r\n      }\r\n    } else {\r\n      sorted.push(item);\r\n    }\r\n  })\r\n\t\r\n  var minData = 0;\r\n  var maxData = 0;\r\n  if (sorted.length > 0) {\r\n    minData = Math.min.apply(this, sorted);\r\n    maxData = Math.max.apply(this, sorted);\r\n  }\r\n  //为了兼容v1.9.0之前的项目\r\n  if(index>-1){\r\n    if (typeof opts.yAxis.data[index].min === 'number') {\r\n      minData = Math.min(opts.yAxis.data[index].min, minData);\r\n    }\r\n    if (typeof opts.yAxis.data[index].max === 'number') {\r\n      maxData = Math.max(opts.yAxis.data[index].max, maxData);\r\n    }\r\n  }else{\r\n    if (typeof opts.yAxis.min === 'number') {\r\n      minData = Math.min(opts.yAxis.min, minData);\r\n    }\r\n    if (typeof opts.yAxis.max === 'number') {\r\n      maxData = Math.max(opts.yAxis.max, maxData);\r\n    }\r\n  }\r\n  \r\n\r\n  if (minData === maxData) {\r\n    var rangeSpan = maxData || 10;\r\n    maxData += rangeSpan;\r\n  }\r\n\r\n  var dataRange = getDataRange(minData, maxData);\r\n  var minRange = dataRange.minRange;\r\n  var maxRange = dataRange.maxRange;\r\n\r\n  var range = [];\r\n  var eachRange = (maxRange - minRange) / opts.yAxis.splitNumber;\r\n\r\n  for (var i = 0; i <= opts.yAxis.splitNumber; i++) {\r\n    range.push(minRange + eachRange * i);\r\n  }\r\n  return range.reverse();\r\n}\r\n\r\nfunction calYAxisData(series, opts, config) {\r\n  //堆叠图重算Y轴\r\n  var columnstyle = assign({}, {\r\n    type: \"\"\r\n  }, opts.extra.column);\r\n  //如果是多Y轴，重新计算\r\n  var YLength = opts.yAxis.data.length;\r\n  var newSeries=new Array(YLength);\r\n  if(YLength>0){\r\n    for(let i=0;i<YLength;i++){\r\n      newSeries[i]=[];\r\n      for(let j=0;j<series.length;j++){\r\n        if(series[j].index == i){\r\n          newSeries[i].push(series[j]);\r\n        }\r\n      }\r\n    }\r\n    var rangesArr =new Array(YLength);\r\n    var rangesFormatArr = new Array(YLength);\r\n    var yAxisWidthArr =new Array(YLength);\r\n\t\t\r\n    for(let i=0;i<YLength;i++){\r\n      let yData = opts.yAxis.data[i];\r\n\t\t\t//如果总开关不显示，强制每个Y轴为不显示\r\n\t\t\tif(opts.yAxis.disabled == true){\r\n\t\t\t\tyData.disabled = true;\r\n\t\t\t}\r\n\t\t\trangesArr[i]=getYAxisTextList(newSeries[i], opts, config, columnstyle.type,i);\r\n\t\t\tlet yAxisFontSizes = yData.fontSize || config.fontSize;\r\n\t\t\tyAxisWidthArr[i] = {position:yData.position?yData.position:'left',width:0};\r\n\t\t\trangesFormatArr[i]= rangesArr[i].map(function(items) {\r\n\t\t\t\titems = util.toFixed(items, 6);\r\n\t\t\t\titems = yData.format ? yData.format(Number(items)) : items;\r\n\t\t\t\tyAxisWidthArr[i].width = Math.max(yAxisWidthArr[i].width, measureText(items, yAxisFontSizes) + 5);\r\n\t\t\t\treturn items;\r\n\t\t\t});\r\n\t\t\tlet calibration= yData.calibration? 4*opts.pixelRatio : 0 ;\r\n\t\t\tyAxisWidthArr[i].width += calibration +3*opts.pixelRatio;\r\n      if (yData.disabled === true) {\r\n        yAxisWidthArr[i].width=0;\r\n      }\r\n    }\r\n    \r\n  }else{\r\n    var rangesArr =new Array(1);\r\n    var rangesFormatArr = new Array(1);\r\n    var yAxisWidthArr =new Array(1);\r\n\t\trangesArr[0] = getYAxisTextList(series, opts, config, columnstyle.type);\r\n\t\tyAxisWidthArr[0] = {position:'left',width:0};\r\n\t\tvar yAxisFontSize = opts.yAxis.fontSize || config.fontSize;\r\n\t\trangesFormatArr[0] = rangesArr[0].map(function(item) {\r\n\t\t\titem = util.toFixed(item, 6);\r\n\t\t\titem = opts.yAxis.format ? opts.yAxis.format(Number(item)) : item;\r\n\t\t\tyAxisWidthArr[0].width = Math.max(yAxisWidthArr[0].width, measureText(item, yAxisFontSize) + 5);\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\tyAxisWidthArr[0].width += 3*opts.pixelRatio;\r\n\t\tif (opts.yAxis.disabled === true) {\r\n\t\t  yAxisWidthArr[0] = {position:'left',width:0};\r\n\t\t  opts.yAxis.data[0]={disabled:true};\r\n\t\t}else{\r\n\t\t\topts.yAxis.data[0]={disabled:false,position:'left',max:opts.yAxis.max,min:opts.yAxis.min,format:opts.yAxis.format};\r\n\t\t}\r\n    \r\n  }\r\n\r\n  return {\r\n    rangesFormat: rangesFormatArr,\r\n    ranges: rangesArr,\r\n    yAxisWidth: yAxisWidthArr\r\n  };\r\n  \r\n}\r\n\r\nfunction calTooltipYAxisData(point, series, opts, config, eachSpacing) {\r\n  let ranges = [].concat(opts.chartData.yAxisData.ranges);\r\n  let spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  let minAxis = opts.area[0];\r\n  let items=[];\r\n  for(let i=0;i<ranges.length;i++){\r\n    let maxVal = ranges[i].shift();\r\n    let minVal = ranges[i].pop();\r\n    let item = maxVal - (maxVal - minVal) * (point - minAxis) / spacingValid;\r\n    item = opts.yAxis.data[i].format ? opts.yAxis.data[i].format(Number(item)) : item.toFixed(0);\r\n    items.push(String(item))\r\n  }\r\n  return items;\r\n}\r\n\r\nfunction calMarkLineData(points, opts) {\r\n  let minRange, maxRange;\r\n  let spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  for (let i = 0; i < points.length; i++) {\r\n    points[i].yAxisIndex = points[i].yAxisIndex ? points[i].yAxisIndex:0;\r\n    let range = [].concat(opts.chartData.yAxisData.ranges[points[i].yAxisIndex]);\r\n    minRange = range.pop();\r\n    maxRange = range.shift();\r\n    let height = spacingValid * (points[i].value - minRange) / (maxRange - minRange);\r\n    points[i].y = opts.height - Math.round(height) - opts.area[2];\r\n  }\r\n  return points;\r\n}\r\n\r\nfunction contextRotate(context, opts) {\r\n  if (opts.rotateLock !== true) {\r\n    context.translate(opts.height, 0);\r\n    context.rotate(90 * Math.PI / 180);\r\n  } else if (opts._rotate_ !== true) {\r\n    context.translate(opts.height, 0);\r\n    context.rotate(90 * Math.PI / 180);\r\n    opts._rotate_ = true;\r\n  }\r\n}\r\n\r\nfunction drawPointShape(points, color, shape, context, opts) {\r\n  context.beginPath();\r\n\tif(opts.dataPointShapeType == 'hollow'){\r\n\t\tcontext.setStrokeStyle(color);\r\n\t\tcontext.setFillStyle(opts.background);\r\n\t\tcontext.setLineWidth(2 * opts.pixelRatio);\r\n\t}else{\r\n\t\tcontext.setStrokeStyle(\"#ffffff\");\r\n\t\tcontext.setFillStyle(color);\r\n\t\tcontext.setLineWidth(1 * opts.pixelRatio);\r\n\t}\r\n  if (shape === 'diamond') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x, item.y - 4.5);\r\n        context.lineTo(item.x - 4.5, item.y);\r\n        context.lineTo(item.x, item.y + 4.5);\r\n        context.lineTo(item.x + 4.5, item.y);\r\n        context.lineTo(item.x, item.y - 4.5);\r\n      }\r\n    });\r\n  } else if (shape === 'circle') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x + 2.5 * opts.pixelRatio, item.y);\r\n        context.arc(item.x, item.y, 3 * opts.pixelRatio, 0, 2 * Math.PI, false);\r\n      }\r\n    });\r\n  } else if (shape === 'rect') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x - 3.5, item.y - 3.5);\r\n        context.rect(item.x - 3.5, item.y - 3.5, 7, 7);\r\n      }\r\n    });\r\n  } else if (shape === 'triangle') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x, item.y - 4.5);\r\n        context.lineTo(item.x - 4.5, item.y + 4.5);\r\n        context.lineTo(item.x + 4.5, item.y + 4.5);\r\n        context.lineTo(item.x, item.y - 4.5);\r\n      }\r\n    });\r\n  }\r\n  context.closePath();\r\n  context.fill();\r\n  context.stroke();\r\n}\r\n\r\nfunction drawRingTitle(opts, config, context, center) {\r\n  var titlefontSize = opts.title.fontSize || config.titleFontSize;\r\n  var subtitlefontSize = opts.subtitle.fontSize || config.subtitleFontSize;\r\n  var title = opts.title.name || '';\r\n  var subtitle = opts.subtitle.name || '';\r\n  var titleFontColor = opts.title.color || config.titleColor;\r\n  var subtitleFontColor = opts.subtitle.color || config.subtitleColor;\r\n  var titleHeight = title ? titlefontSize : 0;\r\n  var subtitleHeight = subtitle ? subtitlefontSize : 0;\r\n  var margin = 5;\r\n\r\n  if (subtitle) {\r\n    var textWidth = measureText(subtitle, subtitlefontSize);\r\n    var startX = center.x - textWidth / 2 + (opts.subtitle.offsetX || 0);\r\n    var startY = center.y + subtitlefontSize / 2 + (opts.subtitle.offsetY || 0);\r\n    if (title) {\r\n      startY += (titleHeight + margin) / 2;\r\n    }\r\n    context.beginPath();\r\n    context.setFontSize(subtitlefontSize);\r\n    context.setFillStyle(subtitleFontColor);\r\n    context.fillText(subtitle, startX, startY);\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n  if (title) {\r\n    var _textWidth = measureText(title, titlefontSize);\r\n    var _startX = center.x - _textWidth / 2 + (opts.title.offsetX || 0);\r\n    var _startY = center.y + titlefontSize / 2 + (opts.title.offsetY || 0);\r\n    if (subtitle) {\r\n      _startY -= (subtitleHeight + margin) / 2;\r\n    }\r\n    context.beginPath();\r\n    context.setFontSize(titlefontSize);\r\n    context.setFillStyle(titleFontColor);\r\n    context.fillText(title, _startX, _startY);\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nfunction drawPointText(points, series, config, context) {\r\n  // 绘制数据文案\r\n  var data = series.data;\r\n  points.forEach(function(item, index) {\r\n    if (item !== null) {\r\n      //var formatVal = series.format ? series.format(data[index]) : data[index];\r\n      context.beginPath();\r\n      context.setFontSize(series.textSize || config.fontSize);\r\n      context.setFillStyle(series.textColor || '#666666');\r\n      var value = data[index]\r\n      if (typeof data[index] === 'object' && data[index] !== null) {\r\n\t\t\t\tif (data[index].constructor == Array) {\r\n\t\t\t\t\tvalue = data[index][1];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvalue = data[index].value\r\n\t\t\t\t}\r\n      }\r\n      var formatVal = series.format ? series.format(value) : value;\r\n      context.fillText(String(formatVal), item.x - measureText(formatVal, series.textSize || config.fontSize) / 2, item.y -4);\r\n      context.closePath();\r\n      context.stroke();\r\n    }\r\n  });\r\n\r\n}\r\n\r\nfunction drawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context) {\r\n  radius -= gaugeOption.width / 2 + config.gaugeLabelTextMargin;\r\n\r\n  let totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n  let splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\r\n  let totalNumber = gaugeOption.endNumber - gaugeOption.startNumber;\r\n  let splitNumber = totalNumber / gaugeOption.splitLine.splitNumber;\r\n  let nowAngle = gaugeOption.startAngle;\r\n  let nowNumber = gaugeOption.startNumber;\r\n  for (let i = 0; i < gaugeOption.splitLine.splitNumber + 1; i++) {\r\n    var pos = {\r\n      x: radius * Math.cos(nowAngle * Math.PI),\r\n      y: radius * Math.sin(nowAngle * Math.PI)\r\n    };\r\n    var labelText = gaugeOption.labelFormat ? gaugeOption.labelFormat(nowNumber) : nowNumber;\r\n    pos.x += centerPosition.x - measureText(labelText) / 2;\r\n    pos.y += centerPosition.y;\r\n    var startX = pos.x;\r\n    var startY = pos.y;\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(gaugeOption.labelColor || '#666666');\r\n    context.fillText(labelText, startX, startY + config.fontSize / 2);\r\n    context.closePath();\r\n    context.stroke();\r\n\r\n    nowAngle += splitAngle;\r\n    if (nowAngle >= 2) {\r\n      nowAngle = nowAngle % 2;\r\n    }\r\n    nowNumber += splitNumber;\r\n  }\r\n\r\n}\r\n\r\nfunction drawRadarLabel(angleList, radius, centerPosition, opts, config, context) {\r\n  var radarOption = opts.extra.radar || {};\r\n  radius += config.radarLabelTextMargin;\r\n\r\n  angleList.forEach(function(angle, index) {\r\n    var pos = {\r\n      x: radius * Math.cos(angle),\r\n      y: radius * Math.sin(angle)\r\n    };\r\n    var posRelativeCanvas = convertCoordinateOrigin(pos.x, pos.y, centerPosition);\r\n    var startX = posRelativeCanvas.x;\r\n    var startY = posRelativeCanvas.y;\r\n    if (util.approximatelyEqual(pos.x, 0)) {\r\n      startX -= measureText(opts.categories[index] || '') / 2;\r\n    } else if (pos.x < 0) {\r\n      startX -= measureText(opts.categories[index] || '');\r\n    }\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(radarOption.labelColor || '#666666');\r\n    context.fillText(opts.categories[index] || '', startX, startY + config.fontSize / 2);\r\n    context.closePath();\r\n    context.stroke();\r\n  });\r\n\r\n}\r\n\r\nfunction drawPieText(series, opts, config, context, radius, center) {\r\n  var lineRadius = config.pieChartLinePadding;\r\n  var textObjectCollection = [];\r\n  var lastTextObject = null;\r\n\r\n  var seriesConvert = series.map(function(item) {\r\n    var text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_.toFixed(4) * 100) +'%';\r\n    if(item._rose_proportion_) item._proportion_=item._rose_proportion_;\r\n    var arc = 2 * Math.PI - (item._start_ + 2 * Math.PI * item._proportion_ / 2);\r\n    var color = item.color;\r\n    var radius = item._radius_;\r\n    return {\r\n      arc: arc,\r\n      text: text,\r\n      color: color,\r\n      radius: radius,\r\n      textColor: item.textColor,\r\n      textSize: item.textSize,\r\n    };\r\n  });\r\n  for (let i = 0; i < seriesConvert.length; i++) {\r\n    let item = seriesConvert[i];\r\n    // line end\r\n    let orginX1 = Math.cos(item.arc) * (item.radius + lineRadius);\r\n    let orginY1 = Math.sin(item.arc) * (item.radius + lineRadius);\r\n\r\n    // line start\r\n    let orginX2 = Math.cos(item.arc) * item.radius;\r\n    let orginY2 = Math.sin(item.arc) * item.radius;\r\n\r\n    // text start\r\n    let orginX3 = orginX1 >= 0 ? orginX1 + config.pieChartTextPadding : orginX1 - config.pieChartTextPadding;\r\n    let orginY3 = orginY1;\r\n    let textWidth = measureText(item.text,item.textSize||config.fontSize);\r\n    let startY = orginY3;\r\n\r\n    if (lastTextObject && util.isSameXCoordinateArea(lastTextObject.start, {\r\n        x: orginX3\r\n      })) {\r\n      if (orginX3 > 0) {\r\n        startY = Math.min(orginY3, lastTextObject.start.y);\r\n      } else if (orginX1 < 0) {\r\n        startY = Math.max(orginY3, lastTextObject.start.y);\r\n      } else {\r\n        if (orginY3 > 0) {\r\n          startY = Math.max(orginY3, lastTextObject.start.y);\r\n        } else {\r\n          startY = Math.min(orginY3, lastTextObject.start.y);\r\n        }\r\n      }\r\n    }\r\n    if (orginX3 < 0) {\r\n      orginX3 -= textWidth;\r\n    }\r\n\r\n    let textObject = {\r\n      lineStart: {\r\n        x: orginX2,\r\n        y: orginY2\r\n      },\r\n      lineEnd: {\r\n        x: orginX1,\r\n        y: orginY1\r\n      },\r\n      start: {\r\n        x: orginX3,\r\n        y: startY\r\n      },\r\n      width: textWidth,\r\n      height: config.fontSize,\r\n      text: item.text,\r\n      color: item.color,\r\n      textColor: item.textColor,\r\n      textSize: item.textSize\r\n    };\r\n    lastTextObject = avoidCollision(textObject, lastTextObject);\r\n    textObjectCollection.push(lastTextObject);\r\n  }\r\n\r\n  for (let i = 0; i < textObjectCollection.length; i++) {\r\n    let item = textObjectCollection[i];\r\n    let lineStartPoistion = convertCoordinateOrigin(item.lineStart.x, item.lineStart.y, center);\r\n    let lineEndPoistion = convertCoordinateOrigin(item.lineEnd.x, item.lineEnd.y, center);\r\n    let textPosition = convertCoordinateOrigin(item.start.x, item.start.y, center);\r\n    context.setLineWidth(1 * opts.pixelRatio);\r\n    context.setFontSize(config.fontSize);\r\n    context.beginPath();\r\n    context.setStrokeStyle(item.color);\r\n    context.setFillStyle(item.color);\r\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\r\n    let curveStartX = item.start.x < 0 ? textPosition.x + item.width : textPosition.x;\r\n    let textStartX = item.start.x < 0 ? textPosition.x - 5 : textPosition.x + 5;\r\n    context.quadraticCurveTo(lineEndPoistion.x, lineEndPoistion.y, curveStartX, textPosition.y);\r\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\r\n    context.stroke();\r\n    context.closePath();\r\n    context.beginPath();\r\n    context.moveTo(textPosition.x + item.width, textPosition.y);\r\n    context.arc(curveStartX, textPosition.y, 2, 0, 2 * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n    context.beginPath();\r\n    context.setFontSize(item.textSize || config.fontSize);\r\n    context.setFillStyle(item.textColor || '#666666');\r\n    context.fillText(item.text, textStartX, textPosition.y + 3);\r\n    context.closePath();\r\n    context.stroke();\r\n    context.closePath();\r\n  }\r\n}\r\n\r\nfunction drawToolTipSplitLine(offsetX, opts, config, context) {\r\n  var toolTipOption = opts.extra.tooltip || {};\r\n  toolTipOption.gridType = toolTipOption.gridType == undefined ? 'solid' : toolTipOption.gridType;\r\n  toolTipOption.dashLength = toolTipOption.dashLength == undefined ? 4 : toolTipOption.dashLength;\r\n  var startY = opts.area[0];\r\n  var endY = opts.height - opts.area[2];\r\n\r\n  if (toolTipOption.gridType == 'dash') {\r\n    context.setLineDash([toolTipOption.dashLength, toolTipOption.dashLength]);\r\n  }\r\n  context.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\r\n  context.setLineWidth(1 * opts.pixelRatio);\r\n  context.beginPath();\r\n  context.moveTo(offsetX, startY);\r\n  context.lineTo(offsetX, endY);\r\n  context.stroke();\r\n  context.setLineDash([]);\r\n\r\n  if (toolTipOption.xAxisLabel) {\r\n    let labelText = opts.categories[opts.tooltip.index];\r\n    context.setFontSize(config.fontSize);\r\n    let textWidth = measureText(labelText, config.fontSize);\r\n\r\n    let textX = offsetX - 0.5 * textWidth;\r\n    let textY = endY;\r\n    context.beginPath();\r\n    context.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\r\n    context.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\r\n    context.setLineWidth(1 * opts.pixelRatio);\r\n    context.rect(textX - config.toolTipPadding, textY, textWidth + 2 * config.toolTipPadding, config.fontSize + 2 * config.toolTipPadding);\r\n    context.closePath();\r\n    context.stroke();\r\n    context.fill();\r\n\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(toolTipOption.labelFontColor || config.fontColor);\r\n    context.fillText(String(labelText), textX, textY + config.toolTipPadding + config.fontSize);\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nfunction drawMarkLine(opts, config, context) {\r\n  let markLineOption = assign({}, {\r\n    type: 'solid',\r\n    dashLength: 4,\r\n    data: []\r\n  }, opts.extra.markLine);\r\n  let startX = opts.area[3];\r\n  let endX = opts.width - opts.area[1];\r\n  let points = calMarkLineData(markLineOption.data, opts);\r\n\r\n  for (let i = 0; i < points.length; i++) {\r\n    let item = assign({}, {\r\n      lineColor: '#DE4A42',\r\n      showLabel: false,\r\n      labelFontColor: '#666666',\r\n      labelBgColor: '#DFE8FF',\r\n      labelBgOpacity: 0.8,\r\n      yAxisIndex: 0\r\n    }, points[i]);\r\n\r\n    if (markLineOption.type == 'dash') {\r\n      context.setLineDash([markLineOption.dashLength, markLineOption.dashLength]);\r\n    }\r\n    context.setStrokeStyle(item.lineColor);\r\n    context.setLineWidth(1 * opts.pixelRatio);\r\n    context.beginPath();\r\n    context.moveTo(startX, item.y);\r\n    context.lineTo(endX, item.y);\r\n    context.stroke();\r\n    context.setLineDash([]);\r\n    if (item.showLabel) {\r\n      let labelText = opts.yAxis.format ? opts.yAxis.format(Number(item.value)) : item.value;\r\n      context.setFontSize(config.fontSize);\r\n      let textWidth = measureText(labelText, config.fontSize);\r\n      let bgStartX = opts.padding[3] + config.yAxisTitleWidth - config.toolTipPadding;\r\n      let bgEndX = Math.max(opts.area[3], textWidth + config.toolTipPadding * 2);\r\n      let bgWidth = bgEndX - bgStartX;\r\n\r\n      let textX = bgStartX + (bgWidth - textWidth) / 2;\r\n      let textY = item.y;\r\n      context.setFillStyle(hexToRgb(item.labelBgColor, item.labelBgOpacity));\r\n      context.setStrokeStyle(item.labelBgColor);\r\n      context.setLineWidth(1 * opts.pixelRatio);\r\n      context.beginPath();\r\n      context.rect(bgStartX, textY - 0.5 * config.fontSize - config.toolTipPadding, bgWidth, config.fontSize + 2 * config.toolTipPadding);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.fill();\r\n\r\n      context.beginPath();\r\n      context.setFontSize(config.fontSize);\r\n      context.setFillStyle(item.labelFontColor);\r\n      context.fillText(String(labelText), textX, textY + 0.5 * config.fontSize);\r\n      context.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints) {\r\n  var toolTipOption = assign({}, {\r\n    gridType: 'solid',\r\n    dashLength: 4\r\n  }, opts.extra.tooltip);\r\n\r\n  var startX = opts.area[3];\r\n  var endX = opts.width - opts.area[1];\r\n\r\n  if (toolTipOption.gridType == 'dash') {\r\n    context.setLineDash([toolTipOption.dashLength, toolTipOption.dashLength]);\r\n  }\r\n  context.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\r\n  context.setLineWidth(1 * opts.pixelRatio);\r\n  context.beginPath();\r\n  context.moveTo(startX, opts.tooltip.offset.y);\r\n  context.lineTo(endX, opts.tooltip.offset.y);\r\n  context.stroke();\r\n  context.setLineDash([]);\r\n\r\n  if (toolTipOption.yAxisLabel) {\r\n    let labelText = calTooltipYAxisData(opts.tooltip.offset.y, opts.series, opts, config, eachSpacing);\r\n    let widthArr = opts.chartData.yAxisData.yAxisWidth;\r\n    let tStartLeft=opts.area[3];\r\n    let tStartRight=opts.width-opts.area[1];\r\n    for(let i=0;i<labelText.length;i++){\r\n      context.setFontSize(config.fontSize);\r\n      let textWidth = measureText(labelText[i], config.fontSize);\r\n      let bgStartX,bgEndX,bgWidth;\r\n      if(widthArr[i].position == 'left'){\r\n        bgStartX = tStartLeft - widthArr[i].width;\r\n        bgEndX = Math.max(bgStartX, bgStartX + textWidth + config.toolTipPadding * 2);\r\n      }else{\r\n        bgStartX = tStartRight;\r\n        bgEndX = Math.max(bgStartX + widthArr[i].width, bgStartX + textWidth + config.toolTipPadding * 2);\r\n      }\r\n      bgWidth = bgEndX - bgStartX;\r\n      \r\n      let textX = bgStartX + (bgWidth - textWidth) / 2;\r\n      let textY = opts.tooltip.offset.y;\r\n      context.beginPath();\r\n      context.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\r\n      context.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\r\n      context.setLineWidth(1 * opts.pixelRatio);\r\n      context.rect(bgStartX, textY - 0.5 * config.fontSize - config.toolTipPadding, bgWidth, config.fontSize + 2 * config.toolTipPadding);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.fill();\r\n      \r\n      context.beginPath();\r\n      context.setFontSize(config.fontSize);\r\n      context.setFillStyle(toolTipOption.labelFontColor || config.fontColor);\r\n      context.fillText(labelText[i], textX, textY + 0.5 * config.fontSize);\r\n      context.closePath();\r\n      context.stroke();\r\n      if(widthArr[i].position == 'left'){\r\n        tStartLeft -=(widthArr[i].width + opts.yAxis.padding);\r\n      }else{\r\n        tStartRight +=widthArr[i].width+ opts.yAxis.padding;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawToolTipSplitArea(offsetX, opts, config, context, eachSpacing) {\r\n  var toolTipOption = assign({}, {\r\n    activeBgColor: '#000000',\r\n    activeBgOpacity: 0.08\r\n  }, opts.extra.tooltip);\r\n  var startY = opts.area[0];\r\n  var endY = opts.height - opts.area[2];\r\n  context.beginPath();\r\n  context.setFillStyle(hexToRgb(toolTipOption.activeBgColor, toolTipOption.activeBgOpacity));\r\n  context.rect(offsetX - eachSpacing / 2, startY, eachSpacing, endY - startY);\r\n  context.closePath();\r\n  context.fill();\r\n}\r\n\r\nfunction drawToolTip(textList, offset, opts, config, context, eachSpacing, xAxisPoints) {\r\n  var toolTipOption = assign({}, {\r\n\t\tshowBox:true,\r\n    bgColor: '#000000',\r\n    bgOpacity: 0.7,\r\n    fontColor: '#FFFFFF'\r\n  }, opts.extra.tooltip);\r\n  var legendWidth = 4 * opts.pixelRatio;\r\n  var legendMarginRight = 5 * opts.pixelRatio;\r\n  var arrowWidth = 8 * opts.pixelRatio;\r\n  var isOverRightBorder = false;\r\n  if (opts.type == 'line' || opts.type == 'area' || opts.type == 'candle' || opts.type == 'mix') {\r\n    drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\r\n  }\r\n\r\n  offset = assign({\r\n    x: 0,\r\n    y: 0\r\n  }, offset);\r\n  offset.y -= 8 * opts.pixelRatio;\r\n  var textWidth = textList.map(function(item) {\r\n    return measureText(item.text, config.fontSize);\r\n  });\r\n  var toolTipWidth = legendWidth + legendMarginRight + 4 * config.toolTipPadding + Math.max.apply(null, textWidth);\r\n  var toolTipHeight = 2 * config.toolTipPadding + textList.length * config.toolTipLineHeight;\r\n\r\n\tif(toolTipOption.showBox == false){ return }\r\n  // if beyond the right border\r\n  if (offset.x - Math.abs(opts._scrollDistance_) + arrowWidth + toolTipWidth > opts.width) {\r\n    isOverRightBorder = true;\r\n  }\r\n  if (toolTipHeight + offset.y > opts.height) {\r\n    offset.y = opts.height - toolTipHeight;\r\n  }\r\n  // draw background rect\r\n  context.beginPath();\r\n  context.setFillStyle(hexToRgb(toolTipOption.bgColor || config.toolTipBackground, toolTipOption.bgOpacity || config.toolTipOpacity));\r\n  if (isOverRightBorder) {\r\n    context.moveTo(offset.x, offset.y + 10 * opts.pixelRatio);\r\n    context.lineTo(offset.x - arrowWidth, offset.y + 10 * opts.pixelRatio - 5 * opts.pixelRatio);\r\n    context.lineTo(offset.x - arrowWidth, offset.y);\r\n    context.lineTo(offset.x - arrowWidth - Math.round(toolTipWidth), offset.y);\r\n    context.lineTo(offset.x - arrowWidth - Math.round(toolTipWidth), offset.y + toolTipHeight);\r\n    context.lineTo(offset.x - arrowWidth, offset.y + toolTipHeight);\r\n    context.lineTo(offset.x - arrowWidth, offset.y + 10 * opts.pixelRatio + 5 * opts.pixelRatio);\r\n    context.lineTo(offset.x, offset.y + 10 * opts.pixelRatio);\r\n  } else {\r\n    context.moveTo(offset.x, offset.y + 10 * opts.pixelRatio);\r\n    context.lineTo(offset.x + arrowWidth, offset.y + 10 * opts.pixelRatio - 5 * opts.pixelRatio);\r\n    context.lineTo(offset.x + arrowWidth, offset.y);\r\n    context.lineTo(offset.x + arrowWidth + Math.round(toolTipWidth), offset.y);\r\n    context.lineTo(offset.x + arrowWidth + Math.round(toolTipWidth), offset.y + toolTipHeight);\r\n    context.lineTo(offset.x + arrowWidth, offset.y + toolTipHeight);\r\n    context.lineTo(offset.x + arrowWidth, offset.y + 10 * opts.pixelRatio + 5 * opts.pixelRatio);\r\n    context.lineTo(offset.x, offset.y + 10 * opts.pixelRatio);\r\n  }\r\n\r\n  context.closePath();\r\n  context.fill();\r\n\r\n  // draw legend\r\n  textList.forEach(function(item, index) {\r\n    if (item.color !== null) {\r\n      context.beginPath();\r\n      context.setFillStyle(item.color);\r\n      var startX = offset.x + arrowWidth + 2 * config.toolTipPadding;\r\n      var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index +\r\n        config.toolTipPadding + 1;\r\n      if (isOverRightBorder) {\r\n        startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding;\r\n      }\r\n      context.fillRect(startX, startY, legendWidth, config.fontSize);\r\n      context.closePath();\r\n    }\r\n  });\r\n\r\n  // draw text list\r\n\r\n  textList.forEach(function(item, index) {\r\n    var startX = offset.x + arrowWidth + 2 * config.toolTipPadding + legendWidth + legendMarginRight;\r\n    if (isOverRightBorder) {\r\n      startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding + +legendWidth + legendMarginRight;\r\n    }\r\n    var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index +\r\n      config.toolTipPadding;\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(toolTipOption.fontColor);\r\n    context.fillText(item.text, startX, startY + config.fontSize);\r\n    context.closePath();\r\n    context.stroke();\r\n  });\r\n}\r\n\r\nfunction drawYAxisTitle(title, opts, config, context) {\r\n  var startX = config.xAxisHeight + (opts.height - config.xAxisHeight - measureText(title)) / 2;\r\n  context.save();\r\n  context.beginPath();\r\n  context.setFontSize(config.fontSize);\r\n  context.setFillStyle(opts.yAxis.titleFontColor || '#333333');\r\n  context.translate(0, opts.height);\r\n  context.rotate(-90 * Math.PI / 180);\r\n  context.fillText(title, startX, opts.padding[3] + 0.5 * config.fontSize);\r\n  context.closePath();\r\n  context.stroke();\r\n  context.restore();\r\n}\r\n\r\nfunction drawColumnDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  let columnOption = assign({}, {\r\n    type: 'group',\r\n    width: eachSpacing / 2,\r\n    meter: {\r\n      border: 4,\r\n      fillColor: '#FFFFFF'\r\n    }\r\n  }, opts.extra.column);\r\n  \r\n  let calPoints = [];\r\n  context.save();\r\n\t\r\n\tlet leftNum=-2;\r\n\tlet rightNum=xAxisPoints.length+2;\r\n\t\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n\t\tleftNum=Math.floor(-opts._scrollDistance_/eachSpacing)-2;\r\n\t\trightNum=leftNum+opts.xAxis.itemCount+4;\r\n  }\r\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\r\n    drawToolTipSplitArea(opts.tooltip.offset.x, opts, config, context, eachSpacing);\r\n  }\r\n\t\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges,minRange,maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    \r\n    var data = eachSeries.data;\r\n    switch (columnOption.type) {\r\n      case 'group':\r\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n        var tooltipPoints = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n        calPoints.push(tooltipPoints);\r\n        points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n\t\t\t\tfor(let i=0;i<points.length;i++){\r\n\t\t\t\t\tlet item=points[i];\r\n          if (item !== null && i>leftNum && i<rightNum) {\r\n            context.beginPath();\r\n            context.setStrokeStyle(item.color || eachSeries.color);\r\n            context.setLineWidth(1)\r\n            context.setFillStyle(item.color || eachSeries.color);\r\n            var startX = item.x - item.width / 2;\r\n            var height = opts.height - item.y - opts.area[2];\r\n            context.moveTo(startX, item.y);\r\n            context.lineTo(startX+item.width-2,item.y);\r\n            context.lineTo(startX+item.width-2,opts.height - opts.area[2]);\r\n            context.lineTo(startX,opts.height - opts.area[2]);\r\n            context.lineTo(startX,item.y);\r\n            context.closePath();\r\n            context.stroke();\r\n            context.fill();\r\n          }\r\n        };\r\n        break;\r\n      case 'stack':\r\n        // 绘制堆叠数据图\r\n        var points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n        calPoints.push(points);\r\n        points = fixColumeStackData(points, eachSpacing, series.length, seriesIndex, config, opts, series);\r\n\r\n        for(let i=0;i<points.length;i++){\r\n        \tlet item=points[i];\r\n          if (item !== null && i>leftNum && i<rightNum) {\r\n            context.beginPath();\r\n            context.setFillStyle(item.color || eachSeries.color);\r\n            var startX = item.x - item.width / 2 + 1;\r\n            var height = opts.height - item.y - opts.area[2];\r\n            var height0 = opts.height - item.y0 - opts.area[2];\r\n            if (seriesIndex > 0) {\r\n              height -= height0;\r\n            }\r\n            context.moveTo(startX, item.y);\r\n            context.fillRect(startX, item.y, item.width - 2, height);\r\n            context.closePath();\r\n            context.fill();\r\n          }\r\n        };\r\n        break;\r\n      case 'meter':\r\n        // 绘制温度计数据图\r\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n        calPoints.push(points);\r\n        points = fixColumeMeterData(points, eachSpacing, series.length, seriesIndex, config, opts, columnOption.meter.border);\r\n        if (seriesIndex == 0) {\r\n          for(let i=0;i<points.length;i++){\r\n          \tlet item=points[i];\r\n            if (item !== null && i>leftNum && i<rightNum) {\r\n              //画背景颜色\r\n              context.beginPath();\r\n              context.setFillStyle(columnOption.meter.fillColor);\r\n              var startX = item.x - item.width / 2;\r\n              var height = opts.height - item.y - opts.area[2];\r\n              context.moveTo(startX, item.y);\r\n              context.fillRect(startX, item.y, item.width, height);\r\n              context.closePath();\r\n              context.fill();\r\n              //画边框线\r\n              if (columnOption.meter.border > 0) {\r\n                context.beginPath();\r\n                context.setStrokeStyle(eachSeries.color);\r\n                context.setLineWidth(columnOption.meter.border * opts.pixelRatio);\r\n                context.moveTo(startX + columnOption.meter.border * 0.5, item.y + height);\r\n                context.lineTo(startX + columnOption.meter.border * 0.5, item.y + columnOption.meter.border * 0.5);\r\n                context.lineTo(startX + item.width - columnOption.meter.border * 0.5, item.y + columnOption.meter.border * 0.5);\r\n                context.lineTo(startX + item.width - columnOption.meter.border * 0.5, item.y + height);\r\n                context.stroke();\r\n              }\r\n            }\r\n          };\r\n        } else {\r\n          for(let i=0;i<points.length;i++){\r\n          \tlet item=points[i];\r\n            if (item !== null && i>leftNum && i<rightNum) {\r\n              context.beginPath();\r\n              context.setFillStyle(item.color || eachSeries.color);\r\n              var startX = item.x - item.width / 2;\r\n              var height = opts.height - item.y - opts.area[2];\r\n              context.moveTo(startX, item.y);\r\n              context.fillRect(startX, item.y, item.width, height);\r\n              context.closePath();\r\n              context.fill();\r\n            }\r\n          };\r\n        }\r\n        break;\r\n    }\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges,minRange,maxRange;\r\n        ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n        minRange = ranges.pop();\r\n        maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      switch (columnOption.type) {\r\n        case 'group':\r\n          var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n          points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n          drawPointText(points, eachSeries, config, context);\r\n          break;\r\n        case 'stack':\r\n          var points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n          drawPointText(points, eachSeries, config, context);\r\n          break;\r\n        case 'meter':\r\n          var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n          drawPointText(points, eachSeries, config, context);\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  context.restore();\r\n\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawCandleDataPoints(series, seriesMA, opts, config, context) {\r\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\r\n  var candleOption = assign({}, {\r\n    color: {},\r\n    average: {}\r\n  }, opts.extra.candle);\r\n  candleOption.color = assign({}, {\r\n    upLine: '#f04864',\r\n    upFill: '#f04864',\r\n    downLine: '#2fc25b',\r\n    downFill: '#2fc25b'\r\n  }, candleOption.color);\r\n  candleOption.average = assign({}, {\r\n    show: false,\r\n    name: [],\r\n    day: [],\r\n    color: config.colors\r\n  }, candleOption.average);\r\n  opts.extra.candle = candleOption;\r\n\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n\r\n  let calPoints = [];\r\n\r\n  context.save();\r\n\t\r\n\tlet leftNum=-2;\r\n\tlet rightNum=xAxisPoints.length+2;\r\n\tlet leftSpace=0;\r\n\tlet rightSpace=opts.width+eachSpacing;\r\n\t\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n\t\tleftNum=Math.floor(-opts._scrollDistance_/eachSpacing)-2;\r\n\t\trightNum=leftNum+opts.xAxis.itemCount+4;\r\n\t\tleftSpace=-opts._scrollDistance_-eachSpacing+opts.area[3];\r\n\t\trightSpace=leftSpace+(opts.xAxis.itemCount+4)*eachSpacing;\r\n  }\r\n\r\n  //画均线\r\n  if (candleOption.average.show) {\r\n    seriesMA.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges,minRange,maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      var splitPointList = splitPoints(points);\r\n\t\t\t\r\n\t\t\tfor(let i=0;i<splitPointList.length;i++){\r\n\t\t\t\tlet points=splitPointList[i];\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.setStrokeStyle(eachSeries.color);\r\n\t\t\t\tcontext.setLineWidth(1);\r\n\t\t\t\tif (points.length === 1) {\r\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t\tcontext.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t\tlet startPoint=0;\r\n\t\t\t\t\tfor(let j=0;j<points.length;j++){\r\n\t\t\t\t\t\tlet item=points[j];\r\n\t\t\t\t\t\tif(startPoint==0 && item.x > leftSpace){\r\n\t\t\t\t\t\t\tcontext.moveTo(item.x, item.y);\r\n\t\t\t\t\t\t\tstartPoint=1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n\t\t\t\t\t\t\tvar ctrlPoint = createCurveControlPoints(points, j - 1);\r\n\t\t\t\t\t\t\tcontext.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y,item.x, item.y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.stroke();\r\n      }\r\n    });\r\n  }\r\n  //画K线\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges,minRange,maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    var points = getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n    var splitPointList = splitPoints(points);\r\n\r\n\t\tfor(let i=0;i<splitPointList[0].length;i++){\r\n\t\t\tif(i>leftNum && i<rightNum){\r\n\t\t\t\tlet item=splitPointList[0][i];\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\t//如果上涨\r\n\t\t\t\tif (data[i][1] - data[i][0] > 0) {\r\n\t\t\t\t\tcontext.setStrokeStyle(candleOption.color.upLine);\r\n\t\t\t\t\tcontext.setFillStyle(candleOption.color.upFill);\r\n\t\t\t\t\tcontext.setLineWidth(1 * opts.pixelRatio);\r\n\t\t\t\t\tcontext.moveTo(item[3].x, item[3].y); //顶点\r\n\t\t\t\t\tcontext.lineTo(item[1].x, item[1].y); //收盘中间点\r\n\t\t\t\t\tcontext.lineTo(item[1].x - eachSpacing / 4, item[1].y); //收盘左侧点\r\n\t\t\t\t\tcontext.lineTo(item[0].x - eachSpacing / 4, item[0].y); //开盘左侧点\r\n\t\t\t\t\tcontext.lineTo(item[0].x, item[0].y); //开盘中间点\r\n\t\t\t\t\tcontext.lineTo(item[2].x, item[2].y); //底点\r\n\t\t\t\t\tcontext.lineTo(item[0].x, item[0].y); //开盘中间点\r\n\t\t\t\t\tcontext.lineTo(item[0].x + eachSpacing / 4, item[0].y); //开盘右侧点\r\n\t\t\t\t\tcontext.lineTo(item[1].x + eachSpacing / 4, item[1].y); //收盘右侧点\r\n\t\t\t\t\tcontext.lineTo(item[1].x, item[1].y); //收盘中间点\r\n\t\t\t\t\tcontext.moveTo(item[3].x, item[3].y); //顶点\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.setStrokeStyle(candleOption.color.downLine);\r\n\t\t\t\t\tcontext.setFillStyle(candleOption.color.downFill);\r\n\t\t\t\t\tcontext.setLineWidth(1 * opts.pixelRatio);\r\n\t\t\t\t\tcontext.moveTo(item[3].x, item[3].y); //顶点\r\n\t\t\t\t\tcontext.lineTo(item[0].x, item[0].y); //开盘中间点\r\n\t\t\t\t\tcontext.lineTo(item[0].x - eachSpacing / 4, item[0].y); //开盘左侧点\r\n\t\t\t\t\tcontext.lineTo(item[1].x - eachSpacing / 4, item[1].y); //收盘左侧点\r\n\t\t\t\t\tcontext.lineTo(item[1].x, item[1].y); //收盘中间点\r\n\t\t\t\t\tcontext.lineTo(item[2].x, item[2].y); //底点\r\n\t\t\t\t\tcontext.lineTo(item[1].x, item[1].y); //收盘中间点\r\n\t\t\t\t\tcontext.lineTo(item[1].x + eachSpacing / 4, item[1].y); //收盘右侧点\r\n\t\t\t\t\tcontext.lineTo(item[0].x + eachSpacing / 4, item[0].y); //开盘右侧点\r\n\t\t\t\t\tcontext.lineTo(item[0].x, item[0].y); //开盘中间点\r\n\t\t\t\t\tcontext.moveTo(item[3].x, item[3].y); //顶点\r\n\t\t\t\t}\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.fill();\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t}\r\n    }\r\n  });\r\n\r\n  context.restore();\r\n\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawAreaDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var areaOption = assign({},{\r\n    type: 'straight',\r\n    opacity: 0.2,\r\n    addLine: false,\r\n    width: 2,\r\n\t\tgradient:false\r\n  },opts.extra.area);\r\n\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n\r\n  let endY = opts.height - opts.area[2];\r\n  let calPoints = [];\r\n\r\n  context.save();\r\n\tlet leftSpace=0;\r\n\tlet rightSpace=opts.width+eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n\t\tleftSpace=-opts._scrollDistance_-eachSpacing+opts.area[3];\r\n\t\trightSpace=leftSpace+(opts.xAxis.itemCount+4)*eachSpacing;\r\n  }\r\n\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges,minRange,maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    let data = eachSeries.data;\r\n    let points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n\r\n    let splitPointList = splitPoints(points);\r\n    for (let i = 0; i < splitPointList.length; i++) {\r\n      let points = splitPointList[i];\r\n      // 绘制区域数\r\n      context.beginPath();\r\n      context.setStrokeStyle(hexToRgb(eachSeries.color, areaOption.opacity));\r\n\t\t\tif(areaOption.gradient){\r\n\t\t\t\tlet gradient = context.createLinearGradient(0, opts.area[0], 0, opts.height-opts.area[2]);\r\n\t\t\t\tgradient.addColorStop('0', hexToRgb(eachSeries.color, areaOption.opacity));\r\n\t\t\t\tgradient.addColorStop('1.0',hexToRgb(\"#FFFFFF\", 0.1));\r\n\t\t\t\tcontext.setFillStyle(gradient);\r\n\t\t\t}else{\r\n\t\t\t\tcontext.setFillStyle(hexToRgb(eachSeries.color, areaOption.opacity));\r\n\t\t\t}\r\n      context.setLineWidth(areaOption.width * opts.pixelRatio);\r\n      if (points.length > 1) {\r\n        let firstPoint = points[0];\r\n        let lastPoint = points[points.length - 1];\r\n        context.moveTo(firstPoint.x, firstPoint.y);\r\n\t\t\t\tlet startPoint=0;\r\n        if (areaOption.type === 'curve') {\r\n\t\t\t\t\tfor(let j=0;j<points.length;j++){\r\n\t\t\t\t\t\tlet item=points[j];\r\n\t\t\t\t\t\tif(startPoint==0 && item.x > leftSpace){\r\n\t\t\t\t\t\t\tcontext.moveTo(item.x, item.y);\r\n\t\t\t\t\t\t\tstartPoint=1;\r\n\t\t\t\t\t\t}\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              let ctrlPoint = createCurveControlPoints(points, j - 1);\r\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y,item.x, item.y);\r\n            }\r\n          };\r\n        } else {\r\n\t\t\t\t\tfor(let j=0;j<points.length;j++){\r\n\t\t\t\t\t\tlet item=points[j];\r\n\t\t\t\t\t\tif(startPoint==0 && item.x > leftSpace){\r\n\t\t\t\t\t\t\tcontext.moveTo(item.x, item.y);\r\n\t\t\t\t\t\t\tstartPoint=1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              context.lineTo(item.x, item.y);\r\n            }\r\n          };\r\n        }\r\n\r\n        context.lineTo(lastPoint.x, endY);\r\n        context.lineTo(firstPoint.x, endY);\r\n        context.lineTo(firstPoint.x, firstPoint.y);\r\n      } else {\r\n        let item = points[0];\r\n        context.moveTo(item.x - eachSpacing / 2, item.y);\r\n        context.lineTo(item.x + eachSpacing / 2, item.y);\r\n        context.lineTo(item.x + eachSpacing / 2, endY);\r\n        context.lineTo(item.x - eachSpacing / 2, endY);\r\n        context.moveTo(item.x - eachSpacing / 2, item.y);\r\n      }\r\n      context.closePath();\r\n      context.fill();\r\n\r\n      //画连线\r\n      if (areaOption.addLine) {\r\n\t\t\t\tif (eachSeries.lineType == 'dash') {\r\n\t\t\t\t\tlet dashLength = eachSeries.dashLength?eachSeries.dashLength:8;\r\n\t\t\t\t\tdashLength *= opts.pixelRatio;\r\n\t\t\t\t  context.setLineDash([dashLength, dashLength]);\r\n\t\t\t\t}\r\n        context.beginPath();\r\n        context.setStrokeStyle(eachSeries.color);\r\n        context.setLineWidth(areaOption.width * opts.pixelRatio);\r\n        if (points.length === 1) {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n        } else {\r\n          context.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t\tlet startPoint=0;\r\n          if (areaOption.type === 'curve') {\r\n            for(let j=0;j<points.length;j++){\r\n            \tlet item=points[j];\r\n            \tif(startPoint==0 && item.x > leftSpace){\r\n            \t\tcontext.moveTo(item.x, item.y);\r\n            \t\tstartPoint=1;\r\n            \t}\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                let ctrlPoint = createCurveControlPoints(points, j - 1);\r\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y,item.x,item.y);\r\n              }\r\n            };\r\n          } else {\r\n            for(let j=0;j<points.length;j++){\r\n            \tlet item=points[j];\r\n            \tif(startPoint==0 && item.x > leftSpace){\r\n            \t\tcontext.moveTo(item.x, item.y);\r\n            \t\tstartPoint=1;\r\n            \t}\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                context.lineTo(item.x, item.y);\r\n              }\r\n            };\r\n          }\r\n          context.moveTo(points[0].x, points[0].y);\r\n        }\r\n        context.stroke();\r\n\t\t\t\tcontext.setLineDash([]);\r\n      }\r\n    }\r\n\r\n    //画点\r\n    if (opts.dataPointShape !== false) {\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges,minRange,maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      drawPointText(points, eachSeries, config, context);\r\n    });\r\n  }\r\n\r\n  context.restore();\r\n\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawLineDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var lineOption = assign({},{\r\n\t\ttype: 'straight',\r\n\t\twidth: 2\r\n\t},opts.extra.line);\r\n\tlineOption.width *=opts.pixelRatio;\r\n\t\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  var calPoints = [];\r\n\r\n  context.save();\r\n\tlet leftSpace=0;\r\n\tlet rightSpace=opts.width+eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n\t\tleftSpace=-opts._scrollDistance_-eachSpacing+opts.area[3];\r\n\t\trightSpace=leftSpace+(opts.xAxis.itemCount+4)*eachSpacing;\r\n  }\r\n\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges,minRange,maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n    var splitPointList = splitPoints(points);\r\n\t\t\r\n\t\tif (eachSeries.lineType == 'dash') {\r\n\t\t\tlet dashLength = eachSeries.dashLength?eachSeries.dashLength:8;\r\n\t\t\tdashLength *= opts.pixelRatio;\r\n\t\t  context.setLineDash([dashLength, dashLength]);\r\n\t\t}\r\n\t\tcontext.beginPath();\r\n\t\tcontext.setStrokeStyle(eachSeries.color);\r\n\t\tcontext.setLineWidth(lineOption.width);\r\n\t\t\r\n    splitPointList.forEach(function(points, index) {\r\n\t\t\t\r\n      if (points.length === 1) {\r\n        context.moveTo(points[0].x, points[0].y);\r\n        context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n      } else {\r\n        context.moveTo(points[0].x, points[0].y);\r\n\t\t\t\tlet startPoint=0;\r\n        if (lineOption.type === 'curve') {\r\n          for(let j=0;j<points.length;j++){\r\n          \tlet item=points[j];\r\n          \tif(startPoint==0 && item.x > leftSpace){\r\n          \t\tcontext.moveTo(item.x, item.y);\r\n          \t\tstartPoint=1;\r\n          \t}\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              var ctrlPoint = createCurveControlPoints(points, j - 1);\r\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y,item.x, item.y);\r\n            }\r\n          };\r\n        } else {\r\n          for(let j=0;j<points.length;j++){\r\n          \tlet item=points[j];\r\n          \tif(startPoint==0 && item.x > leftSpace){\r\n          \t\tcontext.moveTo(item.x, item.y);\r\n          \t\tstartPoint=1;\r\n          \t}\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              context.lineTo(item.x, item.y);\r\n            }\r\n          };\r\n        }\r\n        context.moveTo(points[0].x, points[0].y);\r\n      }\r\n      \r\n    });\r\n\t\t\r\n\t\tcontext.stroke();\r\n\t\tcontext.setLineDash([]);\r\n\t\t\r\n    if (opts.dataPointShape !== false) {\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges,minRange,maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      drawPointText(points, eachSeries, config, context);\r\n    });\r\n  }\r\n\r\n  context.restore();\r\n\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawMixDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  \r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n\r\n  let endY = opts.height - opts.area[2];\r\n  let calPoints = [];\r\n\r\n  var columnIndex = 0;\r\n  var columnLength = 0;\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    if (eachSeries.type == 'column') {\r\n      columnLength += 1;\r\n    }\r\n  });\r\n  context.save();\r\n\tlet leftNum=-2;\r\n\tlet rightNum=xAxisPoints.length+2;\r\n\tlet leftSpace=0;\r\n\tlet rightSpace=opts.width+eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n\t\tleftNum=Math.floor(-opts._scrollDistance_/eachSpacing)-2;\r\n\t\trightNum=leftNum+opts.xAxis.itemCount+4;\r\n\t\tleftSpace=-opts._scrollDistance_-eachSpacing+opts.area[3];\r\n\t\trightSpace=leftSpace+(opts.xAxis.itemCount+4)*eachSpacing;\r\n  }\r\n\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges,minRange,maxRange;\r\n    \r\n\t\tranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n\t\tminRange = ranges.pop();\r\n\t\tmaxRange = ranges.shift();\r\n\r\n    var data = eachSeries.data;\r\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n\r\n    // 绘制柱状数据图\r\n    if (eachSeries.type == 'column') {\r\n      points = fixColumeData(points, eachSpacing, columnLength, columnIndex, config, opts);\r\n      for(let i=0;i<points.length;i++){\r\n      \tlet item=points[i];\r\n        if (item !== null && i>leftNum && i<rightNum) {\r\n          context.beginPath();\r\n          context.setStrokeStyle(item.color || eachSeries.color);\r\n          context.setLineWidth(1)\r\n          context.setFillStyle(item.color || eachSeries.color);\r\n          var startX = item.x - item.width / 2;\r\n          var height = opts.height - item.y - opts.area[2];\r\n          context.moveTo(startX, item.y);\r\n          context.moveTo(startX, item.y);\r\n          context.lineTo(startX+item.width-2,item.y);\r\n          context.lineTo(startX+item.width-2,opts.height - opts.area[2]);\r\n          context.lineTo(startX,opts.height - opts.area[2]);\r\n          context.lineTo(startX,item.y);\r\n          context.closePath();\r\n          context.stroke();\r\n          context.fill();\r\n          context.closePath();\r\n          context.fill();\r\n        }\r\n      }\r\n      columnIndex += 1;\r\n    }\r\n\r\n    //绘制区域图数据\r\n\r\n    if (eachSeries.type == 'area') {\r\n      let splitPointList = splitPoints(points);\r\n      for (let i = 0; i < splitPointList.length; i++) {\r\n        let points = splitPointList[i];\r\n        // 绘制区域数据\r\n        context.beginPath();\r\n        context.setStrokeStyle(eachSeries.color);\r\n        context.setFillStyle(hexToRgb(eachSeries.color, 0.2));\r\n        context.setLineWidth(2 * opts.pixelRatio);\r\n        if (points.length > 1) {\r\n          var firstPoint = points[0];\r\n          let lastPoint = points[points.length - 1];\r\n          context.moveTo(firstPoint.x, firstPoint.y);\r\n\t\t\t\t\tlet startPoint=0;\r\n          if (eachSeries.style === 'curve') {\r\n            for(let j=0;j<points.length;j++){\r\n            \tlet item=points[j];\r\n            \tif(startPoint==0 && item.x > leftSpace){\r\n            \t\tcontext.moveTo(item.x, item.y);\r\n            \t\tstartPoint=1;\r\n            \t}\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                var ctrlPoint = createCurveControlPoints(points, j - 1);\r\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\r\n              }\r\n            };\r\n          } else {\r\n            for(let j=0;j<points.length;j++){\r\n            \tlet item=points[j];\r\n            \tif(startPoint==0 && item.x > leftSpace){\r\n            \t\tcontext.moveTo(item.x, item.y);\r\n            \t\tstartPoint=1;\r\n            \t}\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                context.lineTo(item.x, item.y);\r\n              }\r\n            };\r\n          }\r\n          context.lineTo(lastPoint.x, endY);\r\n          context.lineTo(firstPoint.x, endY);\r\n          context.lineTo(firstPoint.x, firstPoint.y);\r\n        } else {\r\n          let item = points[0];\r\n          context.moveTo(item.x - eachSpacing / 2, item.y);\r\n          context.lineTo(item.x + eachSpacing / 2, item.y);\r\n          context.lineTo(item.x + eachSpacing / 2, endY);\r\n          context.lineTo(item.x - eachSpacing / 2, endY);\r\n          context.moveTo(item.x - eachSpacing / 2, item.y);\r\n        }\r\n        context.closePath();\r\n        context.fill();\r\n      }\r\n    }\r\n\r\n    // 绘制折线数据图\r\n    if (eachSeries.type == 'line') {\r\n      var splitPointList = splitPoints(points);\r\n      splitPointList.forEach(function(points, index) {\r\n\t\t\t\tif (eachSeries.lineType == 'dash') {\r\n\t\t\t\t\tlet dashLength = eachSeries.dashLength?eachSeries.dashLength:8;\r\n\t\t\t\t\tdashLength *= opts.pixelRatio;\r\n\t\t\t\t  context.setLineDash([dashLength, dashLength]);\r\n\t\t\t\t}\r\n        context.beginPath();\r\n        context.setStrokeStyle(eachSeries.color);\r\n        context.setLineWidth(2 * opts.pixelRatio);\r\n        if (points.length === 1) {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n        } else {\r\n          context.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t\tlet startPoint=0;\r\n          if (eachSeries.style == 'curve') {\r\n            for(let j=0;j<points.length;j++){\r\n            \tlet item=points[j];\r\n            \tif(startPoint==0 && item.x > leftSpace){\r\n            \t\tcontext.moveTo(item.x, item.y);\r\n            \t\tstartPoint=1;\r\n            \t}\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                var ctrlPoint = createCurveControlPoints(points, j - 1);\r\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y,item.x,item.y);\r\n              }\r\n            }\r\n          } else {\r\n            for(let j=0;j<points.length;j++){\r\n            \tlet item=points[j];\r\n            \tif(startPoint==0 && item.x > leftSpace){\r\n            \t\tcontext.moveTo(item.x, item.y);\r\n            \t\tstartPoint=1;\r\n            \t}\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                context.lineTo(item.x, item.y);\r\n              }\r\n            }\r\n          }\r\n          context.moveTo(points[0].x, points[0].y);\r\n        }\r\n        context.stroke();\r\n\t\t\t\tcontext.setLineDash([]);\r\n      });\r\n    }\r\n\r\n    // 绘制点数据图\r\n    if (eachSeries.type == 'point') {\r\n\t\t\teachSeries.addPoint = true;\r\n    }\r\n\r\n    if (eachSeries.addPoint == true && eachSeries.type !== 'column' ) {\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n  });\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    var columnIndex = 0;\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges,minRange,maxRange;\r\n      \r\n\t\t\tranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n\t\t\tminRange = ranges.pop();\r\n\t\t\tmaxRange = ranges.shift();\r\n\t\t\t\t\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      if (eachSeries.type !== 'column') {\r\n        drawPointText(points, eachSeries, config, context);\r\n      } else {\r\n        points = fixColumeData(points, eachSpacing, columnLength, columnIndex, config, opts);\r\n        drawPointText(points, eachSeries, config, context);\r\n        columnIndex += 1;\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  context.restore();\r\n\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing,\r\n  }\r\n}\r\n\r\nfunction drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints) {\r\n  var toolTipOption = opts.extra.tooltip || {};\r\n  if (toolTipOption.horizentalLine && opts.tooltip && process === 1 && (opts.type == 'line' || opts.type == 'area' || opts.type == 'column' || opts.type == 'candle' || opts.type == 'mix')) {\r\n    drawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints)\r\n  }\r\n  context.save();\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n  }\r\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\r\n    drawToolTip(opts.tooltip.textList, opts.tooltip.offset, opts, config, context, eachSpacing, xAxisPoints);\r\n  }\r\n  context.restore();\r\n\r\n}\r\n\r\nfunction drawXAxis(categories, opts, config, context) {\r\n\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    startX = xAxisData.startX,\r\n    endX = xAxisData.endX,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  var boundaryGap='center';\r\n  if (opts.type == 'line'||opts.type == 'area'){\r\n    boundaryGap=opts.xAxis.boundaryGap;\r\n  }\r\n  var startY = opts.height - opts.area[2];\r\n  var endY = opts.area[0];\r\n\r\n  //绘制滚动条\r\n  if (opts.enableScroll && opts.xAxis.scrollShow) {\r\n    var scrollY = opts.height - opts.area[2] + config.xAxisHeight;\r\n    var scrollScreenWidth = endX - startX;\r\n    var scrollTotalWidth = eachSpacing * (xAxisPoints.length - 1);\r\n    var scrollWidth = scrollScreenWidth * scrollScreenWidth / scrollTotalWidth;\r\n    var scrollLeft = 0;\r\n    if (opts._scrollDistance_) {\r\n      scrollLeft = -opts._scrollDistance_ * (scrollScreenWidth) / scrollTotalWidth;\r\n    }\r\n    context.beginPath();\r\n    context.setLineCap('round');\r\n    context.setLineWidth(6 * opts.pixelRatio);\r\n    context.setStrokeStyle(opts.xAxis.scrollBackgroundColor || \"#EFEBEF\");\r\n    context.moveTo(startX, scrollY);\r\n    context.lineTo(endX, scrollY);\r\n    context.stroke();\r\n    context.closePath();\r\n    context.beginPath();\r\n    context.setLineCap('round');\r\n    context.setLineWidth(6 * opts.pixelRatio);\r\n    context.setStrokeStyle(opts.xAxis.scrollColor || \"#A6A6A6\");\r\n    context.moveTo(startX + scrollLeft, scrollY);\r\n    context.lineTo(startX + scrollLeft + scrollWidth, scrollY);\r\n    context.stroke();\r\n    context.closePath();\r\n    context.setLineCap('butt');\r\n  }\r\n\r\n  context.save();\r\n\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n  }\r\n\t\r\n\t//绘制X轴刻度线\r\n\tif (opts.xAxis.calibration === true) {\r\n\t\tcontext.setStrokeStyle(opts.xAxis.gridColor || \"#cccccc\");\r\n\t\tcontext.setLineCap('butt');\r\n\t\tcontext.setLineWidth(1 * opts.pixelRatio);\r\n\t  xAxisPoints.forEach(function(item, index) {\r\n\t    if (index > 0) {\r\n\t      context.beginPath();\r\n\t      context.moveTo(item - eachSpacing / 2, startY);\r\n\t      context.lineTo(item - eachSpacing / 2, startY + 3 * opts.pixelRatio);\r\n\t      context.closePath();\r\n\t      context.stroke();\r\n\t    }\r\n\t  });\r\n\t}\r\n\t//绘制X轴网格\r\n  if (opts.xAxis.disableGrid !== true) {\r\n    context.setStrokeStyle(opts.xAxis.gridColor || \"#cccccc\");\r\n    context.setLineCap('butt');\r\n    context.setLineWidth(1 * opts.pixelRatio);\r\n    if (opts.xAxis.gridType == 'dash') {\r\n      context.setLineDash([opts.xAxis.dashLength, opts.xAxis.dashLength]);\r\n    }\r\n\t\topts.xAxis.gridEval = opts.xAxis.gridEval || 1;\r\n\t\txAxisPoints.forEach(function(item, index) {\r\n\t\t\tif (index % opts.xAxis.gridEval == 0) {\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.moveTo(item, startY);\r\n\t\t\t\tcontext.lineTo(item, endY);\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t}\r\n\t\t});\r\n    context.setLineDash([]);\r\n  }\r\n  \r\n\r\n  //绘制X轴文案\r\n  if (opts.xAxis.disabled !== true) {\r\n    // 对X轴列表做抽稀处理\r\n    //默认全部显示X轴标签\r\n    let maxXAxisListLength = categories.length;\r\n    //如果设置了X轴单屏数量\r\n    if (opts.xAxis.labelCount) {\r\n      //如果设置X轴密度\r\n      if (opts.xAxis.itemCount) {\r\n        maxXAxisListLength = Math.ceil(categories.length / opts.xAxis.itemCount * opts.xAxis.labelCount);\r\n      } else {\r\n        maxXAxisListLength = opts.xAxis.labelCount;\r\n      }\r\n      maxXAxisListLength -= 1;\r\n    }\r\n\r\n    let ratio = Math.ceil(categories.length / maxXAxisListLength);\r\n\r\n    let newCategories = [];\r\n    let cgLength = categories.length;\r\n    for (let i = 0; i < cgLength; i++) {\r\n      if (i % ratio !== 0) {\r\n        newCategories.push(\"\");\r\n      } else {\r\n        newCategories.push(categories[i]);\r\n      }\r\n    }\r\n    newCategories[cgLength - 1] = categories[cgLength - 1];\r\n\r\n    var xAxisFontSize = opts.xAxis.fontSize || config.fontSize;\r\n    if (config._xAxisTextAngle_ === 0) {\r\n      newCategories.forEach(function(item, index) {\r\n        var offset = - measureText(String(item), xAxisFontSize) / 2;\r\n        if(boundaryGap == 'center'){\r\n          offset+=eachSpacing / 2;\r\n        }\r\n        var scrollHeight=0;\r\n        if(opts.xAxis.scrollShow){\r\n          scrollHeight=6*opts.pixelRatio;\r\n        }\r\n        context.beginPath();\r\n        context.setFontSize(xAxisFontSize);\r\n        context.setFillStyle(opts.xAxis.fontColor || '#666666');\r\n        context.fillText(String(item), xAxisPoints[index] + offset, startY + xAxisFontSize + (config.xAxisHeight - scrollHeight - xAxisFontSize) / 2);\r\n        context.closePath();\r\n        context.stroke();\r\n      });\r\n\r\n    } else {\r\n      newCategories.forEach(function(item, index) {\r\n        context.save();\r\n        context.beginPath();\r\n        context.setFontSize(xAxisFontSize);\r\n        context.setFillStyle(opts.xAxis.fontColor || '#666666');\r\n        var textWidth = measureText(String(item),xAxisFontSize);\r\n        var offset = - textWidth;\r\n        if(boundaryGap == 'center'){\r\n          offset+=eachSpacing / 2;\r\n        }\r\n        var _calRotateTranslate = calRotateTranslate(xAxisPoints[index] + eachSpacing / 2, startY + xAxisFontSize / 2 + 5, opts.height),\r\n          transX = _calRotateTranslate.transX,\r\n          transY = _calRotateTranslate.transY;\r\n\r\n        context.rotate(-1 * config._xAxisTextAngle_);\r\n        context.translate(transX, transY);\r\n        context.fillText(String(item), xAxisPoints[index] + offset, startY + xAxisFontSize + 5);\r\n        context.closePath();\r\n        context.stroke();\r\n        context.restore();\r\n      });\r\n    }\r\n  }\r\n  context.restore();\r\n\t\r\n\t//绘制X轴轴线\r\n  if(opts.xAxis.axisLine){\r\n    context.beginPath();\r\n    context.setStrokeStyle(opts.xAxis.axisLineColor);\r\n    context.setLineWidth(1 * opts.pixelRatio);\r\n    context.moveTo(startX,opts.height-opts.area[2]);\r\n    context.lineTo(endX,opts.height-opts.area[2]);\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nfunction drawYAxisGrid(categories, opts, config, context) {\r\n  if (opts.yAxis.disableGrid === true) {\r\n    return;\r\n  }\r\n  let spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  let eachSpacing = spacingValid / opts.yAxis.splitNumber;\r\n  let startX = opts.area[3];\r\n  let xAxisPoints = opts.chartData.xAxisData.xAxisPoints,\r\n    xAxiseachSpacing = opts.chartData.xAxisData.eachSpacing;\r\n  let TotalWidth = xAxiseachSpacing * (xAxisPoints.length - 1);\r\n  let endX = startX + TotalWidth;\r\n\r\n  let points = [];\r\n  for (let i = 0; i < opts.yAxis.splitNumber + 1; i++) {\r\n    points.push(opts.height - opts.area[2] - eachSpacing * i);\r\n  }\r\n\r\n  context.save();\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n  }\r\n\r\n  if (opts.yAxis.gridType == 'dash') {\r\n    context.setLineDash([opts.yAxis.dashLength, opts.yAxis.dashLength]);\r\n  }\r\n  context.setStrokeStyle(opts.yAxis.gridColor);\r\n  context.setLineWidth(1 * opts.pixelRatio);\r\n  points.forEach(function(item, index) {\r\n    context.beginPath();\r\n    context.moveTo(startX, item);\r\n    context.lineTo(endX, item);\r\n    context.stroke();\r\n  });\r\n  context.setLineDash([]);\r\n\r\n  context.restore();\r\n}\r\n\r\nfunction drawYAxis(series, opts, config, context) {\r\n  if (opts.yAxis.disabled === true) {\r\n    return;\r\n  }\r\n  var spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  var eachSpacing = spacingValid / opts.yAxis.splitNumber;\r\n  var startX = opts.area[3];\r\n  var endX = opts.width - opts.area[1];\r\n  var endY = opts.height - opts.area[2];\r\n  var fillEndY = endY + config.xAxisHeight;\r\n  if (opts.xAxis.scrollShow) {\r\n    fillEndY -= 3 * opts.pixelRatio;\r\n  }\r\n\tif (opts.xAxis.rotateLabel){\r\n\t\tfillEndY = opts.height - opts.area[2]+3;\r\n\t}\r\n  // set YAxis background\r\n  context.beginPath();\r\n  context.setFillStyle(opts.background || '#ffffff');\r\n  if (opts._scrollDistance_ < 0) {\r\n    context.fillRect(0, 0, startX, fillEndY);\r\n  }\r\n  if(opts.enableScroll == true){\r\n    context.fillRect(endX, 0, opts.width, fillEndY);\r\n  }\r\n  context.closePath();\r\n  context.stroke();\r\n\r\n  var points = [];\r\n  for (let i = 0; i <= opts.yAxis.splitNumber; i++) {\r\n    points.push(opts.area[0] + eachSpacing * i);\r\n  }\r\n\r\n  let tStartLeft=opts.area[3];\r\n  let tStartRight=opts.width-opts.area[1];\r\n\r\n  for (let i = 0; i < opts.yAxis.data.length; i++) {\r\n    let yData = opts.yAxis.data[i];\r\n    if(yData.disabled !== true){\r\n      let rangesFormat = opts.chartData.yAxisData.rangesFormat[i];\r\n      let yAxisFontSize = yData.fontSize || config.fontSize;\r\n      let yAxisWidth = opts.chartData.yAxisData.yAxisWidth[i];\r\n      //画Y轴刻度及文案\r\n      rangesFormat.forEach(function(item, index) {\r\n        var pos = points[index] ? points[index] : endY;\r\n        context.beginPath();\r\n        context.setFontSize(yAxisFontSize);\r\n        context.setLineWidth(1*opts.pixelRatio);\r\n        context.setStrokeStyle(yData.axisLineColor||'#cccccc');\r\n        context.setFillStyle(yData.fontColor|| '#666666');\r\n        if(yAxisWidth.position=='left'){\r\n          context.fillText(String(item), tStartLeft - yAxisWidth.width , pos + yAxisFontSize / 2);\r\n          //画刻度线\r\n          if(yData.calibration==true){\r\n            context.moveTo(tStartLeft,pos);\r\n            context.lineTo(tStartLeft - 3*opts.pixelRatio,pos);\r\n          }\r\n        }else{\r\n          context.fillText(String(item), tStartRight + 4*opts.pixelRatio, pos + yAxisFontSize / 2);\r\n          //画刻度线\r\n          if(yData.calibration==true){\r\n            context.moveTo(tStartRight,pos);\r\n            context.lineTo(tStartRight + 3*opts.pixelRatio,pos);\r\n          }\r\n        }\r\n        context.closePath();\r\n        context.stroke();\r\n      });\r\n      //画Y轴轴线\r\n      if (yData.axisLine!==false) {\r\n        context.beginPath();\r\n        context.setStrokeStyle(yData.axisLineColor||'#cccccc');\r\n        context.setLineWidth(1 * opts.pixelRatio);\r\n        if(yAxisWidth.position=='left'){\r\n          context.moveTo(tStartLeft,opts.height-opts.area[2]);\r\n          context.lineTo(tStartLeft,opts.area[0]);\r\n        }else{\r\n          context.moveTo(tStartRight,opts.height-opts.area[2]);\r\n          context.lineTo(tStartRight,opts.area[0]);\r\n        }\r\n        context.stroke();\r\n      }\r\n\t\t\t\r\n      //画Y轴标题\r\n      if (opts.yAxis.showTitle) {\r\n\t\t\t\t\r\n        let titleFontSize = yData.titleFontSize || config.fontSize;\r\n        let title = yData.title;\r\n        context.beginPath();\r\n        context.setFontSize(titleFontSize);\r\n        context.setFillStyle(yData.titleFontColor || '#666666');\r\n        if(yAxisWidth.position=='left'){\r\n          context.fillText(title, tStartLeft - measureText(title,titleFontSize)/2, opts.area[0]-10*opts.pixelRatio);\r\n        }else{\r\n          context.fillText(title,tStartRight - measureText(title,titleFontSize)/2, opts.area[0]-10*opts.pixelRatio);\r\n        }\r\n        context.closePath();\r\n        context.stroke();\r\n      }\r\n      if(yAxisWidth.position=='left'){\r\n        tStartLeft -=(yAxisWidth.width + opts.yAxis.padding);\r\n      }else{\r\n        tStartRight +=yAxisWidth.width+ opts.yAxis.padding;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawLegend(series, opts, config, context, chartData) {\r\n  if (opts.legend.show === false) {\r\n    return;\r\n  }\r\n  let legendData = chartData.legendData;\r\n  let legendList = legendData.points;\r\n  let legendArea = legendData.area;\r\n  let padding = opts.legend.padding;\r\n  let fontSize = opts.legend.fontSize;\r\n  let shapeWidth = 15 * opts.pixelRatio;\r\n  let shapeRight = 5 * opts.pixelRatio;\r\n  let itemGap = opts.legend.itemGap;\r\n  let lineHeight = Math.max(opts.legend.lineHeight * opts.pixelRatio, fontSize);\r\n\r\n  //画背景及边框\r\n  context.beginPath();\r\n  context.setLineWidth(opts.legend.borderWidth);\r\n  context.setStrokeStyle(opts.legend.borderColor);\r\n  context.setFillStyle(opts.legend.backgroundColor);\r\n  context.moveTo(legendArea.start.x, legendArea.start.y);\r\n  context.rect(legendArea.start.x, legendArea.start.y, legendArea.width, legendArea.height);\r\n  context.closePath();\r\n  context.fill();\r\n  context.stroke();\r\n\r\n  legendList.forEach(function(itemList, listIndex) {\r\n    let width = 0;\r\n    let height = 0;\r\n    width = legendData.widthArr[listIndex];\r\n    height = legendData.heightArr[listIndex];\r\n    let startX = 0;\r\n    let startY = 0;\r\n    if (opts.legend.position == 'top' || opts.legend.position == 'bottom') {\r\n      startX = legendArea.start.x + (legendArea.width - width) / 2;\r\n      startY = legendArea.start.y + padding + listIndex * lineHeight;\r\n    } else {\r\n      if (listIndex == 0) {\r\n        width = 0;\r\n      } else {\r\n        width = legendData.widthArr[listIndex - 1];\r\n      }\r\n      startX = legendArea.start.x + padding + width;\r\n      startY = legendArea.start.y + padding + (legendArea.height - height) / 2;\r\n    }\r\n\r\n    context.setFontSize(config.fontSize);\r\n    for (let i = 0; i < itemList.length; i++) {\r\n      let item = itemList[i];\r\n      item.area = [0, 0, 0, 0];\r\n      item.area[0] = startX;\r\n      item.area[1] = startY;\r\n      item.area[3] = startY + lineHeight;\r\n      context.beginPath();\r\n      context.setLineWidth(1 * opts.pixelRatio);\r\n      context.setStrokeStyle(item.show ? item.color : opts.legend.hiddenColor);\r\n      context.setFillStyle(item.show ? item.color : opts.legend.hiddenColor);\r\n      switch (item.legendShape) {\r\n        case 'line':\r\n          context.moveTo(startX, startY + 0.5 * lineHeight - 2 * opts.pixelRatio);\r\n          context.fillRect(startX, startY + 0.5 * lineHeight - 2 * opts.pixelRatio, 15 * opts.pixelRatio, 4 * opts.pixelRatio);\r\n          break;\r\n        case 'triangle':\r\n          context.moveTo(startX + 7.5 * opts.pixelRatio, startY + 0.5 * lineHeight - 5 * opts.pixelRatio);\r\n          context.lineTo(startX + 2.5 * opts.pixelRatio, startY + 0.5 * lineHeight + 5 * opts.pixelRatio);\r\n          context.lineTo(startX + 12.5 * opts.pixelRatio, startY + 0.5 * lineHeight + 5 * opts.pixelRatio);\r\n          context.lineTo(startX + 7.5 * opts.pixelRatio, startY + 0.5 * lineHeight - 5 * opts.pixelRatio);\r\n          break;\r\n        case 'diamond':\r\n          context.moveTo(startX + 7.5 * opts.pixelRatio, startY + 0.5 * lineHeight - 5 * opts.pixelRatio);\r\n          context.lineTo(startX + 2.5 * opts.pixelRatio, startY + 0.5 * lineHeight);\r\n          context.lineTo(startX + 7.5 * opts.pixelRatio, startY + 0.5 * lineHeight + 5 * opts.pixelRatio);\r\n          context.lineTo(startX + 12.5 * opts.pixelRatio, startY + 0.5 * lineHeight);\r\n          context.lineTo(startX + 7.5 * opts.pixelRatio, startY + 0.5 * lineHeight - 5 * opts.pixelRatio);\r\n          break;\r\n        case 'circle':\r\n          context.moveTo(startX + 7.5 * opts.pixelRatio, startY + 0.5 * lineHeight);\r\n          context.arc(startX + 7.5 * opts.pixelRatio, startY + 0.5 * lineHeight, 5 * opts.pixelRatio, 0, 2 * Math.PI);\r\n          break;\r\n        case 'rect':\r\n          context.moveTo(startX, startY + 0.5 * lineHeight - 5 * opts.pixelRatio);\r\n          context.fillRect(startX, startY + 0.5 * lineHeight - 5 * opts.pixelRatio, 15 * opts.pixelRatio, 10 * opts.pixelRatio);\r\n          break;\r\n        default:\r\n          context.moveTo(startX, startY + 0.5 * lineHeight - 5 * opts.pixelRatio);\r\n          context.fillRect(startX, startY + 0.5 * lineHeight - 5 * opts.pixelRatio, 15 * opts.pixelRatio, 10 * opts.pixelRatio);\r\n      }\r\n      context.closePath();\r\n      context.fill();\r\n      context.stroke();\r\n\r\n      startX += shapeWidth + shapeRight;\r\n      let fontTrans = 0.5 * lineHeight + 0.5 * fontSize - 2;\r\n      context.beginPath();\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(item.show ? opts.legend.fontColor : opts.legend.hiddenColor);\r\n      context.fillText(item.name, startX, startY + fontTrans);\r\n      context.closePath();\r\n      context.stroke();\r\n      if (opts.legend.position == 'top' || opts.legend.position == 'bottom') {\r\n        startX += measureText(item.name, fontSize) + itemGap;\r\n        item.area[2] = startX;\r\n      } else {\r\n        item.area[2] = startX + measureText(item.name, fontSize) + itemGap;;\r\n        startX -= shapeWidth + shapeRight;\r\n        startY += lineHeight;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction drawPieDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var pieOption = assign({}, {\r\n    activeOpacity: 0.5,\r\n    activeRadius: 10 * opts.pixelRatio,\r\n    offsetAngle: 0,\r\n    labelWidth: 15 * opts.pixelRatio,\r\n    ringWidth: 0,\r\n    border:false,\r\n    borderWidth:2,\r\n    borderColor:'#FFFFFF'\r\n  }, opts.extra.pie);\r\n  var centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.area[0] + (opts.height - opts.area[0] - opts.area[2]) / 2\r\n  };\r\n  if (config.pieChartLinePadding == 0) {\r\n    config.pieChartLinePadding = pieOption.activeRadius;\r\n  }\r\n\r\n  var radius = Math.min((opts.width - opts.area[1] - opts.area[3]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding - config._pieTextMaxLength_, (opts.height - opts.area[0] - opts.area[2]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding);\r\n\r\n  series = getPieDataPoints(series, radius, process);\r\n\r\n  var activeRadius = pieOption.activeRadius;\r\n\r\n  series = series.map(function(eachSeries) {\r\n    eachSeries._start_ += (pieOption.offsetAngle) * Math.PI / 180;\r\n    return eachSeries;\r\n  });\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    if (opts.tooltip) {\r\n      if (opts.tooltip.index == seriesIndex) {\r\n        context.beginPath();\r\n        context.setFillStyle(hexToRgb(eachSeries.color, opts.extra.pie.activeOpacity || 0.5));\r\n        context.moveTo(centerPosition.x, centerPosition.y);\r\n        context.arc(centerPosition.x, centerPosition.y, eachSeries._radius_ + activeRadius, eachSeries._start_,\r\n          eachSeries._start_ + 2 *\r\n          eachSeries._proportion_ * Math.PI);\r\n        context.closePath();\r\n        context.fill();\r\n      }\r\n    }\r\n    context.beginPath();\r\n    context.setLineWidth(pieOption.borderWidth * opts.pixelRatio);\r\n    context.lineJoin = \"round\";\r\n    context.setStrokeStyle(pieOption.borderColor);\r\n    context.setFillStyle(eachSeries.color);\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.arc(centerPosition.x, centerPosition.y, eachSeries._radius_, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n    if (pieOption.border == true) {\r\n      context.stroke();\r\n    }\r\n  });\r\n\r\n  if (opts.type === 'ring') {\r\n    var innerPieWidth = radius * 0.6;\r\n    if (typeof opts.extra.pie.ringWidth === 'number' && opts.extra.pie.ringWidth > 0) {\r\n      innerPieWidth = Math.max(0, radius - opts.extra.pie.ringWidth);\r\n    }\r\n    context.beginPath();\r\n    context.setFillStyle(opts.background || '#ffffff');\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.arc(centerPosition.x, centerPosition.y, innerPieWidth, 0, 2 * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n  }\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    var valid = false;\r\n    for (var i = 0, len = series.length; i < len; i++) {\r\n      if (series[i].data > 0) {\r\n        valid = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (valid) {\r\n      drawPieText(series, opts, config, context, radius, centerPosition);\r\n    }\r\n  }\r\n\r\n  if (process === 1 && opts.type === 'ring') {\r\n    drawRingTitle(opts, config, context, centerPosition);\r\n  }\r\n\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawRoseDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var roseOption = assign({}, {\r\n    type: 'area',\r\n    activeOpacity: 0.5,\r\n    activeRadius: 10 * opts.pixelRatio,\r\n    offsetAngle: 0,\r\n    labelWidth: 15 * opts.pixelRatio,\r\n    border:false,\r\n    borderWidth:2,\r\n    borderColor:'#FFFFFF'\r\n  }, opts.extra.rose);\r\n  if (config.pieChartLinePadding == 0) {\r\n    config.pieChartLinePadding = roseOption.activeRadius;\r\n  }\r\n  var centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.area[0] + (opts.height - opts.area[0] - opts.area[2]) / 2\r\n  };\r\n   var radius = Math.min((opts.width - opts.area[1] - opts.area[3]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding - config._pieTextMaxLength_, (opts.height - opts.area[0] - opts.area[2]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding);\r\n  var minRadius = roseOption.minRadius || radius * 0.5;\r\n\r\n  series = getRoseDataPoints(series, roseOption.type, minRadius, radius, process);\r\n\r\n  var activeRadius = roseOption.activeRadius;\r\n\r\n  series = series.map(function(eachSeries) {\r\n    eachSeries._start_ += (roseOption.offsetAngle || 0) * Math.PI / 180;\r\n    return eachSeries;\r\n  });\r\n\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    if (opts.tooltip) {\r\n      if (opts.tooltip.index == seriesIndex) {\r\n        context.beginPath();\r\n        context.setFillStyle(hexToRgb(eachSeries.color, roseOption.activeOpacity || 0.5));\r\n        context.moveTo(centerPosition.x, centerPosition.y);\r\n        context.arc(centerPosition.x, centerPosition.y, activeRadius + eachSeries._radius_, eachSeries._start_,\r\n          eachSeries._start_ + 2 * eachSeries._rose_proportion_ * Math.PI);\r\n        context.closePath();\r\n        context.fill();\r\n      }\r\n    }\r\n    context.beginPath();\r\n    context.setLineWidth(roseOption.borderWidth * opts.pixelRatio);\r\n    context.lineJoin = \"round\";\r\n    context.setStrokeStyle(roseOption.borderColor);\r\n    context.setFillStyle(eachSeries.color);\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.arc(centerPosition.x, centerPosition.y, eachSeries._radius_, eachSeries._start_, eachSeries._start_ + 2 *\r\n      eachSeries._rose_proportion_ * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n    if (roseOption.border == true) {\r\n      context.stroke();\r\n    }\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    var valid = false;\r\n    for (var i = 0, len = series.length; i < len; i++) {\r\n      if (series[i].data > 0) {\r\n        valid = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (valid) {\r\n      drawPieText(series, opts, config, context, radius, centerPosition);\r\n    }\r\n  }\r\n\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawArcbarDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var arcbarOption = assign({}, {\r\n    startAngle: 0.75,\r\n    endAngle: 0.25,\r\n    type: 'default',\r\n    width: 12 * opts.pixelRatio,\r\n\t\tgap:2 * opts.pixelRatio\r\n  }, opts.extra.arcbar);\r\n\r\n  series = getArcbarDataPoints(series, arcbarOption, process);\r\n\t\r\n  var centerPosition;\r\n\tif(arcbarOption.center){\r\n\t\tcenterPosition=arcbarOption.center;\r\n\t}else{\r\n\t\tcenterPosition= {\r\n\t\t  x: opts.width / 2,\r\n\t\t  y: opts.height / 2\r\n\t\t};\r\n\t}\r\n\t\r\n  var radius;\r\n\tif(arcbarOption.radius){\r\n\t\tradius=arcbarOption.radius;\r\n\t}else{\r\n\t\tradius = Math.min(centerPosition.x, centerPosition.y);\r\n\t\tradius -= 5 * opts.pixelRatio;\r\n\t\tradius -= arcbarOption.width / 2;\r\n\t}\r\n\t\r\n  for (let i = 0; i < series.length; i++) {\r\n    let eachSeries = series[i];\r\n\t\t//背景颜色\r\n\t\tcontext.setLineWidth(arcbarOption.width);\r\n\t\tcontext.setStrokeStyle(arcbarOption.backgroundColor || '#E9E9E9');\r\n\t\tcontext.setLineCap('round');\r\n\t\tcontext.beginPath();\r\n\t\tif (arcbarOption.type == 'default') {\r\n\t\t  context.arc(centerPosition.x, centerPosition.y, radius-(arcbarOption.width+arcbarOption.gap)*i, arcbarOption.startAngle * Math.PI, arcbarOption.endAngle * Math.PI, false);\r\n\t\t} else {\r\n\t\t  context.arc(centerPosition.x, centerPosition.y, radius-(arcbarOption.width+arcbarOption.gap)*i, 0, 2 * Math.PI, false);\r\n\t\t}\r\n\t\tcontext.stroke();\r\n\t\t//进度条\r\n    context.setLineWidth(arcbarOption.width);\r\n    context.setStrokeStyle(eachSeries.color);\r\n    context.setLineCap('round');\r\n    context.beginPath();\r\n    context.arc(centerPosition.x, centerPosition.y, radius-(arcbarOption.width+arcbarOption.gap)*i, arcbarOption.startAngle * Math.PI, eachSeries._proportion_ * Math.PI, false);\r\n    context.stroke();\r\n  }\r\n\r\n  drawRingTitle(opts, config, context, centerPosition);\r\n\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawGaugeDataPoints(categories, series, opts, config, context) {\r\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\r\n  var gaugeOption = assign({}, {\r\n\t\ttype:'default',\r\n    startAngle: 0.75,\r\n    endAngle: 0.25,\r\n    width: 15,\r\n    splitLine: {\r\n      fixRadius: 0,\r\n      splitNumber: 10,\r\n      width: 15,\r\n      color: '#FFFFFF',\r\n      childNumber: 5,\r\n      childWidth: 5\r\n    },\r\n    pointer: {\r\n      width: 15,\r\n      color: 'auto'\r\n    }\r\n  }, opts.extra.gauge);\r\n\r\n  if (gaugeOption.oldAngle == undefined) {\r\n    gaugeOption.oldAngle = gaugeOption.startAngle;\r\n  }\r\n  if (gaugeOption.oldData == undefined) {\r\n    gaugeOption.oldData = 0;\r\n  }\r\n  categories = getGaugeAxisPoints(categories, gaugeOption.startAngle, gaugeOption.endAngle);\r\n\r\n  var centerPosition = {\r\n    x: opts.width / 2,\r\n    y: opts.height / 2\r\n  };\r\n  var radius = Math.min(centerPosition.x, centerPosition.y);\r\n  radius -= 5 * opts.pixelRatio;\r\n  radius -= gaugeOption.width / 2;\r\n  var innerRadius = radius - gaugeOption.width;\r\n\tvar totalAngle=0;\r\n\t\r\n\t//判断仪表盘的样式：default百度样式，progress新样式\r\n\tif(gaugeOption.type == 'progress'){\r\n\t\t\r\n\t\t//## 第一步画中心圆形背景和进度条背景\r\n\t\t//中心圆形背景\r\n\t\tvar pieRadius = radius - gaugeOption.width*3;\r\n\t\tcontext.beginPath();\r\n\t\tlet gradient = context.createLinearGradient(centerPosition.x, centerPosition.y-pieRadius, centerPosition.x , centerPosition.y+pieRadius);\r\n\t\t//配置渐变填充（起点：中心点向上减半径；结束点中心点向下加半径）\r\n\t\tgradient.addColorStop('0', hexToRgb(series[0].color, 0.3));\r\n\t\tgradient.addColorStop('1.0',hexToRgb(\"#FFFFFF\", 0.1));\r\n\t\tcontext.setFillStyle(gradient);\r\n\t\tcontext.arc(centerPosition.x, centerPosition.y, pieRadius, 0, 2*Math.PI, false);\r\n\t\tcontext.fill();\r\n\t\t//画进度条背景\r\n\t\tcontext.setLineWidth(gaugeOption.width);\r\n\t\tcontext.setStrokeStyle(hexToRgb(series[0].color, 0.3));\r\n\t\tcontext.setLineCap('round');\r\n\t\tcontext.beginPath();\r\n\t\tcontext.arc(centerPosition.x, centerPosition.y, innerRadius , gaugeOption.startAngle * Math.PI, gaugeOption.endAngle *Math.PI, false);\r\n\t\tcontext.stroke();\r\n\t\t\r\n\t\t//## 第二步画刻度线\r\n\t\ttotalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n\t\tlet splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\r\n\t\tlet childAngle = totalAngle / gaugeOption.splitLine.splitNumber / gaugeOption.splitLine.childNumber;\r\n\t\tlet startX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius;\r\n\t\tlet endX = -radius - gaugeOption.width - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.width;\r\n\t\tcontext.save();\r\n\t\tcontext.translate(centerPosition.x, centerPosition.y);\r\n\t\tcontext.rotate((gaugeOption.startAngle - 1) * Math.PI);\r\n\t\tlet len = gaugeOption.splitLine.splitNumber * gaugeOption.splitLine.childNumber + 1;\r\n\t\tlet proc = series[0].data * process;\r\n\t\tfor (let i = 0; i < len; i++) {\r\n\t\t  context.beginPath();\r\n\t\t\t//刻度线随进度变色\r\n\t\t\tif(proc>(i/len)){\r\n\t\t\t\tcontext.setStrokeStyle(hexToRgb(series[0].color, 1));\r\n\t\t\t}else{\r\n\t\t\t\tcontext.setStrokeStyle(hexToRgb(series[0].color, 0.3));\r\n\t\t\t}\r\n\t\t  context.setLineWidth(3 * opts.pixelRatio);\r\n\t\t  context.moveTo(startX, 0);\r\n\t\t  context.lineTo(endX, 0);\r\n\t\t  context.stroke();\r\n\t\t  context.rotate(childAngle * Math.PI);\r\n\t\t}\r\n\t\tcontext.restore();\r\n\t\t\r\n\t\t//## 第三步画进度条\r\n\t\tseries = getArcbarDataPoints(series, gaugeOption, process);\r\n\t\tcontext.setLineWidth(gaugeOption.width);\r\n\t\tcontext.setStrokeStyle(series[0].color);\r\n\t\tcontext.setLineCap('round');\r\n\t\tcontext.beginPath();\r\n\t\tcontext.arc(centerPosition.x, centerPosition.y, innerRadius , gaugeOption.startAngle * Math.PI, series[0]._proportion_ *Math.PI, false);\r\n\t\tcontext.stroke();\r\n\t\t\r\n\t\t//## 第四步画指针\r\n\t\tlet pointerRadius = radius - gaugeOption.width*2.5;\r\n\t\tcontext.save();\r\n\t\tcontext.translate(centerPosition.x, centerPosition.y);\r\n\t\tcontext.rotate((series[0]._proportion_ - 1) * Math.PI);\r\n\t\tcontext.beginPath();\r\n\t\tcontext.setLineWidth(gaugeOption.width/3);\r\n\t\tlet gradient3 = context.createLinearGradient(0, -pointerRadius*0.6, 0 , pointerRadius*0.6);\r\n\t\tgradient3.addColorStop('0', hexToRgb('#FFFFFF', 0));\r\n\t\tgradient3.addColorStop('0.5', hexToRgb(series[0].color, 1));\r\n\t\tgradient3.addColorStop('1.0', hexToRgb('#FFFFFF', 0));\r\n\t\tcontext.setStrokeStyle(gradient3);\r\n\t\tcontext.arc(0, 0, pointerRadius , 0.85* Math.PI, 1.15 * Math.PI, false);\r\n\t\tcontext.stroke();\r\n\t\tcontext.beginPath();\r\n\t\tcontext.setLineWidth(1);\r\n\t\tcontext.setStrokeStyle(series[0].color);\r\n\t\tcontext.setFillStyle(series[0].color);\r\n\t\tcontext.moveTo(-pointerRadius-gaugeOption.width/3/2,-4);\r\n\t\tcontext.lineTo(-pointerRadius-gaugeOption.width/3/2-4,0);\r\n\t\tcontext.lineTo(-pointerRadius-gaugeOption.width/3/2,4);\r\n\t\tcontext.lineTo(-pointerRadius-gaugeOption.width/3/2,-4);\r\n\t\tcontext.stroke();\r\n\t\tcontext.fill();\r\n\t\tcontext.restore();\r\n\t\t\r\n\t//default百度样式\r\n\t}else{\r\n\t\t//画背景\r\n\t\tcontext.setLineWidth(gaugeOption.width);\r\n\t\tcontext.setLineCap('butt');\r\n\t\tfor (let i = 0; i < categories.length; i++) {\r\n\t\t  let eachCategories = categories[i];\r\n\t\t  context.beginPath();\r\n\t\t  context.setStrokeStyle(eachCategories.color);\r\n\t\t  context.arc(centerPosition.x, centerPosition.y, radius, eachCategories._startAngle_ * Math.PI, eachCategories._endAngle_ *Math.PI, false);\r\n\t\t  context.stroke();\r\n\t\t}\r\n\t\tcontext.save();\r\n\t\t\r\n\t\t//画刻度线\r\n\t\ttotalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n\t\tlet splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\r\n\t\tlet childAngle = totalAngle / gaugeOption.splitLine.splitNumber / gaugeOption.splitLine.childNumber;\r\n\t\tlet startX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius;\r\n\t\tlet endX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.width;\r\n\t\tlet childendX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.childWidth;\r\n\t\t\r\n\t\tcontext.translate(centerPosition.x, centerPosition.y);\r\n\t\tcontext.rotate((gaugeOption.startAngle - 1) * Math.PI);\r\n\t\t\r\n\t\tfor (let i = 0; i < gaugeOption.splitLine.splitNumber + 1; i++) {\r\n\t\t  context.beginPath();\r\n\t\t  context.setStrokeStyle(gaugeOption.splitLine.color);\r\n\t\t  context.setLineWidth(2 * opts.pixelRatio);\r\n\t\t  context.moveTo(startX, 0);\r\n\t\t  context.lineTo(endX, 0);\r\n\t\t  context.stroke();\r\n\t\t  context.rotate(splitAngle * Math.PI);\r\n\t\t}\r\n\t\tcontext.restore();\r\n\t\t\r\n\t\tcontext.save();\r\n\t\tcontext.translate(centerPosition.x, centerPosition.y);\r\n\t\tcontext.rotate((gaugeOption.startAngle - 1) * Math.PI);\r\n\t\t\r\n\t\tfor (let i = 0; i < gaugeOption.splitLine.splitNumber * gaugeOption.splitLine.childNumber + 1; i++) {\r\n\t\t  context.beginPath();\r\n\t\t  context.setStrokeStyle(gaugeOption.splitLine.color);\r\n\t\t  context.setLineWidth(1 * opts.pixelRatio);\r\n\t\t  context.moveTo(startX, 0);\r\n\t\t  context.lineTo(childendX, 0);\r\n\t\t  context.stroke();\r\n\t\t  context.rotate(childAngle * Math.PI);\r\n\t\t}\r\n\t\tcontext.restore();\r\n\t\t\r\n\t\t//画指针\r\n\t\tseries = getGaugeDataPoints(series, categories, gaugeOption, process);\r\n\t\t\r\n\t\tfor (let i = 0; i < series.length; i++) {\r\n\t\t  let eachSeries = series[i];\r\n\t\t  context.save();\r\n\t\t  context.translate(centerPosition.x, centerPosition.y);\r\n\t\t  context.rotate((eachSeries._proportion_ - 1) * Math.PI);\r\n\t\t  context.beginPath();\r\n\t\t  context.setFillStyle(eachSeries.color);\r\n\t\t  context.moveTo(gaugeOption.pointer.width, 0);\r\n\t\t  context.lineTo(0, -gaugeOption.pointer.width / 2);\r\n\t\t  context.lineTo(-innerRadius, 0);\r\n\t\t  context.lineTo(0, gaugeOption.pointer.width / 2);\r\n\t\t  context.lineTo(gaugeOption.pointer.width, 0);\r\n\t\t  context.closePath();\r\n\t\t  context.fill();\r\n\t\t  context.beginPath();\r\n\t\t  context.setFillStyle('#FFFFFF');\r\n\t\t  context.arc(0, 0, gaugeOption.pointer.width / 6, 0, 2 * Math.PI, false);\r\n\t\t  context.fill();\r\n\t\t  context.restore();\r\n\t\t}\r\n\t\t\r\n\t\tif (opts.dataLabel !== false) {\r\n\t\t  drawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//画仪表盘标题，副标题\r\n  drawRingTitle(opts, config, context, centerPosition);\r\n\r\n  if (process === 1 && opts.type === 'gauge') {\r\n    opts.extra.gauge.oldAngle = series[0]._proportion_;\r\n    opts.extra.gauge.oldData = series[0].data;\r\n  }\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    innerRadius: innerRadius,\r\n    categories: categories,\r\n    totalAngle: totalAngle\r\n  };\r\n}\r\n\r\nfunction drawRadarDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var radarOption = assign({},{\r\n    gridColor: '#cccccc',\r\n    labelColor: '#666666',\r\n    opacity: 0.2,\r\n\t\tgridCount:3\r\n  },opts.extra.radar);\r\n  \r\n  var coordinateAngle = getRadarCoordinateSeries(opts.categories.length);\r\n  \r\n  var centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.area[0] + (opts.height - opts.area[0] - opts.area[2]) / 2\r\n  };\r\n\r\n  var radius = Math.min(centerPosition.x - (getMaxTextListLength(opts.categories) + config.radarLabelTextMargin),\r\n    centerPosition.y - config.radarLabelTextMargin);\r\n  //TODO逻辑不对\r\n  radius -= opts.padding[1];\r\n\r\n  // draw grid\r\n  context.beginPath();\r\n  context.setLineWidth(1 * opts.pixelRatio);\r\n  context.setStrokeStyle(radarOption.gridColor);\r\n  coordinateAngle.forEach(function(angle) {\r\n    var pos = convertCoordinateOrigin(radius * Math.cos(angle), radius * Math.sin(angle), centerPosition);\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.lineTo(pos.x, pos.y);\r\n  });\r\n  context.stroke();\r\n  context.closePath();\r\n  // draw split line grid\r\n\r\n  var _loop = function _loop(i) {\r\n    var startPos = {};\r\n    context.beginPath();\r\n    context.setLineWidth(1 * opts.pixelRatio);\r\n    context.setStrokeStyle(radarOption.gridColor);\r\n    coordinateAngle.forEach(function(angle, index) {\r\n      var pos = convertCoordinateOrigin(radius / radarOption.gridCount * i * Math.cos(angle), radius / radarOption.gridCount * i * Math.sin(angle), centerPosition);\r\n      if (index === 0) {\r\n        startPos = pos;\r\n        context.moveTo(pos.x, pos.y);\r\n      } else {\r\n        context.lineTo(pos.x, pos.y);\r\n      }\r\n    });\r\n    context.lineTo(startPos.x, startPos.y);\r\n    context.stroke();\r\n    context.closePath();\r\n  };\r\n\r\n  for (var i = 1; i <= radarOption.gridCount; i++) {\r\n    _loop(i);\r\n  }\r\n\r\n  var radarDataPoints = getRadarDataPoints(coordinateAngle, centerPosition, radius, series, opts, process);\r\n\r\n  radarDataPoints.forEach(function(eachSeries, seriesIndex) {\r\n    // 绘制区域数据\r\n    context.beginPath();\r\n    context.setFillStyle(hexToRgb(eachSeries.color, radarOption.opacity));\r\n    eachSeries.data.forEach(function(item, index) {\r\n      if (index === 0) {\r\n        context.moveTo(item.position.x, item.position.y);\r\n      } else {\r\n        context.lineTo(item.position.x, item.position.y);\r\n      }\r\n    });\r\n    context.closePath();\r\n    context.fill();\r\n\r\n    if (opts.dataPointShape !== false) {\r\n      var points = eachSeries.data.map(function(item) {\r\n        return item.position;\r\n      });\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n  });\r\n  // draw label text\r\n  drawRadarLabel(coordinateAngle, radius, centerPosition, opts, config, context);\r\n\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    angleList: coordinateAngle\r\n  };\r\n}\r\n\r\nfunction normalInt(min, max, iter) {\r\n    iter = iter==0?1:iter;\r\n    var arr = [];\r\n    for (var i = 0; i < iter; i++) {\r\n        arr[i] = Math.random();\r\n    };\r\n    return  Math.floor(arr.reduce(function(i,j){return i+j})/iter*(max-min))+min;  \r\n};\r\n\r\nfunction collisionNew(area,points,width,height){\r\n    var isIn=false;\r\n    for(let i=0;i<points.length;i++){\r\n      if(points[i].area){\r\n        if(area[3]<points[i].area[1]||area[0]>points[i].area[2]||area[1]>points[i].area[3]||area[2]<points[i].area[0]){\r\n          if(area[0]<0 || area[1]<0 || area[2]>width || area[3]>height){\r\n            isIn=true;\r\n            break;\r\n          }else{\r\n            isIn=false;\r\n          }\r\n        }else{\r\n          isIn=true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return isIn;\r\n};\r\n\r\nfunction getBoundingBox(data) {\r\n  var bounds = {}, coords;\r\n  bounds.xMin = 180;\r\n  bounds.xMax = 0;\r\n  bounds.yMin = 90;\r\n  bounds.yMax = 0\r\n  for (var i = 0; i < data.length; i++) {\r\n      var coorda = data[i].geometry.coordinates\r\n      for (var k = 0; k < coorda.length; k++) {\r\n          coords = coorda[k];\r\n          if (coords.length == 1) {\r\n              coords = coords[0]\r\n          }\r\n          for (var j = 0; j < coords.length; j++) {\r\n              var longitude = coords[j][0];\r\n              var latitude = coords[j][1];\r\n              var point = {\r\n                  x: longitude, \r\n                  y: latitude \r\n              }\r\n              bounds.xMin = bounds.xMin < point.x ? bounds.xMin : point.x;\r\n              bounds.xMax = bounds.xMax > point.x ? bounds.xMax : point.x;\r\n              bounds.yMin = bounds.yMin < point.y ? bounds.yMin : point.y;\r\n              bounds.yMax = bounds.yMax > point.y ? bounds.yMax : point.y;\r\n          }\r\n      }\r\n  }\r\n  return bounds;\r\n}\r\n\r\nfunction coordinateToPoint(latitude, longitude,bounds,scale,xoffset,yoffset) {\r\n  return {\r\n      x: (longitude - bounds.xMin) * scale+xoffset,\r\n      y: (bounds.yMax - latitude) * scale+yoffset\r\n  };\r\n}\r\n\r\nfunction pointToCoordinate(pointY, pointX,bounds,scale,xoffset,yoffset) {\r\n  return {\r\n      x: (pointX-xoffset)/scale+bounds.xMin,\r\n      y: bounds.yMax - (pointY-yoffset)/scale\r\n  };\r\n}\r\n\r\nfunction isRayIntersectsSegment(poi,s_poi,e_poi){\r\n      if (s_poi[1]==e_poi[1]){return false;} \r\n      if (s_poi[1]>poi[1] && e_poi[1]>poi[1]){return false;}\r\n      if (s_poi[1]<poi[1] && e_poi[1]<poi[1]){return false;}\r\n      if (s_poi[1]==poi[1] && e_poi[1]>poi[1]){return false;}\r\n      if (e_poi[1]==poi[1] && s_poi[1]>poi[1]){return false;}\r\n      if (s_poi[0]<poi[0] && e_poi[1]<poi[1]){return false;}\r\n      let xseg=e_poi[0]-(e_poi[0]-s_poi[0])*(e_poi[1]-poi[1])/(e_poi[1]-s_poi[1]); \r\n      if (xseg<poi[0]){\r\n        return false;\r\n      }else{\r\n        return true;\r\n      }\r\n} \r\n\r\nfunction isPoiWithinPoly(poi,poly){\r\n  let sinsc=0;\r\n  for (let i=0;i<poly.length;i++){\r\n    let epoly=poly[i][0];\r\n    if (poly.length == 1) {\r\n      epoly = poly[i][0]\r\n    }\r\n    for(let j=0;j<epoly.length-1;j++){\r\n      let s_poi=epoly[j];\r\n      let e_poi=epoly[j+1];\r\n      if (isRayIntersectsSegment(poi,s_poi,e_poi)){\r\n        sinsc+=1;\r\n      }\r\n    }\r\n  }\r\n  \r\n  if(sinsc%2==1){\r\n    return true;\r\n  }else{\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\nfunction drawMapDataPoints(series, opts, config, context) {\r\n  var mapOption=assign({},{\r\n    border:true,\r\n    borderWidth:1,\r\n    borderColor:'#666666',\r\n    fillOpacity:0.6,\r\n    activeBorderColor:'#f04864',\r\n    activeFillColor:'#facc14',\r\n    activeFillOpacity:1\r\n  },opts.extra.map);\r\n  var coords, point;\r\n  var data = series;\r\n  var bounds= getBoundingBox(data);\r\n  var xScale = opts.width / Math.abs(bounds.xMax - bounds.xMin);\r\n  var yScale = opts.height / Math.abs(bounds.yMax - bounds.yMin);\r\n  var scale = xScale < yScale ? xScale : yScale;\r\n  var xoffset=opts.width/2-Math.abs(bounds.xMax - bounds.xMin)/2*scale;\r\n  var yoffset=opts.height/2-Math.abs(bounds.yMax - bounds.yMin)/2*scale;\r\n  context.beginPath();\r\n  context.clearRect(0, 0, opts.width, opts.height);\r\n  context.setFillStyle(opts.background||'#FFFFFF');\r\n  context.rect(0,0,opts.width,opts.height);\r\n  context.fill();\r\n  for (var i = 0; i < data.length; i++) {\r\n    context.beginPath();\r\n    context.setLineWidth(mapOption.borderWidth * opts.pixelRatio);\r\n    context.setStrokeStyle(mapOption.borderColor);\r\n    context.setFillStyle(hexToRgb(series[i].color, mapOption.fillOpacity));\r\n    if (opts.tooltip) {\r\n      if (opts.tooltip.index == i ) {\r\n        context.setStrokeStyle(mapOption.activeBorderColor);\r\n        context.setFillStyle(hexToRgb(mapOption.activeFillColor, mapOption.activeFillOpacity));\r\n      }\r\n    }\r\n    var coorda = data[i].geometry.coordinates\r\n    for (var k = 0; k < coorda.length; k++) {\r\n      coords = coorda[k];\r\n      if (coords.length == 1) {\r\n        coords = coords[0]\r\n      }\r\n      for (var j = 0; j < coords.length; j++) {\r\n        point = coordinateToPoint(coords[j][1], coords[j][0],bounds,scale,xoffset,yoffset)\r\n        if (j === 0) {\r\n          context.beginPath();\r\n          context.moveTo(point.x, point.y);\r\n        } else {\r\n          context.lineTo(point.x, point.y);\r\n        }\r\n      }\r\n      context.fill();\r\n      if(mapOption.border == true){\r\n        context.stroke();\r\n      }\r\n    }\r\n    if(opts.dataLabel == true){\r\n      var centerPoint = data[i].properties.centroid;\r\n      if(centerPoint){\r\n        point = coordinateToPoint(centerPoint[1], centerPoint[0],bounds,scale,xoffset,yoffset);\r\n        let fontSize=data[i].textSize||config.fontSize;\r\n        let text=data[i].properties.name;\r\n        context.beginPath();\r\n        context.setFontSize(fontSize)\r\n        context.setFillStyle(data[i].textColor||'#666666')\r\n        context.fillText(text, point.x-measureText(text,fontSize)/2, point.y+fontSize/2);\r\n        context.closePath();\r\n        context.stroke();\r\n      }\r\n    }\r\n  }\r\n  opts.chartData.mapData={\r\n    bounds:bounds,\r\n    scale:scale,\r\n    xoffset:xoffset,\r\n    yoffset:yoffset\r\n  }\r\n  drawToolTipBridge(opts, config, context,1);\r\n  context.draw();\r\n}\r\n\r\nfunction getWordCloudPoint(opts,type){\r\n  let points = opts.series.sort(function(a,b){return parseInt(b.textSize)-parseInt(a.textSize);});\r\n  switch (type) {\r\n    case 'normal':\r\n      for (let i = 0; i < points.length; i++) {\r\n        let text = points[i].name;\r\n        let tHeight = points[i].textSize;\r\n        let tWidth = measureText(text,tHeight);\r\n        let x,y;\r\n        let area;\r\n        let breaknum=0;\r\n        while(true) {\r\n            breaknum++;\r\n            x = normalInt(-opts.width/2, opts.width/2,5) - tWidth/2;\r\n            y = normalInt(-opts.height/2, opts.height/2,5) + tHeight/2;\r\n            area=[x-5+opts.width/2,y-5-tHeight+opts.height/2,x+tWidth+5+opts.width/2,y+5+opts.height/2];\r\n            let isCollision = collisionNew(area,points,opts.width,opts.height);\r\n            if (!isCollision) break;\r\n            if (breaknum==1000){\r\n              area=[-100,-100,-100,-100];\r\n              break;\r\n            }\r\n        };\r\n        points[i].area=area;\r\n      }\r\n    break;\r\n    case 'vertical':\r\n      function Spin(){\r\n        //获取均匀随机值，是否旋转，旋转的概率为（1-0.5）\r\n        if (Math.random()>0.7) {\r\n            return true;\r\n        }else {return false};\r\n      };\r\n      for (let i = 0; i < points.length; i++) { \r\n        let text = points[i].name;\r\n        let tHeight = points[i].textSize;\r\n        let tWidth = measureText(text,tHeight);\r\n        let isSpin = Spin(); \r\n        let x,y,area,areav;\r\n        let breaknum=0;\r\n        while(true) {\r\n          breaknum++;\r\n          let isCollision;\r\n          if (isSpin) {\r\n              x = normalInt(-opts.width/2, opts.width/2,5) - tWidth/2;\r\n              y = normalInt(-opts.height/2, opts.height/2,5)+tHeight/2;\r\n              area=[y-5-tWidth+opts.width/2,(-x-5+opts.height/2),y+5+opts.width/2,(-x+tHeight+5+opts.height/2)];\r\n              areav=[opts.width-(opts.width/2-opts.height/2)-(-x+tHeight+5+opts.height/2)-5,(opts.height/2-opts.width/2)+(y-5-tWidth+opts.width/2)-5,opts.width-(opts.width/2-opts.height/2)-(-x+tHeight+5+opts.height/2)+tHeight,(opts.height/2-opts.width/2)+(y-5-tWidth+opts.width/2)+tWidth+5];\r\n              isCollision = collisionNew(areav,points,opts.height,opts.width);\r\n          }else{\r\n            x = normalInt(-opts.width/2, opts.width/2,5) - tWidth/2;\r\n            y = normalInt(-opts.height/2, opts.height/2,5)+tHeight/2;\r\n            area=[x-5+opts.width/2,y-5-tHeight+opts.height/2,x+tWidth+5+opts.width/2,y+5+opts.height/2];\r\n            isCollision = collisionNew(area,points,opts.width,opts.height);\r\n          } \r\n          if (!isCollision) break;\r\n          if (breaknum==1000){\r\n            area=[-1000,-1000,-1000,-1000];\r\n            break;\r\n          }\r\n        };\r\n        if (isSpin) {\r\n          points[i].area=areav;\r\n          points[i].areav=area;\r\n        }else{\r\n          points[i].area=area;\r\n        }\r\n        points[i].rotate=isSpin;\r\n      };\r\n    break;\r\n  }\r\n  return points;\r\n}\r\n\r\n\r\nfunction drawWordCloudDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let wordOption = assign({},{\r\n    type: 'normal',\r\n    autoColors: true\r\n  },opts.extra.word);\r\n  \r\n  context.beginPath();\r\n  context.setFillStyle(opts.background||'#FFFFFF');\r\n  context.rect(0,0,opts.width,opts.height);\r\n  context.fill();\r\n  context.save();\r\n  let points = opts.chartData.wordCloudData;\r\n  context.translate(opts.width/2,opts.height/2);\r\n  \r\n  for(let i=0;i<points.length;i++){\r\n      context.save();\r\n      if(points[i].rotate){\r\n        context.rotate(90 * Math.PI / 180);\r\n      }\r\n      let text = points[i].name;\r\n      let tHeight = points[i].textSize;\r\n      let tWidth = measureText(text,tHeight);\r\n      context.beginPath();\r\n      context.setStrokeStyle(points[i].color);\r\n      context.setFillStyle(points[i].color);\r\n      context.setFontSize(tHeight);\r\n      if(points[i].rotate){\r\n        if(points[i].areav[0]>0){\r\n          if (opts.tooltip) {\r\n            if (opts.tooltip.index == i) {\r\n              context.strokeText(text,(points[i].areav[0]+5-opts.width/2)*process-tWidth*(1-process)/2,(points[i].areav[1]+5+tHeight-opts.height/2)*process);\r\n              }else{\r\n                context.fillText(text,(points[i].areav[0]+5-opts.width/2)*process-tWidth*(1-process)/2,(points[i].areav[1]+5+tHeight-opts.height/2)*process);\r\n              }\r\n          }else{\r\n            context.fillText(text,(points[i].areav[0]+5-opts.width/2)*process-tWidth*(1-process)/2,(points[i].areav[1]+5+tHeight-opts.height/2)*process);\r\n          } \r\n        }\r\n      }else{\r\n        if(points[i].area[0]>0){\r\n          if (opts.tooltip) {\r\n            if (opts.tooltip.index == i) {\r\n              context.strokeText(text,(points[i].area[0]+5-opts.width/2)*process-tWidth*(1-process)/2,(points[i].area[1]+5+tHeight-opts.height/2)*process);\r\n            }else{\r\n              context.fillText(text,(points[i].area[0]+5-opts.width/2)*process-tWidth*(1-process)/2,(points[i].area[1]+5+tHeight-opts.height/2)*process);\r\n            }\r\n          }else{\r\n            context.fillText(text,(points[i].area[0]+5-opts.width/2)*process-tWidth*(1-process)/2,(points[i].area[1]+5+tHeight-opts.height/2)*process);\r\n          }\r\n            \r\n        }\r\n      }\r\n      \r\n      context.stroke();\r\n      context.restore();\r\n  }\r\n  context.restore();\r\n}\r\n\r\nfunction drawFunnelDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let funnelOption = assign({},{\r\n    activeWidth:10,\r\n    activeOpacity:0.3,\r\n    border:false,\r\n    borderWidth:2,\r\n    borderColor:'#FFFFFF',\r\n    fillOpacity:1,\r\n    labelAlign:'right'\r\n  },opts.extra.funnel);\r\n  let eachSpacing = (opts.height - opts.area[0] - opts.area[2])/series.length;\r\n  let centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.height-opts.area[2]\r\n  };\r\n  let activeWidth = funnelOption.activeWidth;\r\n  let radius = Math.min((opts.width - opts.area[1] - opts.area[3]) / 2 - activeWidth, (opts.height - opts.area[0] - opts.area[2]) / 2 - activeWidth);\r\n  series = getFunnelDataPoints(series, radius, process);\r\n  context.save();\r\n  context.translate(centerPosition.x,centerPosition.y);\r\n  for(let i=0;i<series.length;i++){\r\n    if(i==0){\r\n      if (opts.tooltip) {\r\n        if (opts.tooltip.index == i) {\r\n          context.beginPath();\r\n          context.setFillStyle(hexToRgb(series[i].color, funnelOption.activeOpacity));\r\n          context.moveTo(-activeWidth, 0);\r\n          context.lineTo(-series[i].radius-activeWidth, -eachSpacing);\r\n          context.lineTo(series[i].radius+activeWidth, -eachSpacing);\r\n          context.lineTo(activeWidth, 0);\r\n          context.lineTo(-activeWidth, 0);\r\n          context.closePath();\r\n          context.fill();\r\n        }\r\n      }\r\n      series[i].funnelArea=[centerPosition.x-series[i].radius,centerPosition.y-eachSpacing,centerPosition.x+series[i].radius,centerPosition.y];\r\n      context.beginPath();\r\n      context.setLineWidth(funnelOption.borderWidth * opts.pixelRatio);\r\n      context.setStrokeStyle(funnelOption.borderColor);\r\n      context.setFillStyle(hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n      context.moveTo(0, 0);\r\n      context.lineTo(-series[i].radius, -eachSpacing);\r\n      context.lineTo(series[i].radius, -eachSpacing);\r\n      context.lineTo(0, 0);\r\n      context.closePath();\r\n      context.fill();\r\n      if(funnelOption.border == true){\r\n        context.stroke();\r\n      }\r\n    }else{\r\n      if (opts.tooltip) {\r\n        if (opts.tooltip.index == i) {\r\n          context.beginPath();\r\n          context.setFillStyle(hexToRgb(series[i].color, funnelOption.activeOpacity));\r\n          context.moveTo(0, 0);\r\n          context.lineTo(-series[i-1].radius-activeWidth, 0);\r\n          context.lineTo(-series[i].radius-activeWidth, -eachSpacing);\r\n          context.lineTo(series[i].radius+activeWidth, -eachSpacing);\r\n          context.lineTo(series[i-1].radius+activeWidth, 0);\r\n          context.lineTo(0, 0);\r\n          context.closePath();\r\n          context.fill();\r\n        }\r\n      }\r\n      series[i].funnelArea=[centerPosition.x-series[i].radius,centerPosition.y-eachSpacing*(i+1),centerPosition.x+series[i].radius,centerPosition.y-eachSpacing*i];\r\n      context.beginPath();\r\n      context.setLineWidth(funnelOption.borderWidth * opts.pixelRatio);\r\n      context.setStrokeStyle(funnelOption.borderColor);\r\n      context.setFillStyle(hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n      context.moveTo(0, 0);\r\n      context.lineTo(-series[i-1].radius, 0);\r\n      context.lineTo(-series[i].radius, -eachSpacing);\r\n      context.lineTo(series[i].radius, -eachSpacing);\r\n      context.lineTo(series[i-1].radius, 0);\r\n      context.lineTo(0, 0);\r\n      context.closePath();\r\n      context.fill();\r\n      if(funnelOption.border == true){\r\n        context.stroke();\r\n      }\r\n    }\r\n    context.translate(0,-eachSpacing)\r\n  }\r\n  context.restore();\r\n  \r\n  if (opts.dataLabel !== false && process === 1) {\r\n    drawFunnelText(series, opts, context, eachSpacing, funnelOption.labelAlign, activeWidth, centerPosition);\r\n  }\r\n  \r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawFunnelText(series, opts, context, eachSpacing, labelAlign,activeWidth, centerPosition){\r\n  for(let i=0;i<series.length;i++){\r\n    let item = series[i];\r\n    let startX,endX,startY,fontSize;\r\n    let text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) +'%';\r\n    if(labelAlign == 'right'){\r\n      if(i==0){\r\n        startX=(item.funnelArea[2]+centerPosition.x)/2;\r\n      }else{\r\n        startX=(item.funnelArea[2]+series[i-1].funnelArea[2])/2;\r\n      }\r\n      endX=startX+activeWidth*2;\r\n      startY=item.funnelArea[1]+eachSpacing/2;\r\n      fontSize = item.textSize || opts.fontSize;\r\n      context.setLineWidth(1 * opts.pixelRatio);\r\n      context.setStrokeStyle(item.color);\r\n      context.setFillStyle(item.color);\r\n      context.beginPath();\r\n      context.moveTo(startX,startY );\r\n      context.lineTo(endX,startY);\r\n      context.stroke();\r\n      context.closePath();\r\n      context.beginPath();\r\n      context.moveTo(endX, startY);\r\n      context.arc(endX, startY, 2, 0, 2 * Math.PI);\r\n      context.closePath();\r\n      context.fill();\r\n      context.beginPath();\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(item.textColor || '#666666');\r\n      context.fillText(text, endX+5, startY + fontSize/2 -2);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.closePath();\r\n    }else{\r\n      if(i==0){\r\n        startX=(item.funnelArea[0]+centerPosition.x)/2;\r\n      }else{\r\n        startX=(item.funnelArea[0]+series[i-1].funnelArea[0])/2;\r\n      }\r\n      endX=startX-activeWidth*2;\r\n      startY=item.funnelArea[1]+eachSpacing/2;\r\n      fontSize = item.textSize || opts.fontSize;\r\n      context.setLineWidth(1 * opts.pixelRatio);\r\n      context.setStrokeStyle(item.color);\r\n      context.setFillStyle(item.color);\r\n      context.beginPath();\r\n      context.moveTo(startX,startY );\r\n      context.lineTo(endX,startY);\r\n      context.stroke();\r\n      context.closePath();\r\n      context.beginPath();\r\n      context.moveTo(endX, startY);\r\n      context.arc(endX, startY, 2, 0, 2 * Math.PI);\r\n      context.closePath();\r\n      context.fill();\r\n      context.beginPath();\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(item.textColor || '#666666');\r\n      context.fillText(text, endX-5-measureText(text), startY + fontSize/2 -2);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.closePath();\r\n    }\r\n    \r\n  }\r\n}\r\n\r\n\r\nfunction drawCanvas(opts, context) {\r\n  context.draw();\r\n}\r\n\r\nvar Timing = {\r\n  easeIn: function easeIn(pos) {\r\n    return Math.pow(pos, 3);\r\n  },\r\n  easeOut: function easeOut(pos) {\r\n    return Math.pow(pos - 1, 3) + 1;\r\n  },\r\n  easeInOut: function easeInOut(pos) {\r\n    if ((pos /= 0.5) < 1) {\r\n      return 0.5 * Math.pow(pos, 3);\r\n    } else {\r\n      return 0.5 * (Math.pow(pos - 2, 3) + 2);\r\n    }\r\n  },\r\n  linear: function linear(pos) {\r\n    return pos;\r\n  }\r\n};\r\n\r\nfunction Animation(opts) {\r\n  this.isStop = false;\r\n  opts.duration = typeof opts.duration === 'undefined' ? 1000 : opts.duration;\r\n  opts.timing = opts.timing || 'linear';\r\n  var delay = 17;\r\n\r\n  function createAnimationFrame() {\r\n    if (typeof setTimeout !== 'undefined') {\r\n      return function(step, delay) {\r\n        setTimeout(function() {\r\n          var timeStamp = +new Date();\r\n          step(timeStamp);\r\n        }, delay);\r\n      };\r\n    } else if (typeof requestAnimationFrame !== 'undefined') {\r\n      return requestAnimationFrame;\r\n    } else {\r\n      return function(step) {\r\n        step(null);\r\n      };\r\n    }\r\n  };\r\n  var animationFrame = createAnimationFrame();\r\n  var startTimeStamp = null;\r\n  var _step = function step(timestamp) {\r\n    if (timestamp === null || this.isStop === true) {\r\n      opts.onProcess && opts.onProcess(1);\r\n      opts.onAnimationFinish && opts.onAnimationFinish();\r\n      return;\r\n    }\r\n    if (startTimeStamp === null) {\r\n      startTimeStamp = timestamp;\r\n    }\r\n    if (timestamp - startTimeStamp < opts.duration) {\r\n      var process = (timestamp - startTimeStamp) / opts.duration;\r\n      var timingFunction = Timing[opts.timing];\r\n      process = timingFunction(process);\r\n\r\n      opts.onProcess && opts.onProcess(process);\r\n      animationFrame(_step, delay);\r\n    } else {\r\n      opts.onProcess && opts.onProcess(1);\r\n      opts.onAnimationFinish && opts.onAnimationFinish();\r\n    }\r\n  };\r\n  _step = _step.bind(this);\r\n  animationFrame(_step, delay);\r\n}\r\n\r\n// stop animation immediately\r\n// and tigger onAnimationFinish\r\nAnimation.prototype.stop = function() {\r\n  this.isStop = true;\r\n};\r\n\r\nfunction drawCharts(type, opts, config, context) {\r\n  var _this = this;\r\n  var series = opts.series;\r\n  var categories = opts.categories;\r\n  series = fillSeries(series, opts, config);\r\n  var duration = opts.animation ? opts.duration : 0;\r\n  _this.animationInstance && _this.animationInstance.stop();\r\n  var seriesMA = null;\r\n  if (type == 'candle') {\r\n    let average = assign({}, opts.extra.candle.average);\r\n    if (average.show) {\r\n      seriesMA = calCandleMA(average.day, average.name, average.color, series[0].data);\r\n      seriesMA = fillSeries(seriesMA, opts, config);\r\n      opts.seriesMA = seriesMA;\r\n    } else if (opts.seriesMA) {\r\n      seriesMA = opts.seriesMA = fillSeries(opts.seriesMA, opts, config);\r\n    } else {\r\n      seriesMA = series;\r\n    }\r\n  } else {\r\n    seriesMA = series;\r\n  }\r\n\r\n  /* 过滤掉show=false的series */\r\n  opts._series_ = series = filterSeries(series);\r\n\r\n  //重新计算图表区域\r\n\r\n  opts.area = new Array(4);\r\n  //复位绘图区域\r\n  for (let j = 0; j < 4; j++) {\r\n    opts.area[j] = opts.padding[j];\r\n  }\r\n\r\n  //通过计算三大区域：图例、X轴、Y轴的大小，确定绘图区域\r\n  var _calLegendData = calLegendData(seriesMA, opts, config, opts.chartData),\r\n    legendHeight = _calLegendData.area.wholeHeight,\r\n    legendWidth = _calLegendData.area.wholeWidth;\r\n    \r\n  switch (opts.legend.position) {\r\n    case 'top':\r\n      opts.area[0] += legendHeight;\r\n      break;\r\n    case 'bottom':\r\n      opts.area[2] += legendHeight;\r\n      break;\r\n    case 'left':\r\n      opts.area[3] += legendWidth;\r\n      break;\r\n    case 'right':\r\n      opts.area[1] += legendWidth;\r\n      break;\r\n  }\r\n\r\n  let _calYAxisData = {},yAxisWidth = 0;\r\n  if (opts.type === 'line' || opts.type === 'column' || opts.type === 'area' || opts.type === 'mix' || opts.type === 'candle') {\r\n    _calYAxisData = calYAxisData(series, opts, config);\r\n    yAxisWidth = _calYAxisData.yAxisWidth;\r\n    //如果显示Y轴标题\r\n    if(opts.yAxis.showTitle){\r\n      let maxTitleHeight=0;\r\n      for(let i=0;i<opts.yAxis.data.length;i++){\r\n        maxTitleHeight = Math.max(maxTitleHeight,opts.yAxis.data[i].titleFontSize?opts.yAxis.data[i].titleFontSize:config.fontSize)\r\n      }\r\n      opts.area[0] += (maxTitleHeight+6)*opts.pixelRatio;\r\n    }\r\n    let rightIndex=0,leftIndex=0;\r\n    //计算主绘图区域左右位置\r\n    for(let i=0;i<yAxisWidth.length;i++){\r\n      if(yAxisWidth[i].position=='left'){\r\n        if(leftIndex>0){\r\n          opts.area[3] += yAxisWidth[i].width + opts.yAxis.padding;\r\n        }else{\r\n          opts.area[3] += yAxisWidth[i].width;\r\n        }\r\n        leftIndex +=1;\r\n      }else{\r\n        if(rightIndex>0){\r\n          opts.area[1] += yAxisWidth[i].width + opts.yAxis.padding;\r\n        }else{\r\n          opts.area[1] += yAxisWidth[i].width;\r\n        }\r\n        rightIndex +=1;\r\n      }\r\n    }\r\n  }else{\r\n    config.yAxisWidth = yAxisWidth;\r\n  }\r\n  opts.chartData.yAxisData = _calYAxisData;\r\n\r\n  if (opts.categories && opts.categories.length) {\r\n    opts.chartData.xAxisData = getXAxisPoints(opts.categories, opts, config);\r\n    let _calCategoriesData = calCategoriesData(opts.categories, opts, config, opts.chartData.xAxisData.eachSpacing),\r\n      xAxisHeight = _calCategoriesData.xAxisHeight,\r\n      angle = _calCategoriesData.angle;\r\n    config.xAxisHeight = xAxisHeight;\r\n    config._xAxisTextAngle_ = angle;\r\n    opts.area[2] += xAxisHeight;\r\n    opts.chartData.categoriesData = _calCategoriesData;\r\n  }else{\r\n\t\tif (opts.type === 'line' || opts.type === 'area' || opts.type === 'points') {\r\n\t\t\topts.chartData.xAxisData = calXAxisData(series, opts, config);\r\n\t\t\tcategories=opts.chartData.xAxisData.rangesFormat;\r\n\t\t\tlet _calCategoriesData = calCategoriesData(categories, opts, config, opts.chartData.xAxisData.eachSpacing),\r\n\t\t\t  xAxisHeight = _calCategoriesData.xAxisHeight,\r\n\t\t\t  angle = _calCategoriesData.angle;\r\n\t\t\tconfig.xAxisHeight = xAxisHeight;\r\n\t\t\tconfig._xAxisTextAngle_ = angle;\r\n\t\t\topts.area[2] += xAxisHeight;\r\n\t\t\topts.chartData.categoriesData = _calCategoriesData;\r\n\t\t}else{\r\n\t\t\topts.chartData.xAxisData={\r\n\t\t\t\txAxisPoints: []\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n  //计算右对齐偏移距离\r\n  if (opts.enableScroll && opts.xAxis.scrollAlign == 'right' && opts._scrollDistance_ === undefined) {\r\n    let offsetLeft = 0,\r\n      xAxisPoints = opts.chartData.xAxisData.xAxisPoints,\r\n      startX = opts.chartData.xAxisData.startX,\r\n      endX = opts.chartData.xAxisData.endX,\r\n      eachSpacing = opts.chartData.xAxisData.eachSpacing;\r\n    let totalWidth = eachSpacing * (xAxisPoints.length - 1);\r\n    let screenWidth = endX - startX;\r\n    offsetLeft = screenWidth - totalWidth;\r\n    _this.scrollOption = {\r\n      currentOffset: offsetLeft,\r\n      startTouchX: offsetLeft,\r\n      distance: 0,\r\n      lastMoveTime: 0\r\n    };\r\n    opts._scrollDistance_ = offsetLeft;\r\n  }\r\n\r\n  if (type === 'pie' || type === 'ring' || type === 'rose') {\r\n    config._pieTextMaxLength_ = opts.dataLabel === false ? 0 : getPieTextMaxLength(seriesMA);\r\n  }\r\n\r\n  switch (type) {\r\n    case 'word':\r\n      let wordOption = assign({},{\r\n        type: 'normal',\r\n        autoColors: true\r\n      },opts.extra.word);\r\n      if(opts.updateData==true || opts.updateData==undefined){\r\n        opts.chartData.wordCloudData=getWordCloudPoint(opts,wordOption.type);\r\n      }\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeInOut',\r\n        duration: duration,\r\n        onProcess: function(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawWordCloudDataPoints(series, opts, config, context,process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n    break;\r\n    case 'map':\r\n      context.clearRect(0, 0, opts.width, opts.height);\r\n      drawMapDataPoints(series, opts, config, context);\r\n    break;\r\n    case 'funnel':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeInOut',\r\n        duration: duration,\r\n        onProcess: function(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.funnelData = drawFunnelDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n    break;\r\n    case 'line':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeIn',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawLineDataPoints = drawLineDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawLineDataPoints.xAxisPoints,\r\n            calPoints = _drawLineDataPoints.calPoints,\r\n            eachSpacing = _drawLineDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'mix':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeIn',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawMixDataPoints = drawMixDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawMixDataPoints.xAxisPoints,\r\n            calPoints = _drawMixDataPoints.calPoints,\r\n            eachSpacing = _drawMixDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'column':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeIn',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawColumnDataPoints = drawColumnDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawColumnDataPoints.xAxisPoints,\r\n            calPoints = _drawColumnDataPoints.calPoints,\r\n            eachSpacing = _drawColumnDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'area':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeIn',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawAreaDataPoints = drawAreaDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawAreaDataPoints.xAxisPoints,\r\n            calPoints = _drawAreaDataPoints.calPoints,\r\n            eachSpacing = _drawAreaDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'ring':\r\n    case 'pie':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeInOut',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.pieData = drawPieDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'rose':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeInOut',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.pieData = drawRoseDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'radar':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeInOut',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.radarData = drawRadarDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'arcbar':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeInOut',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.arcbarData = drawArcbarDataPoints(series, opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'gauge':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeInOut',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.gaugeData = drawGaugeDataPoints(categories, series, opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'candle':\r\n      this.animationInstance = new Animation({\r\n        timing: 'easeIn',\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawCandleDataPoints = drawCandleDataPoints(series, seriesMA, opts, config, context, process),\r\n            xAxisPoints = _drawCandleDataPoints.xAxisPoints,\r\n            calPoints = _drawCandleDataPoints.calPoints,\r\n            eachSpacing = _drawCandleDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          if (seriesMA) {\r\n            drawLegend(seriesMA, opts, config, context, opts.chartData);\r\n          } else {\r\n            drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          }\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.event.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n  }\r\n}\r\n\r\n// simple event implement\r\n\r\nfunction Event() {\r\n  this.events = {};\r\n}\r\n\r\nEvent.prototype.addEventListener = function(type, listener) {\r\n  this.events[type] = this.events[type] || [];\r\n  this.events[type].push(listener);\r\n};\r\n\r\nEvent.prototype.trigger = function() {\r\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n    args[_key] = arguments[_key];\r\n  }\r\n\r\n  var type = args[0];\r\n  var params = args.slice(1);\r\n  if (!!this.events[type]) {\r\n    this.events[type].forEach(function(listener) {\r\n      try {\r\n        listener.apply(null, params);\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nvar Charts = function Charts(opts) {\r\n  opts.pixelRatio = opts.pixelRatio ? opts.pixelRatio : 1;\r\n  opts.fontSize = opts.fontSize ? opts.fontSize * opts.pixelRatio : 13 * opts.pixelRatio;\r\n  opts.title = assign({}, opts.title);\r\n  opts.subtitle = assign({}, opts.subtitle);\r\n  opts.duration = opts.duration ? opts.duration : 1000;\r\n  opts.yAxis = assign({}, {\r\n    data:[],\r\n    showTitle:false,\r\n    disabled:false,\r\n    disableGrid:false,\r\n    splitNumber:5,\r\n    gridType: 'solid',\r\n    dashLength: 4 * opts.pixelRatio,\r\n    gridColor:'#cccccc',\r\n    padding:10,\r\n    fontColor:'#666666'\r\n  }, opts.yAxis);\r\n  opts.yAxis.dashLength *= opts.pixelRatio;\r\n  opts.yAxis.padding *= opts.pixelRatio;\r\n  opts.xAxis = assign({}, {\r\n    rotateLabel: false,\r\n    type: 'calibration',\r\n    gridType: 'solid',\r\n    dashLength: 4,\r\n    scrollAlign: 'left',\r\n    boundaryGap:'center',\r\n    axisLine:true,\r\n    axisLineColor:'#cccccc'\r\n  }, opts.xAxis);\r\n  opts.xAxis.dashLength *= opts.pixelRatio;\r\n  opts.legend = assign({}, {\r\n    show: true,\r\n    position: 'bottom',\r\n    float: 'center',\r\n    backgroundColor: 'rgba(0,0,0,0)',\r\n    borderColor: 'rgba(0,0,0,0)',\r\n    borderWidth: 0,\r\n    padding: 5,\r\n    margin: 5,\r\n    itemGap: 10,\r\n    fontSize: opts.fontSize,\r\n    lineHeight: opts.fontSize,\r\n    fontColor: '#333333',\r\n    format: {},\r\n    hiddenColor: '#CECECE'\r\n  }, opts.legend);\r\n  opts.legend.borderWidth = opts.legend.borderWidth * opts.pixelRatio;\r\n  opts.legend.itemGap = opts.legend.itemGap * opts.pixelRatio;\r\n  opts.legend.padding = opts.legend.padding * opts.pixelRatio;\r\n  opts.legend.margin = opts.legend.margin * opts.pixelRatio;\r\n  opts.extra = assign({}, opts.extra);\r\n  opts.rotate = opts.rotate ? true : false;\r\n  opts.animation = opts.animation ? true : false;\r\n\topts.rotate = opts.rotate ? true : false;\r\n\r\n  let config$$1 = JSON.parse(JSON.stringify(config));\r\n  config$$1.colors = opts.colors ? opts.colors : config$$1.colors;\r\n  config$$1.yAxisTitleWidth = opts.yAxis.disabled !== true && opts.yAxis.title ? config$$1.yAxisTitleWidth : 0;\r\n  if (opts.type == 'pie' || opts.type == 'ring') {\r\n    config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : opts.extra.pie.labelWidth * opts.pixelRatio || config$$1.pieChartLinePadding * opts.pixelRatio;\r\n  }\r\n  if (opts.type == 'rose') {\r\n    config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : opts.extra.rose.labelWidth * opts.pixelRatio || config$$1.pieChartLinePadding * opts.pixelRatio;\r\n  }\r\n  config$$1.pieChartTextPadding = opts.dataLabel === false ? 0 : config$$1.pieChartTextPadding * opts.pixelRatio;\r\n  config$$1.yAxisSplit = opts.yAxis.splitNumber ? opts.yAxis.splitNumber : config.yAxisSplit;\r\n\r\n  //屏幕旋转\r\n  config$$1.rotate = opts.rotate;\r\n  if (opts.rotate) {\r\n    let tempWidth = opts.width;\r\n    let tempHeight = opts.height;\r\n    opts.width = tempHeight;\r\n    opts.height = tempWidth;\r\n  }\r\n\r\n  //适配高分屏\r\n  opts.padding = opts.padding ? opts.padding : config$$1.padding;\r\n  for (let i = 0; i < 4; i++) {\r\n    opts.padding[i] *= opts.pixelRatio;\r\n  }\r\n  config$$1.yAxisWidth = config.yAxisWidth * opts.pixelRatio;\r\n  config$$1.xAxisHeight = config.xAxisHeight * opts.pixelRatio;\r\n  if (opts.enableScroll && opts.xAxis.scrollShow) {\r\n    config$$1.xAxisHeight += 6 * opts.pixelRatio;\r\n  }\r\n  config$$1.xAxisLineHeight = config.xAxisLineHeight * opts.pixelRatio;\r\n  config$$1.fontSize = opts.fontSize;\r\n  config$$1.titleFontSize = config.titleFontSize * opts.pixelRatio;\r\n  config$$1.subtitleFontSize = config.subtitleFontSize * opts.pixelRatio;\r\n  config$$1.toolTipPadding = config.toolTipPadding * opts.pixelRatio;\r\n  config$$1.toolTipLineHeight = config.toolTipLineHeight * opts.pixelRatio;\r\n  config$$1.columePadding = config.columePadding * opts.pixelRatio;\r\n  opts.$this = opts.$this ? opts.$this : this;\r\n  \r\n  this.context = uni.createCanvasContext(opts.canvasId, opts.$this);\r\n  /* 兼容原生H5\r\n  this.context = document.getElementById(opts.canvasId).getContext(\"2d\");\r\n  this.context.setStrokeStyle = function(e){ return this.strokeStyle=e; }\r\n  this.context.setLineWidth = function(e){ return this.lineWidth=e; }\r\n  this.context.setLineCap = function(e){ return this.lineCap=e; }\r\n  this.context.setFontSize = function(e){ return this.font=e+\"px sans-serif\"; }\r\n  this.context.setFillStyle = function(e){ return this.fillStyle=e; }\r\n  this.context.draw = function(){ }\r\n  */\r\n\r\n  opts.chartData = {};\r\n  this.event = new Event();\r\n  this.scrollOption = {\r\n    currentOffset: 0,\r\n    startTouchX: 0,\r\n    distance: 0,\r\n    lastMoveTime: 0\r\n  };\r\n\r\n  this.opts = opts;\r\n  this.config = config$$1;\r\n\r\n  drawCharts.call(this, opts.type, opts, config$$1, this.context);\r\n};\r\n\r\nCharts.prototype.updateData = function() {\r\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n  this.opts = assign({}, this.opts, data);\r\n  this.opts.updateData = true;\r\n  let scrollPosition = data.scrollPosition || 'current';\r\n  switch (scrollPosition) {\r\n    case 'current':\r\n      this.opts._scrollDistance_ = this.scrollOption.currentOffset;\r\n      break;\r\n    case 'left':\r\n      this.opts._scrollDistance_ = 0;\r\n      this.scrollOption = {\r\n        currentOffset: 0,\r\n        startTouchX: 0,\r\n        distance: 0,\r\n        lastMoveTime: 0\r\n      };\r\n      break;\r\n    case 'right':\r\n      let _calYAxisData = calYAxisData(this.opts.series, this.opts, this.config),\r\n        yAxisWidth = _calYAxisData.yAxisWidth;\r\n      this.config.yAxisWidth = yAxisWidth;\r\n      let offsetLeft = 0;\r\n      let _getXAxisPoints0 = getXAxisPoints(this.opts.categories, this.opts, this.config),\r\n        xAxisPoints = _getXAxisPoints0.xAxisPoints,\r\n        startX = _getXAxisPoints0.startX,\r\n        endX = _getXAxisPoints0.endX,\r\n        eachSpacing = _getXAxisPoints0.eachSpacing;\r\n      let totalWidth = eachSpacing * (xAxisPoints.length - 1);\r\n      let screenWidth = endX - startX;\r\n      offsetLeft = screenWidth - totalWidth;\r\n      this.scrollOption = {\r\n        currentOffset: offsetLeft,\r\n        startTouchX: offsetLeft,\r\n        distance: 0,\r\n        lastMoveTime: 0\r\n      };\r\n      this.opts._scrollDistance_ = offsetLeft;\r\n      break;\r\n  }\r\n  drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\r\n};\r\n\r\nCharts.prototype.zoom = function() {\r\n  var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.opts.xAxis.itemCount;\r\n  if (this.opts.enableScroll !== true) {\r\n    console.log('请启用滚动条后使用！')\r\n    return;\r\n  }\r\n  //当前屏幕中间点\r\n  let centerPoint = Math.round(Math.abs(this.scrollOption.currentOffset) / this.opts.chartData.eachSpacing) + Math.round(\r\n    this.opts.xAxis.itemCount / 2);\r\n  this.opts.animation = false;\r\n  this.opts.xAxis.itemCount = val.itemCount;\r\n  //重新计算x轴偏移距离\r\n  let _calYAxisData = calYAxisData(this.opts.series, this.opts, this.config),\r\n    yAxisWidth = _calYAxisData.yAxisWidth;\r\n  this.config.yAxisWidth = yAxisWidth;\r\n  let offsetLeft = 0;\r\n  let _getXAxisPoints0 = getXAxisPoints(this.opts.categories, this.opts, this.config),\r\n    xAxisPoints = _getXAxisPoints0.xAxisPoints,\r\n    startX = _getXAxisPoints0.startX,\r\n    endX = _getXAxisPoints0.endX,\r\n    eachSpacing = _getXAxisPoints0.eachSpacing;\r\n  let centerLeft = eachSpacing * centerPoint;\r\n  let screenWidth = endX - startX;\r\n  let MaxLeft = screenWidth - eachSpacing * (xAxisPoints.length - 1);\r\n  offsetLeft = screenWidth / 2 - centerLeft;\r\n  if (offsetLeft > 0) {\r\n    offsetLeft = 0;\r\n  }\r\n  if (offsetLeft < MaxLeft) {\r\n    offsetLeft = MaxLeft;\r\n  }\r\n  this.scrollOption = {\r\n    currentOffset: offsetLeft,\r\n    startTouchX: offsetLeft,\r\n    distance: 0,\r\n    lastMoveTime: 0\r\n  };\r\n  this.opts._scrollDistance_ = offsetLeft;\r\n  drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\r\n};\r\n\r\nCharts.prototype.stopAnimation = function() {\r\n  this.animationInstance && this.animationInstance.stop();\r\n};\r\n\r\nCharts.prototype.addEventListener = function(type, listener) {\r\n  this.event.addEventListener(type, listener);\r\n};\r\n\r\nCharts.prototype.getCurrentDataIndex = function(e) {\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches) {\r\n    let _touches$ = getTouches(touches, this.opts, e);\r\n    if (this.opts.type === 'pie' || this.opts.type === 'ring' || this.opts.type === 'rose') {\r\n      return findPieChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.pieData);\r\n    } else if (this.opts.type === 'radar') {\r\n      return findRadarChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.radarData, this.opts.categories.length);\r\n    } else if (this.opts.type === 'funnel') {\r\n      return findFunnelChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.funnelData);\r\n    } else if (this.opts.type === 'map') {\r\n      return findMapChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts);\r\n    }else if (this.opts.type === 'word') {\r\n      return findWordChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.wordCloudData);\r\n    } else {\r\n      return findCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.calPoints, this.opts, this.config, Math.abs(this.scrollOption.currentOffset));\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nCharts.prototype.getLegendDataIndex = function(e) {\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches) {\r\n    let _touches$ = getTouches(touches, this.opts, e);\r\n    return findLegendIndex({\r\n      x: _touches$.x,\r\n      y: _touches$.y\r\n    }, this.opts.chartData.legendData);\r\n  }\r\n  return -1;\r\n};\r\n\r\nCharts.prototype.touchLegend = function(e) {\r\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches) {\r\n    var _touches$ = getTouches(touches, this.opts, e);\r\n    var index = this.getLegendDataIndex(e);\r\n    if (index >= 0) {\r\n      this.opts.series[index].show = !this.opts.series[index].show;\r\n      this.opts.animation = option.animation ? true : false;\r\n\t\t\tthis.opts._scrollDistance_= this.scrollOption.currentOffset;\r\n      drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\r\n    }\r\n  }\r\n\r\n};\r\n\r\nCharts.prototype.showToolTip = function(e) {\r\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (!touches) {\r\n    console.log(\"touchError\");\r\n  }\r\n  var _touches$ = getTouches(touches, this.opts, e);\r\n  var currentOffset = this.scrollOption.currentOffset;\r\n  var opts = assign({}, this.opts, {\r\n    _scrollDistance_: currentOffset,\r\n    animation: false\r\n  });\r\n  if (this.opts.type === 'line' || this.opts.type === 'area' || this.opts.type === 'column') {\r\n    var index = option.index==undefined? this.getCurrentDataIndex(e):option.index ;\r\n    if (index > -1) {\r\n      var seriesData = getSeriesDataItem(this.opts.series, index);\r\n      if (seriesData.length !== 0) {\r\n        var _getToolTipData = getToolTipData(seriesData, this.opts.chartData.calPoints, index, this.opts.categories,option),\r\n          textList = _getToolTipData.textList,\r\n          offset = _getToolTipData.offset;\r\n        offset.y = _touches$.y;\r\n        opts.tooltip = {\r\n          textList: option.textList?option.textList:textList,\r\n          offset: offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'mix') {\r\n    var index = option.index==undefined? this.getCurrentDataIndex(e):option.index ;\r\n    if (index > -1) {\r\n      var currentOffset = this.scrollOption.currentOffset;\r\n      var opts = assign({}, this.opts, {\r\n        _scrollDistance_: currentOffset,\r\n        animation: false\r\n      });\r\n      var seriesData = getSeriesDataItem(this.opts.series, index);\r\n      if (seriesData.length !== 0) {\r\n        var _getMixToolTipData = getMixToolTipData(seriesData, this.opts.chartData.calPoints, index, this.opts.categories,option),\r\n          textList = _getMixToolTipData.textList,\r\n          offset = _getMixToolTipData.offset;\r\n        offset.y = _touches$.y;\r\n        opts.tooltip = {\r\n          textList: option.textList?option.textList:textList,\r\n          offset: offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'candle') {\r\n    var index = option.index==undefined? this.getCurrentDataIndex(e):option.index ;\r\n    if (index > -1) {\r\n      var currentOffset = this.scrollOption.currentOffset;\r\n      var opts = assign({}, this.opts, {\r\n        _scrollDistance_: currentOffset,\r\n        animation: false\r\n      });\r\n      var seriesData = getSeriesDataItem(this.opts.series, index);\r\n      if (seriesData.length !== 0) {\r\n        var _getToolTipData = getCandleToolTipData(this.opts.series[0].data, seriesData, this.opts.chartData.calPoints,\r\n            index, this.opts.categories, this.opts.extra.candle, option),\r\n          textList = _getToolTipData.textList,\r\n          offset = _getToolTipData.offset;\r\n        offset.y = _touches$.y;\r\n        opts.tooltip = {\r\n          textList: option.textList?option.textList:textList,\r\n          offset: offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'pie' || this.opts.type === 'ring' || this.opts.type === 'rose'||this.opts.type === 'funnel' ) {\r\n    var index = option.index==undefined? this.getCurrentDataIndex(e):option.index ;\r\n    if (index > -1) {\r\n      var currentOffset = this.scrollOption.currentOffset;\r\n      var opts = assign({}, this.opts, {\r\n        _scrollDistance_: currentOffset,\r\n        animation: false\r\n      });\r\n      var seriesData = this.opts._series_[index];\r\n      var textList = [{\r\n        text: option.format ? option.format(seriesData) : seriesData.name + ': ' + seriesData.data,\r\n        color: seriesData.color\r\n      }];\r\n      var offset = {\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      };\r\n      opts.tooltip = {\r\n        textList: option.textList?option.textList:textList,\r\n        offset: offset,\r\n        option: option,\r\n        index: index\r\n      };\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'map'||this.opts.type === 'word') {\r\n    var index = option.index==undefined? this.getCurrentDataIndex(e):option.index ;\r\n    if (index > -1) {\r\n      var currentOffset = this.scrollOption.currentOffset;\r\n      var opts = assign({}, this.opts, {\r\n        _scrollDistance_: currentOffset,\r\n        animation: false\r\n      });\r\n      var seriesData = this.opts._series_[index];\r\n      var textList = [{\r\n        text: option.format ? option.format(seriesData) : seriesData.properties.name ,\r\n        color: seriesData.color\r\n      }];\r\n      var offset = {\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      };\r\n      opts.tooltip = {\r\n        textList: option.textList?option.textList:textList,\r\n        offset: offset,\r\n        option: option,\r\n        index: index\r\n      };\r\n    }\r\n    opts.updateData = false;\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'radar') {\r\n    var index = option.index==undefined? this.getCurrentDataIndex(e):option.index ;\r\n    if (index > -1) {\r\n      var currentOffset = this.scrollOption.currentOffset;\r\n      var opts = assign({}, this.opts, {\r\n        _scrollDistance_: currentOffset,\r\n        animation: false\r\n      });\r\n      var seriesData = getSeriesDataItem(this.opts.series, index);\r\n      if (seriesData.length !== 0) {\r\n        var textList = seriesData.map(function(item) {\r\n          return {\r\n            text: option.format ? option.format(item) : item.name + ': ' + item.data,\r\n            color: item.color\r\n          };\r\n        });\r\n        var offset = {\r\n          x: _touches$.x,\r\n          y: _touches$.y\r\n        };\r\n        opts.tooltip = {\r\n          textList: option.textList?option.textList:textList,\r\n          offset: offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n};\r\n\r\nCharts.prototype.translate = function(distance) {\r\n  this.scrollOption = {\r\n    currentOffset: distance,\r\n    startTouchX: distance,\r\n    distance: 0,\r\n    lastMoveTime: 0\r\n  };\r\n  let opts = assign({}, this.opts, {\r\n    _scrollDistance_: distance,\r\n    animation: false\r\n  });\r\n  drawCharts.call(this, this.opts.type, opts, this.config, this.context);\r\n};\r\n\r\nCharts.prototype.scrollStart = function(e) {\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  var _touches$ = getTouches(touches, this.opts, e);\r\n  if (touches && this.opts.enableScroll === true) {\r\n    this.scrollOption.startTouchX = _touches$.x;\r\n  }\r\n};\r\n\r\nCharts.prototype.scroll = function(e) {\r\n  if (this.scrollOption.lastMoveTime === 0) {\r\n    this.scrollOption.lastMoveTime = Date.now();\r\n  }\r\n  let Limit = this.opts.extra.touchMoveLimit || 20;\r\n  let currMoveTime = Date.now();\r\n  let duration = currMoveTime - this.scrollOption.lastMoveTime;\r\n  if (duration < Math.floor(1000 / Limit)) return;\r\n  this.scrollOption.lastMoveTime = currMoveTime;\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches && this.opts.enableScroll === true) {\r\n    var _touches$ = getTouches(touches, this.opts, e);\r\n    var _distance;\r\n    _distance = _touches$.x - this.scrollOption.startTouchX;\r\n    var currentOffset = this.scrollOption.currentOffset;\r\n    var validDistance = calValidDistance(this,currentOffset + _distance, this.opts.chartData, this.config, this.opts);\r\n    this.scrollOption.distance = _distance = validDistance - currentOffset;\r\n    var opts = assign({}, this.opts, {\r\n      _scrollDistance_: currentOffset + _distance,\r\n      animation: false\r\n    });\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n    return currentOffset + _distance;\r\n  }\r\n};\r\n\r\nCharts.prototype.scrollEnd = function(e) {\r\n  if (this.opts.enableScroll === true) {\r\n    var _scrollOption = this.scrollOption,\r\n      currentOffset = _scrollOption.currentOffset,\r\n      distance = _scrollOption.distance;\r\n    this.scrollOption.currentOffset = currentOffset + distance;\r\n    this.scrollOption.distance = 0;\r\n  }\r\n};\r\nif (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n  module.exports = Charts;\r\n  //export default Charts;//建议使用nodejs的module导出方式，如报错请使用export方式导出\r\n}\r\n"],"sourceRoot":""}