(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/index/index"],{4342:function(t,e,n){"use strict";var i=n("9951"),o=n.n(i);o.a},"542a":function(t,e,n){"use strict";(function(t){n("7736");i(n("66fd"));var e=i(n("de72"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},9951:function(t,e,n){},b927:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("4795")),o=s(n("5ab2"));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,i,o,s,a){try{var r=t[s](a),u=r.value}catch(c){return void n(c)}r.done?e(u):Promise.resolve(u).then(i,o)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function r(t){a(s,i,o,r,u,"next",t)}function u(t){a(s,i,o,r,u,"throw",t)}r(void 0)}))}}var u={data:function(){return{customStyle:{width:"50rpx",height:"30rpx","border-radius":"4rpx","font-size":"10px",padding:"20rpx 30rpx"},cities:[],steps:0,sleep:0,heartRate:0,bannerList:[],appList:[],rows:10,page:1,headLines:[],allLoaded:!1,loadMoreStatus:"loadmore",key:"481e7ccc7d73fe8ed0bbe1b1181937ac",point:null,amapPlugin:null}},computed:{shopMallUrl:function(){return"http://mall.yinaf.com/pages/index.html#/index?sessionId=".concat(this.sessionId)},userInfo:function(){return this.$store.state.app.userInfo},sessionId:function(){return this.$store.state.app.sessionId},userId:function(){return this.$store.state.app.userId},userName:function(){return this.$store.state.app.userName},realName:function(){return this.$store.state.app.realName},watchId:function(){return this.$store.state.member.watchId},dateFormat:function(){return this.$u.timeFormat(new Date,"yyyy-mm-dd")},params:function(){return{memberId:this.memberId,type:1,data:this.dateFormat,sessionId:this.sessionId}},memberId:function(){return this.$store.state.member.memberId},houseId:function(){return this.$store.state.app.houseId},locationCity:function(){return this.$store.state.app.locationCity},cityId:function(){return this.$store.state.app.cityId}},onReachBottom:function(){var t=this;this.allLoaded||(this.loadMoreStatus="loading",this.page++,setTimeout((function(){t.findNewsPage("Yo")}),500))},onLoad:function(){this.amapPlugin=new o.default.AMapWX({key:this.key})},onShow:function(){console.log(this.cityId),this.init()},onHide:function(){this.page=1,this.findNewsPage()},methods:{testClick:function(t){console.log("???caniuse?"),console.log(t)},init:function(){var t=this;return r(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getLocation();case 2:t.findNewsPage(),t.sessionId&&(t.getUser(),t.getMemberList(),t.getHouseList()),t.watchId&&(t.getStep(),t.getSleep(),t.getHr());case 5:case"end":return e.stop()}}),e)})))()},iconClick:function(){this.watchId||t.$emit("scanCode",0)},turnToH5:function(e,n,i){if("中康体检"===n&&!i&&this.sessionId){var o={sessionId:this.sessionId,userId:this.userId,userName:this.userName,name:this.realName,sex:this.userInfo.gender||1};return this.rebuildUrl(o,e,n),!1}t.navigateTo({url:"../../public/webviewPage/webviewPage?url="+encodeURIComponent(e)+"&title="+n})},rebuildUrl:function(t,e,n){var i=this;this.$http.post("/mobile/index/loginHealthy",t).then((function(t){if(t.data.success){var o="".concat(e,"?token=").concat(t.data.obj.token);i.turnToH5(o,n,"ok")}}))},getStep:function(){var t=this;this.$http.get("/mobile/healthy/getStepToDay",this.params).then((function(e){e.data.success&&(t.steps=e.data.obj.step)}))},getSleep:function(){var t=this;this.$http.get("/mobile/healthy/getSleepToDay",this.params).then((function(e){e.data.success&&(t.sleep=e.data.obj.duration)}))},getHr:function(){var t=this;this.$http.get("/mobile/healthy/getCurrentHeartRate",this.params).then((function(e){e.data.success&&(t.heartRate=e.data.obj.bpm)}))},turnTo:function(t){console.log(t),t.app_jump_url&&this.turnToH5(t.app_jump_url,t.app_title)},toDetails:function(e){t.navigateTo({url:"../../index/newsDetails/newsDetails?newsId=".concat(e)})},toSelectCity:function(){t.navigateTo({url:"../../index/cityPicker/cityPicker"})},getLocation:function(){var e=this;if(this.cityId)console.log("??ss"),this.getIndex();else{console.log(">>>>>");var n=this;t.getLocation({type:"gcj02",geocode:!0,success:function(t){if(console.log(t),"getLocation:ok"===t.errMsg){var i=t.latitude,o=t.longitude;e.point={latitude:i,longitude:o},e.$store.commit("SET_SINGLE_ITEM",["locationPoint",e.point]),e.getCityList(i,o),n.amapPlugin.getRegeo({success:function(t){var e=t[0].regeocodeData.addressComponent.adcode,i=t[0].regeocodeData.addressComponent.city,o=e.slice(0,4)+"00";n.$store.commit("SET_SINGLE_ITEM",["locationCity",i]),n.$store.commit("SET_SINGLE_ITEM",["areaId",o])}})}}})}},getCityList:function(t,e){var n=this;console.log(this.point);var i={sessionId:this.sessionId,lat:t,log:e};this.$http.get("/mobile/index/getMiniCitys",i).then((function(t){if(t.data.success){var e=t.data.obj,i=e.recommendCity;n.$store.commit("SET_SINGLE_ITEM",["recommendCity",i]),n.city=e.city,delete e.city,delete e.recommendCity,console.log(e);var o=Object.keys(e),s=Object.values(e);console.log(s);for(var a=[],r=[],u=0;u<o.length;u++)a.push(o[u]),r.push(s[u]);console.log(r),n.$store.commit("SET_SINGLE_ITEM",["indexList",a]),n.$store.commit("SET_SINGLE_ITEM",["indexItem",r]),n.cities=s.flat(),n.cities.some((function(t){if(t.areaName=n.locationCity){var e=t.cityId;return n.$store.commit("SET_SINGLE_ITEM",["cityId",e]),!0}})),n.getIndex()}}))},getUser:function(){var t=this;this.$http.get("/mobile/user/getUser",{sessionId:this.sessionId}).then((function(e){if(e.data.success){var n=e.data.obj;t.$store.commit("SET_EACH_ITEM",n)}}))},getMemberList:function(){var t=this;console.info(1123),this.memberId||this.$http.get("/mobile/user/getMemberList",{sessionId:this.sessionId}).then((function(e){if(e.data.success){var n=e.data.obj;if(Array.isArray(n)&&n.length){var i=n[0].memberId,o=n[0].watchId;t.$store.commit("SET_SINGLE_ITEM",["memberList",n]),t.$store.commit("SET_EACH_MEMBER_ITEM",n[0]),t.$store.commit("SET_SINGLE_ITEM",["memberId",i]),t.$store.commit("SET_SINGLE_ITEM",["watchId",o])}}}))},getHouseList:function(){var t=this;if(!this.houseId){var e={sessionId:this.sessionId,userId:this.userId};this.$http.get("/owner/getHouse",e).then((function(e){if(e.data.success){var n=e.data.obj;if(Array.isArray(n)&&n.length){var i=n[0].houseId;t.$store.commit("SET_SINGLE_ITEM",["houseList",n]),t.$store.commit("SET_SINGLE_ITEM",["houseId",i])}}}))}},getIndex:function(){var t=this;console.log("cityid",this.cityId);var e={cityId:this.cityId,platform:2};this.$http.get("/mobile/index/getIndex",e).then((function(e){if(e.data.success){var n=e.data.obj,i=n.bannerList;Array.isArray(i)&&i.length&&(t.bannerList=i.map((function(t){return{image:t.banner_pic,url:t.banner_jump_url}}))),t.appList=n.applicationList}}))},findNewsPage:function(t){var e=this,n={cityId:this.cityId,platform:2,rows:this.rows,page:this.page};this.$http.get("/mobile/index/findNewsPage",n).then((function(n){if(n.data.success){console.log(n.data);var i=n.data.rows,o=n.data.pager;e.allLoaded=o.currentPage===o.totalPages,e.loadMoreStatus=e.allLoaded?"nomore":"loading",e.headLines=t?e.headLines.concat(i):i}}))}}};e.default=u}).call(this,n("543d")["default"])},de72:function(t,e,n){"use strict";n.r(e);var i=n("f08e"),o=n("f1cb");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("4342");var a,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"0f32799b",null,!1,i["a"],a);e["default"]=u.exports},f08e:function(t,e,n){"use strict";var i={uRow:function(){return n.e("uview-ui/components/u-row/u-row").then(n.bind(null,"779d"))},uCol:function(){return n.e("uview-ui/components/u-col/u-col").then(n.bind(null,"1265"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"513c"))},uSwiper:function(){return n.e("uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"b3e1"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"62ea"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"933c"))}},o=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}))},f1cb:function(t,e,n){"use strict";n.r(e);var i=n("b927"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a}},[["542a","common/runtime","common/vendor"]]]);