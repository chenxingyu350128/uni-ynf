(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/family/family"],{"04cc":function(e,t,i){"use strict";i.r(t);var n=i("3728"),o=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=o.a},3728:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"family",data:function(){return{clickValid:!0,showBS:!1,scanInput:"",showCodeInput:!1,bsList:[{text:"扫码添加",color:"#00aaef",fontSize:28},{text:"手动添加",color:"#00aaef",fontSize:28}],items:[{title:"实时数据",color:"#97e08e",icon:"chart-bar"},{title:"服务套餐",color:"#f4d47a",icon:"room-service-outline"},{title:"联系人",color:"#f4c293",icon:"group-line"},{title:"定位",color:"#f9b4b4",icon:"location"},{title:"在线聊天",color:"#97e08e",icon:"comment-multiple"},{title:"电话呼叫",color:"#f4d47a",icon:"telephone"},{title:"警报提示",color:"#f4c293",icon:"alarm-warning"},{title:"腕表设置",color:"#f9b4b4",icon:"watch-nice"},{title:"饮食记录",color:"#97e08e",icon:"silverware-variant"},{title:"膳食推荐",color:"#f4d47a",icon:"rgoblet-fill"},{title:"生活日志",color:"#f4c293",icon:"sprout"},{title:"健康档案",color:"#f9b4b4",icon:"order"}],showMenu:!1,showModal:!1,defaultAvatar:i("478e"),series_id:"",seriesName:"",seriesRemarks:"",seriesImg:"",integralNum:"",memberIntegral:"",carouselList:[],careCarousel:[],scanType:""}},computed:{watchId:function(){return this.$store.state.member.watchId},sessionId:function(){return this.$store.state.app.sessionId},image:function(){return this.$store.state.member.image},watchPhone:function(){return this.$store.state.member.watchPhone},memberId:{get:function(){return this.$store.state.member.memberId},set:function(e){console.log("设置memberId:",e)}},realName:function(){return this.$store.state.member.realName},battery:function(){return this.$store.state.app.battery},memberList:{get:function(){return this.$store.state.app.memberList},set:function(){}}},watch:{watchId:{handler:function(e){e&&this.getBattery()},immediate:!0},memberId:{handler:function(e,t){console.log(e),console.log(this.memberId),e&&this.getMemberDetails()},immediate:!0}},onShow:function(){console.log(this.$store)},methods:{memberChange:function(t){var i,n=this;return console.log("点击事件"),this.sessionId?!(this.memberList&&this.memberList.length<2)&&(!!this.clickValid&&(this.clickValid=!1,this.memberList.some((function(e,t){if(n.memberId===e.memberId)return i=t,!1})),console.log(this.clickValid),"plus"===t&&(i===this.memberList.length-1?this.$store.commit("SET_EACH_MEMBER_ITEM",this.memberList[0]):this.$store.commit("SET_EACH_MEMBER_ITEM",this.memberList[i+1])),"minus"===t&&(0===i?this.$store.commit("SET_EACH_MEMBER_ITEM",this.memberList[this.memberList.length-1]):this.$store.commit("SET_EACH_MEMBER_ITEM",this.memberList[i-1])),void setTimeout((function(){console.log("banjinlai"),n.clickValid=!0}),300))):(e.showToast({title:"请先授权登录",icon:"none"}),setTimeout((function(){e.navigateTo({url:"../../public/firstCome/firstCome"})}),1e3),!1)},toQrcode:function(){e.navigateTo({url:"../../family/QrCode"})},toScoreDetails:function(){console.log("qqq"),e.navigateTo({url:"../../family/integralPage"})},toMemberInfo:function(){e.navigateTo({url:"../../family/InformationDetails"})},getMemberDetails:function(){console.log("memberId变动"+this.memberId),this.getDeviceInfo(),this.getCareCarousel(),this.getMemberIntegral()},getCareCarousel:function(){var e=this,t={sessionId:this.sessionId,memberId:this.memberId};this.$http.post("/mobile/healthy/getCareCarousel",t).then((function(t){t.data.success&&(e.careCarousel=t.data.obj,e.carouselList=e.careCarousel.map((function(e){return e.content})))}))},getBattery:function(){var e=this,t={sessionId:this.sessionId,watchId:this.watchId,memberId:this.memberId};this.$http.get("/mobile/healthy/getWatchBattery",t).then((function(t){t.data.success&&e.$store.commit("SET_SINGLE_ITEM",["battery",t.data.obj])}))},getMemberIntegral:function(){var e=this,t={memberId:this.memberId,sessionId:this.sessionId};this.$http.get("/mobile/activity/getIntegralTack",t).then((function(t){t.data.success&&(e.memberIntegral=t.data.obj.integralNum)}))},getDeviceInfo:function(){var e=this;console.log(122);var t={sessionId:this.sessionId,memberId:this.memberId};this.$http.post("/mobile/healthy/getWacthInfo",t).then((function(t){if(t.data.success){var i=t.data.obj;e.seriesName=i.seriesName,e.seriesImg=decodeURIComponent(i.seriesImg),e.seriesRemarks=i.seriesRemarks}}))},menuClick:function(t){return this.showMenu=!1,this.sessionId?(console.log(t),console.log(typeof t),t<2?(this.scanCode(t),!1):void(3===t&&(console.log("bbb"),e.navigateTo({url:"../../mine/usageAssistant"})))):(e.showToast({title:"请先授权登录",icon:"none"}),setTimeout((function(){e.navigateTo({url:"../../public/firstCome/firstCome"})}),500),!1)},iconMenuClick:function(t){var i=this;if(!this.sessionId)return e.showToast({title:"请先授权登录",icon:"none"}),setTimeout((function(){e.navigateTo({url:"../../public/firstCome/firstCome"})}),500),!1;var n=[3,4,5,7];if(n.includes(t)&&!this.watchId)return e.showModal({title:"添加腕表",content:"添加腕表，解锁更多功能",cancelColor:"#f00",success:function(e){e.confirm&&(i.scanType=0,i.showBS=!0)}}),!1;if(5===t)return this.watchPhone?e.makePhoneCall({phoneNumber:this.watchPhone}):e.showToast({icon:"none",title:"未检测到腕表的物联网卡"}),!1;var o=["../../family/deviceData","../../family/servicePackages","../../family/contacts","../../family/location","../../family/chat","","../../family/alarms","../../family/watchSetting","../../family/dietRecord","../../family/dietRecommend","../../family/lifeLog","../../family/healthFile"];e.navigateTo({url:o[t]})},noneScanAdd:function(){var t=this;if(!this.scanInput)return this.$u.toast(this.scanType?"请输入二维码":"请输入IMEI码"),!1;this.showCodeInput=!1;var i=this.scanType?{sessionId:this.sessionId,memberNum:this.scanInput}:{memberId:this.memberId,sessionId:this.sessionId,watchImei:this.scanInput},n=this.scanType?"/mobile/healthy/getEwmMember":"/mobile/healthy/bindWatch";this.$http.post(n,i).then((function(i){t.scanInput="",i.data.success&&(t.scanType?t.addMember(i.data.obj.memberId):(e.$emit("getMemberList"),e.$emit("getMember"),e.showToast({title:"腕表绑定成功"})))}))},addMember:function(t){var i={sessionId:this.sessionId,memberId:t};this.$http.post("/mobile/healthy/addEwmMember",i).then((function(t){t.data.success&&(e.$emit("getMemberList"),e.showToast({title:"添加好友成功"}))}))},actionSheetClick:function(t){console.log(t),t?this.showCodeInput=!0:e.$emit("scanCode",this.scanType)},scanCode:function(e){this.showModal=!1,this.scanType=e,this.showBS=!0}}};t.default=n}).call(this,i("543d")["default"])},"4d87":function(e,t,i){"use strict";var n=i("65b7"),o=i.n(n);o.a},"65b7":function(e,t,i){},9589:function(e,t,i){"use strict";i.r(t);var n=i("b936"),o=i("04cc");for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);i("4d87");var a,r=i("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"19020753",null,!1,n["a"],a);t["default"]=c.exports},b936:function(e,t,i){"use strict";var n={uniBattery:function(){return i.e("components/uni-battery/uni-battery").then(i.bind(null,"6493"))},uIcon:function(){return i.e("uview-ui/components/u-icon/u-icon").then(i.bind(null,"513c"))},uLine:function(){return i.e("uview-ui/components/u-line/u-line").then(i.bind(null,"f0e5"))},uAvatar:function(){return i.e("uview-ui/components/u-avatar/u-avatar").then(i.bind(null,"7681"))},uImage:function(){return i.e("uview-ui/components/u-image/u-image").then(i.bind(null,"62ea"))},uNoticeBar:function(){return i.e("uview-ui/components/u-notice-bar/u-notice-bar").then(i.bind(null,"d07c"))},uActionSheet:function(){return i.e("uview-ui/components/u-action-sheet/u-action-sheet").then(i.bind(null,"fe81"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"dfc0"))},uField:function(){return i.e("uview-ui/components/u-field/u-field").then(i.bind(null,"ecd7"))}},o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showMenu=!e.showMenu},e.e1=function(t){e.showCodeInput=!1})},s=[];i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}))},ea65:function(e,t,i){"use strict";(function(e){i("7736");n(i("66fd"));var t=n(i("9589"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])}},[["ea65","common/runtime","common/vendor"]]]);