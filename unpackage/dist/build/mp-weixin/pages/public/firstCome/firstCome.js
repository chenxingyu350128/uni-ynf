(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/public/firstCome/firstCome"],{"199c":function(t,e,n){"use strict";n.r(e);var o=n("40d0"),s=n("a0a7");for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);n("bfbd");var r,c=n("f0c5"),a=Object(c["a"])(s["default"],o["b"],o["c"],!1,null,"7dd1055c",null,!1,o["a"],r);e["default"]=a.exports},"40d0":function(t,e,n){"use strict";var o={uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"250b"))},uField:function(){return n.e("uview-ui/components/u-field/u-field").then(n.bind(null,"ecd7"))}},s=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},"8ff4":function(t,e,n){},a0a7:function(t,e,n){"use strict";n.r(e);var o=n("e77d"),s=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=s.a},bfbd:function(t,e,n){"use strict";var o=n("8ff4"),s=n.n(o);s.a},c9d6:function(t,e,n){"use strict";(function(t){n("7736");o(n("66fd"));var e=o(n("199c"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e77d:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{showBind:!1,showLogin:!1,phone:"",code:"",loginCode:"",seconds:0,timer:null,openId:"",unionId:""}},computed:{sessionId:function(){return this.$store.state.app.sessionId},token:function(){return this.$store.state.app.token},userInfo:function(){return this.$store.state.app.userInfo},encryptedData:function(){return this.$store.state.app.encryptedData},iv:function(){return this.$store.state.app.iv}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null},methods:{checkPhone:function(t){if(!/^1[3456789]\d{9}$/.test(t))return!0},getUserInfo:function(){var e=this;t.login({provider:"weixin",success:function(n){console.log(n.code),e.loginCode=n.code,"login:ok"===n.errMsg&&t.getUserInfo({provider:"weixin",success:function(n){if(console.log(n),"getUserInfo:ok"===n.errMsg){e.showLogin=!0;var o=n.userInfo,s=n.encryptedData,i=n.iv;e.$store.commit("SET_SINGLE_ITEM",["userInfo",o]),e.$store.commit("SET_SINGLE_ITEM",["encryptedData",s]),e.$store.commit("SET_SINGLE_ITEM",["iv",i])}else t.showToast({title:n.errMsg})}})}})},toIndex:function(){t.switchTab({url:"../../tabbar/index/index"})},wxLogin:function(){var e=this,n={code:this.loginCode,encryptedData:this.encryptedData,iv:this.iv};console.log(n),t.checkSession({success:function(t){console.log(t)}}),this.$http.post("/mobile/user/loginForApplet",n).then((function(n){if(n.data.success){var o=n.data.obj;if(console.log(o),o.sessionId){var s=n.data.obj,i=n.data.msg;t.showToast({title:i}),e.$store.commit("SET_EACH_ITEM",s),t.switchTab({url:"../../tabbar/index/index"}),e.afterLogin()}else e.showBind=!0,e.openId=o.openId,e.unionId=o.unionId}}))},afterLogin:function(){var e=this;t.getNetworkType({success:function(n){console.log("network",n);var o=n.networkType;t.getSystemInfo({success:function(t){console.log(t);var n=t.model,s=t.system,i=t.devicePixelRatio,r=t.screenWidth,c=t.screenHeight,a="".concat(i*c,"*").concat(i*r),u=s,d=n,f=e.sessionId,l=e.token,h=2,p={sessionId:f,token:l,deviceNumber:d,networkWay:o,systemVersion:u,resolutionRatio:a,loginPlatform:h};console.log(p),e.$http.post("/mobile/user/addLoginLog",p)}})}})},getMsgCode:function(){var e=this;if(!this.seconds){if(this.checkPhone(this.phone))return t.showToast({title:"手机号码填写错误，请检查"}),!1;var n={userNo:this.phone};this.$http.get("/mobile/user/sendMsg",n).then((function(n){n.data.success&&(t.showToast({icon:"success",title:"验证码已发送"}),e.seconds=60,e.timer=setInterval((function(){e.seconds--,e.seconds<=0&&clearInterval(e.timer)}),1e3))}))}},bindPhone:function(){var e=this,n=!0,o=[{state:!this.phone,tip:"请输入手机号"},{state:this.checkPhone(this.phone),tip:"手机号码填写错误，请检查"},{state:!this.code,tip:"请输入短信验证码"}];if(o.some((function(e){if(e.state)return t.showToast({title:e.tip}),n=!1,!0})),n){var s={yzcode:this.code,openId:this.openId,userName:this.phone,nickName:this.userInfo.nickName,avatarUrl:this.userInfo.avatarUrl,unionId:this.unionId};this.$http.post("/mobile/user/boundPhoneForApplet",s).then((function(n){if(n.data.success){var o=n.data.obj,s=n.data.msg;t.showToast({title:s}),e.$store.commit("SET_EACH_ITEM",o),t.switchTab({url:"../../tabbar/index/index"}),e.afterLogin()}}))}}}};e.default=n}).call(this,n("543d")["default"])}},[["c9d6","common/runtime","common/vendor"]]]);