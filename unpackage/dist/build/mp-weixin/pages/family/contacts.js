require('common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/family/contacts"],{"2b86":function(e,t,n){"use strict";(function(e){n("7736");s(n("66fd"));var t=s(n("f77f"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"6b28":function(e,t,n){"use strict";n.r(t);var s=n("a1cd"),o=n.n(s);for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);t["default"]=o.a},"76cb":function(e,t,n){},a1cd:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{bsList:[{text:"扫二维码添加联系人",color:"#00aaef",fontSize:28},{text:"手动添加联系人",color:"#00aaef",fontSize:28},{text:"绑定联系人",color:"#00aaef",fontSize:28},{text:"创建新成员",color:"#dd524d",fontSize:28}],assoUser:[],showRelaMembers:!1,showBS:!1,radioValue:0,options0:[{text:"删除",style:{backgroundColor:"#dd524d"}}],options1:[{text:"转让",style:{backgroundColor:"#007aff"}},{text:"删除",style:{backgroundColor:"#dd524d"}}],showNumberInput:!1,memberNum:"",realName:"",phone:"",idCard:"",deleteData:null,showModal:!1,BindContact:!1}},computed:{memberList:function(){var e=this,t=this.$store.state.app.memberList,n=[];return t&&t.length&&(n=t),n.forEach((function(t){e.$set(t,"show",!1)})),n},sessionId:function(){return this.$store.state.app.sessionId},userId:function(){return this.$store.state.app.userId},memberId:function(){return this.$store.state.member.memberId}},methods:{radioChange:function(e){console.log(e),this.radioValue=e},turnMember:function(t){console.log(t);var n=t.memberId;this.$store.commit("SET_MEMBER_ITEM",["memberId",n]),e.navigateBack()},commitForm:function(){var t=this;if(this.showNumberInput=!1,this.BindContact){if(!this.memberNum)return this.$u.toast("请输入用户编码"),!1;if(!this.realName&&!this.phone&&!this.idCard)return this.$u.toast("姓名、手机号、身份证号至少填一项"),!1;var n={memberNum:this.memberNum,sessionId:this.sessionId,userId:this.userId,trueName:this.realName,phone:this.phone,idCard:this.idCard};this.$http.post("/mobile/user/boundMember",n).then((function(e){e.data.success&&t.$u.toast(e.data.msg)}))}else{if(!this.memberNum)return this.$u.toast("请输入用户编码"),!1;var s={sessionId:this.sessionId,memberNum:this.memberNum};this.$http.get("/mobile/healthy/getEwmMember",s).then((function(n){if(n.data.success){var s=n.data.obj.memberId,o={memberId:s,sessionId:t.sessionId};t.$http.post("/mobile/healthy/addEwmMember",o).then((function(n){n.data.success&&(e.$emit("getMemberList"),t.$u.toast("添加成功"))}))}}))}},actionSheetClick:function(t){console.log(t),1===t||2===t?(this.BindContact=2===t,this.showNumberInput=!0):3===t?e.navigateTo({url:"./addNewMember"}):e.$emit("scanCode",1)},click:function(e,t){var n=this.memberList[e].memberId,s=this.memberList[e].isLead,o={sessionId:this.sessionId,memberId:n},i=1===t||0===t&&!s;i?this.deleteMember(o):this.transfer(o)},deleteMember:function(t){var n=this;e.showModal({title:"删除联系人",cancelColor:"#f00",content:"删除后该成员的数据将被清空，此操作不可恢复",success:function(s){s.confirm&&n.$http.post("/mobile/user/delMemberOrUser",t).then((function(t){t.data.success&&(e.$emit("getMemberList"),n.$u.toast("删除成功！"))}))}})},transfer:function(t){var n=this;e.showModal({title:"权限转让",cancelColor:"#f00",content:"转让后你将失去对该成员的相关操作权限，请谨慎操作，如查询相关权限请查看使用帮助",success:function(e){e.confirm&&n.$http.get("/mobile/user/userAppList",t).then((function(e){e.data.success&&(n.assoUser=e.data.obj,n.showRelaMembers=!!n.assoUser.length)}))}})},transferMethod:function(){var t=this;this.showRelaMembers=!1;var n={memberId:this.memberId,sessionId:this.sessionId,userId:this.assoUser[this.radioValue].userId};this.$http.post("/mobile/healthy/editAssignment",n).then((function(n){n.data.success&&(e.$emit("getMemberList"),t.$u.toast(n.data.msg),t.radioValue=0)}))},open:function(e){var t=this;this.memberList.forEach((function(n,s){t.$set(n,"show",s===e)}))}}};t.default=n}).call(this,n("543d")["default"])},a5d2:function(e,t,n){"use strict";var s=n("76cb"),o=n.n(s);o.a},e3e7:function(e,t,n){"use strict";var s={uSwipeAction:function(){return n.e("uview-ui/components/u-swipe-action/u-swipe-action").then(n.bind(null,"1e4d"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"62ea"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"dfc0"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"513c"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"250b"))},uField:function(){return n.e("uview-ui/components/u-field/u-field").then(n.bind(null,"ecd7"))},uActionSheet:function(){return n.e("uview-ui/components/u-action-sheet/u-action-sheet").then(n.bind(null,"fe81"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"f0e5"))}},o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showRelaMembers=!1},e.e1=function(t){e.showNumberInput=!1},e.e2=function(t){e.showNumberInput=!1},e.e3=function(t){e.showBS=!0})},i=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}))},f77f:function(e,t,n){"use strict";n.r(t);var s=n("e3e7"),o=n("6b28");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("a5d2");var u,r=n("f0c5"),a=Object(r["a"])(o["default"],s["b"],s["c"],!1,null,"2d7bdecc",null,!1,s["a"],u);t["default"]=a.exports}},[["2b86","common/runtime","common/vendor"]]]);